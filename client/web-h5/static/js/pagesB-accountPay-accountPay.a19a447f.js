(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-accountPay-accountPay"],{"1b1d":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,"uni-page-body[data-v-6d0ac748]{background-color:hsla(0,0%,92.2%,.16)}.status-contents[data-v-6d0ac748]{width:100%;height:%?100?%;background:rgba(242 155 135);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;line-height:%?100?%}.status-contents_left[data-v-6d0ac748]{position:absolute;top:%?-5?%}.status-contents_centent[data-v-6d0ac748]{width:100%;text-align:center;color:#fff}.Box[data-v-6d0ac748]{width:90%;padding-left:5%;color:#333;margin-top:%?20?%}.BoxTitle[data-v-6d0ac748]{width:100%;height:%?80?%;font-size:%?32?%;line-height:%?80?%}.moenyBox[data-v-6d0ac748]{width:100%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.moenyBoxCotent[data-v-6d0ac748]{width:%?200?%;height:%?90?%;border:%?1?% #ccc solid;line-height:%?90?%;text-align:center;margin-right:%?25?%;font-size:%?28?%;border-radius:%?15?%}.active[data-v-6d0ac748]{width:%?200?%;height:%?90?%;border:%?1?% #f29b87 solid;line-height:%?90?%;text-align:center;margin-right:%?25?%;font-size:%?28?%;border-radius:%?15?%;background:rgba(251,167,148,.63);color:#fff}.Boxinput[data-v-6d0ac748]{width:100%;height:%?100?%}.Boxinput uni-input[data-v-6d0ac748]{width:95%;padding-left:2%;height:%?80?%;background-color:#fff;border:%?1?% #d8d8d8 solid;border-radius:%?15?%;margin-top:%?20?%;font-size:%?30?%}.tip[data-v-6d0ac748]{width:100%;height:%?60?%;font-size:%?28?%;color:#7c7c7c}.btnOne[data-v-6d0ac748]{width:100%;height:%?80?%;background:rgba(242 155 135);font-size:%?30?%;line-height:%?80?%;color:#fff;margin-top:%?40?%}.btnTwo[data-v-6d0ac748]{width:100%;height:%?80?%;background-color:hsla(0,0%,92.2%,.16);border:#f29b87 solid %?1?%;color:#f29b87;font-size:%?30?%;line-height:%?80?%;margin-top:%?50?%}body.?%PAGE?%[data-v-6d0ac748]{background-color:hsla(0,0%,92.2%,.16)}",""])},"33ba":function(t,n,e){var o=e("1b1d");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("35d2200d",o,!0,{sourceMap:!1,shadowMode:!1})},"78df":function(t,n,e){"use strict";var o=e("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("f499")),i=o(e("6d58")),c=o(e("c997")),s=o(e("d148")),r=new c.default,l={data:function(){return{pay_money:"",pay_switch:!1,chooseplay:"",tabIndex:0}},components:{uniIcon:i.default,eonfox:c.default,fns:s.default},onLoad:function(t){this.chooseplay=t.chooseplay,console.log("000000",this.chooseplay)},methods:{back:function(){uni.navigateBack({delta:1})},tapTab:function(t){this.tabIndex=t},pay:function(){var t=this;t.tabIndex=0,(!/^\d+(\.\d+)?$/.test(t.pay_money)||t.pay_money<=0)&&uni.showToast({title:"请输入正确金额",icon:"none"})},payAli:function(){var t=this;if(!/^\d+(\.\d+)?$/.test(t.pay_money)||t.pay_money<=0)uni.showToast({title:"请输入正确金额",icon:"none"});else{0!=t.tabIndex?100*t.tabIndex:100*t.pay_money,r.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:t.money_fen,pay_method:"alipay",alipay_trade_type:"APP"}]]},callback:function(n){console.log("调起支付宝支付",n),s.default.checkError(n,"s",function(t,n){uni.showToast({title:n,icon:"none"})});var e=n.data.s.data.alipay;e&&uni.requestPayment({provider:"alipay",orderInfo:e,success:function(n){console.log("success:"+(0,a.default)(n)),t.load(),uni.showToast({title:"充值成功",icon:"none"})},fail:function(t){console.log("fail:"+(0,a.default)(t))}})},error:function(t){s.default.err("提交订单失败",t,1)}})}},WeChatPay:function(){var t=this,n="";n=0!=t.tabIndex?100*t.tabIndex:100*t.pay_money,r.submit({request:{s:["SESSIONWEIXINACCESSTOKEN"]},callback:function(e){var o=s.default.checkError(e,"s",function(t,n){uni.showToast({title:"请先确认微信授权",icon:"none"})});console.log(o),o.s?r.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:n,pay_method:"weixinpay",weixin_trade_type:"MPJSAPI",weixin_login_openid:o.s.openid}]]},callback:function(n){console.log("调起微信支付",n);var e=s.default.checkError(n,"s",function(t,n){uni.showToast({title:n,icon:"none"})}),o=e.s;if(o){var a=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",i,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&uni.showToast({title:"支付成功",success:function(){}}),"get_brand_wcpay_request:fail"==t.err_msg&&uni.showToast({title:"支付失败",icon:"none"}),"get_brand_wcpay_request:cancel"==t.err_msg&&uni.showToast({title:"已取消支付",icon:"none",success:function(){setTimeout(function(){uni.navigateBack({delta:1})},1500)}})})};console.log("ress",o);var i={appId:o.appid,timeStamp:String(o.time_stamp),nonceStr:o.nonce_str,package:"prepay_id="+o.prepay_id,signType:o.sign_type,paySign:o.pay_sign};console.log("getBrandWCPayRequest",i),"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)):a()}else console.log("提交订单失败",o),t.payWeChatPMJSAPI();console.log("提交订单",o)},error:function(t){console.log("提交订单失败",t,1)}}):(console.log("location",location.href),r.left_token(function(t){var n=encodeURIComponent(location.href),e=r.api_server_url+"?"+encodeURI('data=[["SESSIONWEIXINAUTHORIZE",[{"notify_url":"'+n+'"}]]]')+"&token="+t;console.log(e),location.href=e}))},error:function(t){s.default.err("err",t,1)}})},pay_APP_weixin:function(){var t=this;r.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:100*t.pay_money,pay_method:"weixinpay",weixin_trade_type:"APP"}]]},callback:function(n){console.log("商家",n),s.default.checkError(n,"s",function(n,e){uni.showToast({title:e,icon:"none"}),t.pay_switch=!1})&&(console.log("发起支付",n.data.s.data),t.requestPayment(n.data.s.data))},error:function(t){s.default.err("提交订单失败",t,1)}})},pay_mp_weixin:function(){var t=this;wx.login({success:function(n){t.code?(console.log("发起网络请求"),r.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:100*t.pay_money}]]},callback:function(n){console.log("商家",n),s.default.checkError(n,"s",function(n,e){uni.showToast({title:e,icon:"none"}),t.pay_switch=!1})&&(console.log("发起支付",n.data.s.data),t.requestPayment(n.data.s.data))},error:function(n){console.log("出错啦",n),uni.showToast({title:(0,a.default)(n),icon:"none"}),t.pay_switch=!1}})):(t.pay_switch=!1,console.log("登录失败！"+n.errMsg),uni.showToast({title:"登录失败！"+n.errMsg,icon:"none"}))},fail:function(){t.pay_switch=!1}})},requestPayment:function(t){var n=this;n.test="开始了";n=this;console.log("支付参数"+(0,a.default)(t)),console.log("调起支付"),n.test="调起支付",uni.requestPayment({success:function(e){if(console.log("成功success:"+(0,a.default)(e)),"requestPayment:ok"==e.errMsg){n.pay_switch=!1;var o=0,i=setInterval(function(){o++,o<=30?n.pay_result_query(t.order_id,function(){clearInterval(i),n.load(),uni.showToast({title:"充值成功",icon:"none"})}):uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"})},1e3)}else uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"}),n.pay_switch=!1},fail:function(t){return n.pay_switch=!1,!1}})},pay_result_query:function(t,n){console.log("正在查询"),r.submit({request:{s:["APPLICATIONORDERSELFPAYSTATE",[{order_id:t}]]},callback:function(t){s.default.checkError(t,"s",function(t,n){return!1})&&n()},error:function(t){return 0}})},load:function(){var t=this;r.submit({request:{s:["USERMONEYSELFTOTAL"]},callback:function(n){console.log("预付款",n),0==n.data.s.errno&&(t.money=n.data.s.data,setTimeout(function(){uni.navigateBack({delta:1})},1e3))},error:function(t){console.log("出错啦",t)}})}}};n.default=l},a02e:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"status-contents"},[e("v-uni-view",{staticClass:"status-contents_left",on:{click:function(n){n=t.$handleEvent(n),t.back()}}},[e("uni-icon",{staticClass:"back",attrs:{type:"back",size:"30",color:"#fff"}})],1),e("v-uni-view",{staticClass:"status-contents_centent"},[t._v("充值")])],1),e("v-uni-view",{staticClass:"Box"},[e("v-uni-view",{staticClass:"BoxTitle"},[t._v("充值金额")]),e("v-uni-view",{staticClass:"moenyBox"},[e("v-uni-view",{class:["moenyBoxCotent",100==t.tabIndex?"active":""],attrs:{"data-current":100},on:{click:function(n){n=t.$handleEvent(n),t.tapTab(100)}}},[t._v("100元")]),e("v-uni-view",{class:["moenyBoxCotent",200==t.tabIndex?"active":""],attrs:{"data-current":200},on:{click:function(n){n=t.$handleEvent(n),t.tapTab(200)}}},[t._v("200元")]),e("v-uni-view",{class:["moenyBoxCotent",300==t.tabIndex?"active":""],attrs:{"data-current":300},on:{click:function(n){n=t.$handleEvent(n),t.tapTab(300)}}},[t._v("500元")])],1),e("v-uni-view",{staticClass:"Boxinput"},[e("v-uni-input",{attrs:{type:"number",placeholder:"其他金额"},on:{blur:function(n){n=t.$handleEvent(n),t.pay()}},model:{value:t.pay_money,callback:function(n){t.pay_money=n},expression:"pay_money"}})],1),e("v-uni-button",{staticClass:"btnOne",on:{click:function(n){n=t.$handleEvent(n),t.WeChatPay()}}},[t._v("微信充值")]),e("v-uni-button",{staticClass:"btnTwo",on:{click:function(n){n=t.$handleEvent(n),t.payAli()}}},[t._v("支付宝充值")])],1)],1)},a=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return a})},b010:function(t,n,e){"use strict";e.r(n);var o=e("a02e"),a=e("f91f");for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);e("f4102");var c=e("2877"),s=Object(c["a"])(a["default"],o["a"],o["b"],!1,null,"6d0ac748",null);n["default"]=s.exports},f4102:function(t,n,e){"use strict";var o=e("33ba"),a=e.n(o);a.a},f91f:function(t,n,e){"use strict";e.r(n);var o=e("78df"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=a.a}}]);