(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-payUser-payUser"],{"16fd":function(e,t,o){var n=o("5f056");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("4bffed05",n,!0,{sourceMap:!1,shadowMode:!1})},"1ab5":function(e,t,o){"use strict";o.r(t);var n=o("a45d"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"1c08":function(e,t,o){var n=o("8afd");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("476e2eda",n,!0,{sourceMap:!1,shadowMode:!1})},"2afc":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{staticClass:"box"},[o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.paymentPasswordDispaly,expression:"paymentPasswordDispaly"}],on:{click:function(t){t=e.$handleEvent(t),e.Back(t)}}},[o("Icon",{attrs:{type:"back",size:"30"}})],1),o("v-uni-view",{staticClass:"box__header"},[e._t("default")],2),o("v-uni-view",{staticClass:"box__body"},[o("v-uni-view",{staticClass:"password-box"},[o("v-uni-view",{staticClass:"password-item",on:{click:function(t){t=e.$handleEvent(t),e.show(t)}}},e._l(e.items,function(t){return o("v-uni-view",{key:t,staticClass:"password-item-char"},[e.password[t]||0===e.password[t]?o("v-uni-view",{staticClass:"password-item-char__dot"}):e._e()],1)}),1)],1)],1),o("v-uni-view",{class:"keyboard "+e.pattern},[o("ul",{staticClass:"number"},[e._l(e.kkey,function(t,n){return o("li",{key:n,staticClass:"button",on:{click:function(o){o=e.$handleEvent(o),e.input(t)}}},[e._v(e._s(t))])}),o("li",{staticClass:"button"},[e._v(".")]),o("li",{staticClass:"button down",on:{click:function(t){t=e.$handleEvent(t),e.hide(t)}}})],2),o("v-uni-view",{staticClass:"action"},[o("v-uni-view",{staticClass:"delete",on:{click:function(t){t=e.$handleEvent(t),e.del(t)}}}),o("v-uni-view",{staticClass:"ok",on:{click:function(t){t=e.$handleEvent(t),e.done(t)}}})],1)],1)],1)},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"33e3":function(e,t,o){"use strict";o.r(t);var n=o("5f29"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"5f056":function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,".logo[data-v-eed32312]{height:%?200?%;width:%?200?%;margin-top:%?200?%}.title[data-v-eed32312]{font-size:%?36?%;color:#8f8f94}.success[data-v-eed32312]{width:100%;height:100vh;background-color:#fff}.success_title[data-v-eed32312]{width:100%;height:%?130?%;font-size:%?70?%;color:#00b26a;text-align:center}.success_money[data-v-eed32312]{width:100%;height:%?100?%;font-size:%?60?%;margin-top:%?50?%;text-align:center}",""])},"5f29":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("c5f6"),o("1c08");var n={props:{type:String,color:String,size:{type:[Number,String],default:24}},computed:{fontSize:function(){var e=Number(this.size);return e=isNaN(e)?24:e,"".concat(e,"px")}},methods:{onClick:function(){this.$emit("click")}}};t.default=n},"606e":function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,'@charset "UTF-8";.box[data-v-00a25b12]{position:fixed;top:0;background-color:#fff;z-index:999}.box[data-v-00a25b12]{height:100%;width:100%;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.box__header[data-v-00a25b12]{text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%;height:%?170?%;background:#fff;border-top:1px solid #ddd;font-size:%?32?%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.box__body[data-v-00a25b12]{padding-top:%?60?%;-webkit-box-sizing:border-box;box-sizing:border-box;height:%?200?%}.box__body .password-box[data-v-00a25b12]{height:%?90?%;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.box__body .password-box .password-item[data-v-00a25b12]{height:100%;border:1px solid #00c456;border-radius:%?15?%;width:%?540?%;margin:0 auto;-webkit-box-shadow:0 0 3px rgba(0,196,86,.6);box-shadow:0 0 3px rgba(0,196,86,.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.box__body .password-box .password-item-char[data-v-00a25b12]{width:16.66666666%;height:%?90?%;border-right:1px solid #ddd;line-height:%?90?%;text-align:center}.box__body .password-box .password-item-char[data-v-00a25b12]:last-child{border-right:none}.box__body .password-box .password-item-char__dot[data-v-00a25b12]{height:%?90?%}.box__body .password-box .password-item-char__dot[data-v-00a25b12]:after{content:"\\25CF"}.box .keyboard[data-v-00a25b12]{position:fixed;bottom:0;height:%?480?%;width:100%;border-top:1px solid #ddd;background:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.box .keyboard .number[data-v-00a25b12]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:75%;list-style:none;padding:0 0 0 %?1?%;margin:0;border-right:%?1?% solid #ddd}.box .keyboard .number .button[data-v-00a25b12]{margin:0;padding:0;width:33%;height:%?120?%;text-align:center;line-height:%?100?%;border-right:.5px solid #ddd;border-bottom:.5px solid #ddd}.box .keyboard .number .button[data-v-00a25b12]:nth-child(3),.box .keyboard .number .button[data-v-00a25b12]:nth-child(6),.box .keyboard .number .button[data-v-00a25b12]:nth-child(9),.box .keyboard .number .button[data-v-00a25b12]:nth-child(12){border-right:none}.box .keyboard .number .button[data-v-00a25b12]:nth-child(10),.box .keyboard .number .button[data-v-00a25b12]:nth-child(11),.box .keyboard .number .button[data-v-00a25b12]:nth-child(12){border-bottom:none}.box .keyboard .number .button[data-v-00a25b12]:nth-child(11){font-size:%?32?%;font-weight:700}.box .keyboard .number .button[data-v-00a25b12]:active{background:#ddd}.box .keyboard .number .down[data-v-00a25b12]:after{content:"\\F11C";font-family:FontAwesome;font-size:30px}.box .keyboard .action[data-v-00a25b12]{width:25%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.box .keyboard .action .delete[data-v-00a25b12]{height:50%;width:100%;border-bottom:1px solid #ddd;background:#ddd}.box .keyboard .action .delete[data-v-00a25b12]:after{content:"\\F00D";font-family:FontAwesome;text-align:center;width:100%;height:100%;line-height:100%;font-size:30px;display:block;line-height:%?240?%}.box .keyboard .action .delete[data-v-00a25b12]:active{background:#fff}.box .keyboard .action .ok[data-v-00a25b12]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:100%}.box .keyboard .action .ok[data-v-00a25b12]:after{content:"\\F00C";font-family:FontAwesome;width:100%;height:100%;line-height:100%;text-align:center;font-size:30px;display:block;line-height:%?240?%}.box .keyboard .action .ok[data-v-00a25b12]:active{background:#ddd}\n/*动画*/@-webkit-keyframes slidedown-data-v-00a25b12{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes slidedown-data-v-00a25b12{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}.slidedown[data-v-00a25b12]{-webkit-animation:slidedown-data-v-00a25b12 .3s linear;animation:slidedown-data-v-00a25b12 .3s linear;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}.slideup[data-v-00a25b12]{-webkit-animation:slideup-data-v-00a25b12 .3s linear;animation:slideup-data-v-00a25b12 .3s linear;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}@-webkit-keyframes slideup-data-v-00a25b12{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes slideup-data-v-00a25b12{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}',""])},"639d":function(e,t,o){"use strict";o.r(t);var n=o("8ddb"),a=o("eefd");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("c337"),o("e5a1");var s=o("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"eed32312",null);t["default"]=r.exports},6491:function(e,t,o){"use strict";o.r(t);var n=o("2afc"),a=o("1ab5");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("9fc7");var s=o("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"00a25b12",null);t["default"]=r.exports},"6a2a":function(e,t,o){"use strict";var n=o("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("7f7f");var a=n(o("f499")),i=n(o("6491")),s=n(o("6d58")),r=n(o("c997")),c=n(o("d148")),d=n(o("92b5")),l=n(o("83e6")),u=new r.default,p=new l.default,f={data:function(){return{mchName:"未设置",headImg:"../../static/wode.png",qiniu:"",code:"",pay_method:"money",money:"",mch_id:"",cashier_user_id:"",isDisable:!1,isDisablePaymentPassword:!1,pay_methods:["预付款支付","微信支付"],pay_index:0,pay_pass_display:!1,pay_pass:"",password:"",paymentPasswordDispaly:!0,isSuccess:!1}},components:{uniIcon:s.default,uniPassword:i.default},onLoad:function(e){console.log("option",e),this.mch_id=e.mch_id,e.user_id?this.cashier_user_id=e.user_id:this.cashier_user_id="",this.getUserInfo(this.mch_id)},methods:{back:function(){console.log("支付返回"),uni.navigateBack({delta:1})},pay_methods_switch:function(e){var t=e.target.value;switch(console.log("支付方式:",typeof t,"-",t),this.pay_index=t,t){case"0":this.pay_method="money",this.pay_pass_display=!1;break;case"1":this.pay_method="weixinpay",this.pay_pass_display=!1;break;case"2":this.pay_method="alipay",this.pay_pass_display=!1;break}console.log("当前支付方式:",this.pay_method,"--\x3e",this.pay_methods[t])},pay:function(){var e=this;if(console.log("开始支付",e.isDisable),e.isDisable)uni.showToast({title:"请勿重复操作",icon:"none"});else if(e.money)switch(e.isDisable=!0,e.pay_method){case"money":e.pay_pass_display=!0;break;case"weixinpay":break;case"alipay":break;default:break}},pay_password:function(){this.pay_pass_display=!0},onInput:function(e){},pay_money:function(e,t){t&&"function"==typeof t||(t=function(){});var o=this;uni.showLoading({title:"正在支付"}),u.submit({request:{s:["MERCHANTMONEYSELFPAYMENT",[{merchant_id:o.mch_id,money_fen:100*o.money,comment:o.money,pay_password:e,pay_method:"user_money",action_user_id:o.cashier_user_id}]]},callback:function(e){c.default.checkError(e,"s",function(e,n){t(),o.isDisable=!1,uni.showToast({title:n,icon:"none"})})&&(o.websocketMessage(),uni.showToast({title:"支付成功",icon:"success",success:function(){o.isSuccess=!0,o.pay_pass_display=!1}}))},error:function(e){t(),o.isDisable=!1,uni.showToast({title:(0,a.default)(e),duration:"2000"})}})},paymentPasswordBack:function(e){console.log("支付密码点击了返回，进来了",e),this.isDisablePaymentPassword=!1,this.isDisable=!1,this.pay_pass_display=!1},onConfirms:function(e){var t=this;if(t.isDisablePaymentPassword)return!1;var o=e.value;console.log("password",o,o.length),6!=o.length?c.default.err("请正确输入密码"):(t.isDisablePaymentPassword=!0,t.pay_money(o,function(){t.isDisablePaymentPassword=!1}))},payAli:function(){var e=this;u.submit({request:{s:["MERCHANTMONEYSELFPAYMENT",[{merchant_id:e.mch_id,credit_number:e.credit_number,money_fen:100*e.money,pay_method:"alipay",alipay_trade_type:"APP",action_user_id:e.cashier_user_id}]]},callback:function(t){console.log("调起支付宝支付",t),c.default.checkError(t,"s",function(e,t){uni.showToast({title:t,icon:"none"})});var o=t.data.s.data.alipay;o&&uni.requestPayment({provider:"alipay",orderInfo:o,success:function(t){console.log("success:"+(0,a.default)(t)),uni.showToast({title:"支付成功",success:function(){setTimeout(function(){e.websocketMessage(),uni.hideToast(),uni.reLaunch({url:"../../pages/index/index"})},1500)}})},fail:function(e){console.log("fail:"+(0,a.default)(e))}})},error:function(e){c.default.err("提交订单失败",e,1)}})},pay_mp_weixin:function(){var e=this;wx.login({success:function(t){e.code=t.code,t.code?(console.log("发起网络请求"),u.submit({request:{s:["MERCHANTMONEYSELFPAYMENT",[{merchant_id:e.mch_id,weixin_login_code:t.code,money_fen:100*e.money,pay_method:"weixinpay",weixin_trade_type:"JSAPI",action_user_id:e.cashier_user_id}]]},callback:function(t){e.isDisable=!1,console.log("商家",t),c.default.checkError(t,"s",function(t,o){e.isDisable=!1,uni.showToast({title:o,icon:"none"})})&&(console.log("发起支付",t.data.s.data),e.requestPayment(t.data.s.data))},error:function(t){e.isDisable=!1,console.log("出错啦",t),uni.showToast({title:(0,a.default)(t),icon:"none"})}})):(e.isDisable=!1,console.log("登录失败！"+t.errMsg),uni.showToast({title:"登录失败！"+t.errMsg,icon:"none"}))}})},pay_app_weixin:function(){var e=this;uni.showLoading({title:"正在支付"}),console.log("支付开始"),u.submit({request:{s:["MERCHANTMONEYSELFPAYMENT",[{merchant_id:e.mch_id,money_fen:100*e.money,pay_method:"weixinpay",weixin_trade_type:"APP",action_user_id:e.cashier_user_id}]]},callback:function(t){uni.hideLoading(),e.isDisable=!0,console.log("订单获取回调",(0,a.default)(t)),c.default.checkError(t,"s",function(t,o){e.isDisable=!1,uni.showToast({title:o,icon:"none"})})&&(console.log("发起支付",t.data.s.data),e.requestPayment(t.data.s.data),e.isDisable=!1)},error:function(t){e.isDisable=!1,console.log("出错啦",t),uni.showToast({title:(0,a.default)(t),icon:"none"}),uni.hideLoading()}})},requestPayment:function(e){var t=this;uni.requestPayment({success:function(o){if(console.log("支付成功success:"+(0,a.default)(o)),"requestPayment:ok"==o.errMsg){uni.showToast({title:"正在查询支付结果",icon:"loading"}),d.default.checkPayState({order_id:e.order_id,success:function(){uni.showToast({title:"支付成功"}),t.websocketMessage(),setTimeout(function(){uni.hideToast(),uni.reLaunch({url:"../../pages/index/index"})},1500)},fail:function(){uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"})}})}else uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"})},fail:function(e){return!1}})},switcher_pay:function(){uni.showToast({title:"暂不支持支付功能的切换"})},order_query:function(e,t){console.log("正在查询"),u.submit({request:{s:["APPLICATIONORDERSELFPAYSTATE",[{order_id:e}]]},callback:function(e){return e.errno||e.data.s.errno?0:e.data.s.data?void t():0},error:function(e){return 0}})},getUserInfo:function(e){console.log("getUserInfo  ：  star");var t=this;u.submit({request:{config:["APPLICATIONCONFIG"],mch:["MERCHANTGET",[{merchant_id:e,lon:0,lat:0}]]},callback:function(e){var o=c.default.checkError(e,["config","mch"],function(e,t){uni.showToast({title:t,icon:"none"})});console.log("qiniu && mch : ",o),o.config&&o.config.qiniu_domain&&(t.qiniu=o.config.qiniu_domain),o.mch&&(t.mchName=o.mch.name,t.headImg=t.qiniu+o.mch.logo_image_id),console.log("qiniu && mch : ",o)}})},websocketMessage:function(){var e=this,t="商家收款已到账，"+e.money+"元";console.log("1111111提醒商家收款成功1111111",e.cashier_user_id,t),p.user_push(e.cashier_user_id,{type:"商家收款提醒",content:t},function(e){console.log("！！！！！！提醒商家收款失败！！！！！",e)})}}};t.default=f},"6c07":function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,".content[data-v-eed32312]{width:100%;margin-top:%?70?%;background-color:#fff}.content .title-box[data-v-eed32312]{width:100%;height:60px;padding-left:15px;line-height:60px;background:#fff;border-bottom:1px solid #ccc}.content .title-box .icon[data-v-eed32312]{margin-top:-5px}.content .main-content[data-v-eed32312]{width:calc(90% - %?2?%);height:460px;margin:0 auto;background-color:#fff;border-right:%?1?% solid #ccc;border-left:%?1?% solid #ccc;border-bottom:1px solid #ccc}.content .main-content .content-title[data-v-eed32312]{width:calc(100% - %?20?%);height:60px;margin:20px 0;line-height:60px;color:#fff;padding-left:%?20?%;background-color:green}.content .main-content .eName[data-v-eed32312]{background-color:#fff;display:block;width:120px;height:120px;line-height:120px;font-size:28px;color:#fff;text-align:center;margin:0 auto;border-radius:50%;border:1px solid #ccc;background-color:orange}.content .main-content .cName[data-v-eed32312]{display:block;font-size:%?34?%;width:100%;height:%?40?%;color:#333;margin:%?10?% auto;text-align:center}.content .main-content .img[data-v-eed32312]{width:140px;margin:0 auto}.content .main-content .img uni-image[data-v-eed32312]{width:140px;height:140px}.content .main-content .find[data-v-eed32312]{display:block;width:100%;text-align:center;margin:10px;font-size:14px}.content .buy-count[data-v-eed32312]{width:95%;height:30%;color:#ccc;margin:0 auto;font-size:%?24?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-bottom:1px solid #ccc;text-align:left!important}.content .buy-count .num[data-v-eed32312]{width:100%;height:33%;line-height:40px;display:block;color:rgba(0,0,0,0) 0;font-size:%?30?%}.content .buy-count .num_[data-v-eed32312]{width:99%;height:%?90?%;line-height:80px;font-size:%?30?%;display:block;background-color:#eee;border-radius:%?15?%;padding-left:1%}.content .confirm-btn[data-v-eed32312]{width:95%;height:55px;color:#fff;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#f8a0a0;border-radius:4px}",""])},"75bc":function(e,t,o){"use strict";o.r(t);var n=o("972d"),a=o("33e3");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);var s=o("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},"83e6":function(e,t,o){"use strict";var n=o("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(o("f499")),i=n(o("c997")),s=new i.default,r=function(e){};r.prototype={url:"wss://eapie.eonfox.com:9999",connect_type:0,debug:!1,close_type:0,token:"",open:!1,client_id:"",server_time:0,messages:[],message_max_number:10,messages_change:function(){},heartbeat_interval_id:null,heartbeat_ms:15e3,heartbeat_messages:[],heartbeat_message_max_number:10,heartbeat_messages_change:function(){},connect_parameter:null,debug_message:function(e,t){if(!r.prototype.debug)return!1;console.log(e),uni.showToast({title:e,icon:"none",duration:3e3}),"function"==typeof t&&t()},get_data:function(e){return!!e.data&&JSON.parse(e.data)},set_heartbeat_messages:function(e){this.heartbeat_messages.length>=this.heartbeat_message_max_number&&this.heartbeat_messages.pop(),this.heartbeat_messages.unshift(e),"function"==typeof r.prototype.heartbeat_messages_change&&r.prototype.heartbeat_messages_change()},set_messages:function(e){this.messages.length>=this.message_max_number&&this.messages.pop(),this.messages.unshift(e),"function"==typeof r.prototype.messages_change&&r.prototype.messages_change()},messages_change_function:function(e){r.prototype.messages_change=e},heartbeat_messages_change_function:function(e){r.prototype.heartbeat_messages_change=e},session_websocket_token:function(e){if("function"!=typeof e){var t=s.token();return function(){try{return t["session_websocket_token"]}catch(e){return!1}}()?t["session_websocket_token"]:""}return s.submit({callback:function(){var t="",o=s.token();(function(){try{return o["session_websocket_token"]}catch(e){return!1}})()&&(t=o["session_websocket_token"]),e(t)}}),!0},get_token:function(e){var t=r.prototype.session_websocket_token();t?(console.log("get_websocket_token 已存在",t),e(t)):(console.log("get_websocket_token 不存在，异步获取"),r.prototype.session_websocket_token(function(t){e(t)}))},connect:function(e){r.prototype.connect_type=1,r.prototype.not_android_connect(e)},android_connect:function(e){},not_android_connect:function(e){var t=this;r.prototype.debug_message("websocket.connect 连接 websocket"),r.prototype.connect_parameter=e,r.prototype.get_token(function(e){e||r.prototype.debug_message("websocket.connect 连接失败！没有获取到 websocket token"),uni.connectSocket({url:r.prototype.url,success:function(){t.set_messages({state:!0,content:"连接webscoket成功"}),r.prototype.token=e,r.prototype.debug_message(" uni.connectSocket 连接webscoket成功!token:"+e)},fail:function(){t.set_messages({state:!1,content:"连接webscoket失败"}),r.prototype.debug_message(" uni.connectSocket 连接webscoket失败!token:"+e)}})}),uni.onSocketOpen(function(){r.prototype.close_type=0,r.prototype.open=!0,r.prototype.debug_message("uni.onSocketOpen WebSocket连接已经打开监听!"),e&&"function"==typeof e.onSocketOpen&&e.onSocketOpen()}),uni.onSocketClose(function(t){r.prototype.token="",r.prototype.open=!1,r.prototype.client_id="",r.prototype.heartbeat_interval_id&&clearInterval(r.prototype.heartbeat_interval_id),e&&"function"==typeof e.onSocketClose&&e.onSocketClose(t),0==r.prototype.close_type&&(r.prototype.debug_message("uni.onSocketClose 非手动关闭，开启心跳守护"),setTimeout(function(){r.prototype.connect(e)},r.prototype.heartbeat_ms)),r.prototype.debug_message("uni.onSocketClose WebSocket 已关闭！")}),uni.onSocketMessage(function(t){console.log("onSocketMessage!!!!!!!!"),setTimeout(function(){console.log("setTimeout!!!!!!!!"),r.prototype.debug_message("onSocketMessage 获取 websocket 数据:"+(0,a.default)(t));var o=s.websocketToken(),n=r.prototype.get_data(t);if(n.data&&n.data.client_id&&r.prototype.client_id!=n.data.client_id||n.data&&n.data.server_time&&r.prototype.server_time!=n.data.server_time||r.prototype.token!=o)return n.data&&n.data.client_id&&r.prototype.client_id!=n.data.client_id&&r.prototype.debug_message("websocket 连接ID 不一致",function(){console.log("websocket.prototype.client_id != r.data.client_id",r.prototype.client_id,n.data.client_id)}),n.data&&n.data.server_time&&r.prototype.server_time!=n.data.server_time&&r.prototype.debug_message("websocket 服务器时间 不一致",function(){console.log("websocket.prototype.server_time != r.data.server_time",r.prototype.server_time,n.data.server_time)}),r.prototype.token!=o&&r.prototype.debug_message("websocket_token 不一致",function(){console.log("websocket.prototype.token != websocket_token",r.prototype.token,o)}),r.prototype.init(n.data.client_id,n.data.server_time,o,e,function(){"function"==typeof e.onSocketMessage&&e.onSocketMessage(t)});e&&"function"==typeof e.onSocketMessage&&e.onSocketMessage(t)},0)}),uni.onSocketError(function(o){setTimeout(function(){r.prototype.connect(e)},r.prototype.heartbeat_ms),e&&"function"==typeof e.onSocketError&&e.onSocketError(o),t.set_messages({state:!1,content:"连接webscoket失败",error:o}),r.prototype.debug_message("uni.onSocketError WebSocket连接打开失败，请检查!error:"+o)})},init:function(e,t,o,n,a){r.prototype.open,r.prototype.token;r.prototype.open&&e||(_this.set_messages({state:!1,content:"websocket 初始化失败",error:""}),r.prototype.debug_message("websocket 初始化失败！")),s.submit({request:{s:["SESSIONWEBSOCKETSELFCLIENT",[{client_id:e,server_time:t}]]},callback:function(){r.prototype.client_id=e,r.prototype.server_time=t,r.prototype.token=o,r.prototype.heartbeat_interval_id&&clearInterval(r.prototype.heartbeat_interval_id),r.prototype.heartbeat_interval_id=setInterval(function(){r.prototype.debug_message("websocket init 心跳检测"),r.prototype.heartbeat(function(e){r.prototype.debug_message("websocket init 心跳检测失败",function(){console.log("websocket_init 心跳检测失败返回值：",e)}),clearInterval(r.prototype.heartbeat_interval_id),r.prototype.connect(n)})},r.prototype.heartbeat_ms),"function"!=typeof n.initSuccess&&(n.initSuccess=function(){}),n.initSuccess(),r.prototype.debug_message("websocket init 初始化成功"),r.prototype.set_heartbeat_messages({state:!0,content:"websocket init 初始化成功！"}),"function"!=typeof a&&(a=function(){}),a()},error:function(e){return r.prototype.debug_message("websocket init 初始化错误"),r.prototype.set_heartbeat_messages({state:!1,content:"websocket init 初始化错误！",error:e}),n.initError(e)}})},heartbeat:function(e){var t={open:r.prototype.open,token:r.prototype.token,client_id:r.prototype.client_id};if(!r.prototype.open||!r.prototype.token)return"function"!=typeof e&&(e=function(){}),r.prototype.debug_message("websocket heartbeat 初始化失败！"),r.prototype.set_heartbeat_messages({state:!1,content:"websocket 初始化失败！"}),e(t);var o=(0,a.default)({module:"heartbeat",application:s.application,token:r.prototype.token});uni.sendSocketMessage({data:o,success:function(e){r.prototype.debug_message("websocket heartbeat 保持心跳成功！"),r.prototype.set_heartbeat_messages({state:!0,content:"websocket heartbeat 保持心跳成功！"})},fail:function(o){return r.prototype.debug_message("websocket heartbeat 保持心跳失败！"),r.prototype.set_heartbeat_messages({state:!1,content:"websocket heartbeat 保持心跳失败！",error:o}),e(t)}})},restart:function(){r.prototype.close(),r.prototype.connect(r.prototype.connect_parameter),r.prototype.debug_message("重启 websocket")},close:function(){r.prototype.open&&1==r.prototype.connect_type&&uni.closeSocket(),r.prototype.close_type=1,r.prototype.token="",r.prototype.open=!1,r.prototype.client_id="",r.prototype.heartbeat_interval_id&&clearInterval(r.prototype.heartbeat_interval_id)},user_push:function(e,t,o){var n={open:r.prototype.open,token:r.prototype.token};if(!r.prototype.open||!r.prototype.token)return"function"!=typeof o&&(o=function(){}),o(n);var i=(0,a.default)({module:"user_push",application:s.application,token:r.prototype.token,user_id:e,message:t});uni.sendSocketMessage({data:i,success:function(e){r.prototype.debug_message("websocket 消息推送成功！",function(){console.log("user_push",e)}),r.prototype.set_messages({state:!0,content:"websocket user_push 消息推送成功！"})},fail:function(e){return r.prototype.debug_message("websocket 消息推送失败！",function(){console.log("user_push",e)}),r.prototype.set_messages({state:!1,content:"websocket user_push 消息推送失败！",error:e}),o(errorData)}})},admin_push:function(e,t){var o={open:r.prototype.open,token:r.prototype.token};if(!r.prototype.open||!r.prototype.token)return"function"!=typeof t&&(t=function(){}),t(o);var n=(0,a.default)({module:"admin_push",application:s.application,token:r.prototype.token,message:e});uni.sendSocketMessage({data:n,success:function(e){r.prototype.debug_message("websocket 消息推送成功！",function(){console.log("admin_push",e)}),r.prototype.set_messages({state:!0,content:"websocket admin_push 消息推送成功！"})},fail:function(e){return r.prototype.debug_message("websocket 消息推送失败！",function(){console.log("admin_push",e)}),r.prototype.set_messages({state:!1,content:"websocket admin_push 消息推送失败！",error:e}),t(errorData)}})}};var c=r;t.default=c},"8afd":function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,'@font-face{font-family:FontAwesome;src:url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?v=4.7.0);src:url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot#iefix&v=4.7.0) format("embedded-opentype"),url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0) format("woff2"),url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff?v=4.7.0) format("woff"),url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf?v=4.7.0) format("truetype"),url(https://cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular) format("svg");font-weight:400;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-keyboard-o:before{content:"\\F11C"}.fa-close:before,.fa-remove:before,.fa-times:before{content:"\\F00D"}.fa-check:before{content:"\\F00C"}',""])},"8ddb":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.isSuccess,expression:"!isSuccess"}],staticClass:"main-content"},[o("v-uni-view",{staticClass:"content-title"},[o("v-uni-text",[e._v("商家收款")])],1),o("v-uni-image",{staticClass:"eName",attrs:{src:e.headImg}}),o("v-uni-text",{staticClass:"cName"},[e._v(e._s(e.mchName))]),o("v-uni-view",{staticClass:"buy-count"},[o("v-uni-picker",{staticStyle:{color:"#2973E3"},attrs:{value:e.pay_index,range:e.pay_methods},on:{change:function(t){t=e.$handleEvent(t),e.pay_methods_switch(t)}}},[o("v-uni-view",{staticClass:"uni-input",staticStyle:{"font-size":"36upx"}},[e._v("请选择支付方式:"+e._s(e.pay_methods[e.pay_index]))])],1),o("v-uni-label",{staticClass:"num",staticStyle:{color:"#444444","font-size":"38upx"},attrs:{for:"pay_money"}},[e._v("支付金额")]),o("v-uni-input",{staticClass:"num_",staticStyle:{color:"#444444"},attrs:{id:"pay_money",type:"digit",placeholder:"请输入支付金额"},model:{value:e.money,callback:function(t){e.money=t},expression:"money"}})],1),o("v-uni-button",{staticClass:"confirm-btn",attrs:{disabled:e.isDisable},on:{click:function(t){t=e.$handleEvent(t),e.pay(t)}}},[e._v("确认支付")])],1),e.pay_pass_display?o("uni-password",{ref:"secrity",on:{input:function(t){t=e.$handleEvent(t),e.onInput(t)},confirm:function(t){t=e.$handleEvent(t),e.onConfirms(t)},back:function(t){t=e.$handleEvent(t),e.paymentPasswordBack(t)}}},[e._v("请输入6位支付密码")]):e._e(),o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isSuccess,expression:"isSuccess"}],staticClass:"success"},[o("v-uni-view",{staticClass:"success_title"},[e._v("支付成功")]),o("v-uni-view",{staticClass:"success_money"},[e._v("￥"+e._s(e.money)+" 元")])],1)],1)},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"92b5":function(e,t,o){"use strict";var n=o("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(o("c997")),i=new a.default,s={checkPayState:function(e){var t=this;if("function"!=typeof e.success&&(e.success=function(){}),"function"!=typeof e.fail&&(e.fail=function(){}),"number"!=typeof e.frequency&&(e.frequency=3),!e.frequency||!e.order_id)return e.fail("参数不正确",e);e.frequency--,i.submit({request:{s:["APPLICATIONORDERSELFPAYSTATE",[{order_id:e.order_id}]]},callback:function(o){return console.log("order.checkPayState:::",o),o.errno||o.data.s.errno||!o.data.s.data?(console.log("支付状态查询失败或者未支付"),e.frequency?void setTimeout(function(){return t.checkPayState(e)},2e3):e.fail()):(console.log("支付成功"),e.success())},error:function(t){e.fail(t)}})}},r=s;t.default=r},"972d":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-text",{class:["fa fa-"+e.type],style:{color:e.color,"font-size":e.fontSize},on:{click:function(t){t=e.$handleEvent(t),e.onClick()}}})},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"9fb2":function(e,t,o){var n=o("6c07");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("06b652d4",n,!0,{sourceMap:!1,shadowMode:!1})},"9fc7":function(e,t,o){"use strict";var n=o("a58d"),a=o.n(n);a.a},a45d:function(e,t,o){"use strict";var n=o("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("c5f6"),o("28a5");var a=n(o("6d58")),i=n(o("75bc")),s={props:{defaultPassword:String},components:{uniIcon:i.default,Icon:a.default},data:function(){return{items:[0,1,2,3,4,5],password:[],kkey:[0,1,2,3,4,5,6,7,8,9],pattern:"hidden",display:!0}},methods:{Back:function(){var e={};this.$emit("back",e)},show:function(){var e={cancel:!1};this.$emit("shown",e),e.cancel||(this.pattern="slideup")},hide:function(){var e={cancel:!1};this.$emit("hidden",e),e.cancel||(this.pattern="slidedown")},input:function(e){var t={target:this,data:e,cancel:!1,callback:void 0};if(console.log("s"),this.$emit("input",t),!t.cancel){if(this.password.length===this.items.length)return;t.callback&&"function"===typeof t.callback&&t.callback.call(this),this.password.push(e)}},del:function(){var e={cancel:!1};this.$emit("delete",e),e.cancel||this.password.length>0&&(this.password=this.password.slice(0,this.password.length-1))},done:function(){this.password.length===this.items.length&&this.$emit("confirm",{target:this,value:this.password.join("")})}},watch:{defaultPassword:{immediate:!0,handler:function(e){e&&6===e.length&&(this.password=e.split("").map(Number))}}}};t.default=s},a58d:function(e,t,o){var n=o("606e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("4f06").default;a("eb843638",n,!0,{sourceMap:!1,shadowMode:!1})},c337:function(e,t,o){"use strict";var n=o("16fd"),a=o.n(n);a.a},e5a1:function(e,t,o){"use strict";var n=o("9fb2"),a=o.n(n);a.a},eefd:function(e,t,o){"use strict";o.r(t);var n=o("6a2a"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a}}]);