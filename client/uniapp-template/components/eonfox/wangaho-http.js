"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(o[a]=n[a])}return o},writable:!0,configurable:!0});var http=function e(){var t={scheme:"",account:"",host:"",hash:"",search:"",link:"",href:"",protocol:null,user:null,pass:null,domain:null,port:null,anchor:{link:"",search:"",path:null,query:null},query:null,path:null,file:null,current:null,fragment:null,encode:e.prototype.encode,decode:e.prototype.decode,reload:function(e){return e?window.location.reload(!0):window.location.reload(),this},request:function(e){return e?window.location.replace(this.href):window.location.assign(this.href),this},open:function(e,t,o){var r={};return r.width=e&&"number"==typeof e?e:100,r.height=t&&"number"==typeof t?t:100,r.left=o&&"number"==typeof o.left?o.left:(window.screen.width-e)/2,r.top=o&&"number"==typeof o.top?o.top:(window.screen.height-t)/2,r.target=!o||"string"!=typeof o.target&&"number"!=typeof o.target?"_blank":o.target,r.toolbar=o&&"string"==typeof o.toolbar?o.toolbar:"no",r.scrollbars=o&&"string"==typeof o.scrollbars?o.scrollbars:"no",r.menubar=o&&"string"==typeof o.menubar?o.menubar:"no",r.location=o&&"string"==typeof o.location?o.location:"no",r.resizable=o&&"string"==typeof o.resizable?o.resizable:"no",r.status=o&&"string"==typeof o.status?o.status:"no",window.open(this.href,r.target,"height="+r.width+", width="+r.height+", top="+r.top+", left="+r.left+", toolbar="+r.toolbar+", menubar="+r.menubar+", scrollbars="+r.scrollbars+", resizable="+r.resizable+",location="+r.location+", status="+r.status),this}};if(0==arguments.length)t=e.prototype.parse_url(t,window.location.href);else for(var o in arguments)arguments[o]&&"string"!=typeof arguments[o]||(t=e.prototype.parse_url(t,arguments[o])),arguments[o]&&"object"!=_typeof(arguments[o])||(t=e.prototype.merge(t,arguments[o]));return t=e.prototype.build_url(t)};http.prototype={constructor:http,merge:function(e,t){if("object"!=(void 0===t?"undefined":_typeof(t)))return e;for(var o in t)if("file"!=o&&"fragment"!=o&&"current"!=o||null===t[o])if("protocol"!=o&&"user"!=o&&"pass"!=o&&"domain"!=o&&"port"!=o||null===t[o]||"string"!=typeof t[o]){if("query"==o&&t[o]&&"object"==_typeof(t[o])&&t[o].constructor==Object)e[o]&&"object"==_typeof(e[o])||(e[o]=new Object),e[o]=Object.assign(e[o],t[o]);else if("path"==o&&t[o]&&"object"==_typeof(t[o])&&t[o].constructor==Array&&t[o].length>0){e[o]&&"object"==_typeof(e[o])||(e[o]=new Array);for(var r in t[o])"string"!=typeof t[o][r]&&"number"!=typeof t[o][r]||(e[o][r]=t[o][r])}else if("anchor"==o&&t[o]&&"object"==_typeof(t[o])&&t[o].constructor==Object&&(e[o]||(e[o]=new Object),t[o].query&&"object"==_typeof(t[o].query)&&t[o].query.constructor==Object&&(null!==e[o].query&&"object"==_typeof(e[o].query)||(e[o].query=new Object),e[o].query=Object.assign(e[o].query,t[o].query)),t[o].path&&"object"==_typeof(t[o].path)&&t[o].path.length>0)){null!==e[o].path&&"object"==_typeof(e[o].path)||(e[o].path=new Array);for(var r in t[o].path)"string"!=typeof t[o].path[r]&&"number"!=typeof t[o].path[r]||(e[o].path[r]=t[o].path[r])}}else e[o]=t[o];else e[o]=t[o];return e},parse_url:function(e,t){if("string"!=typeof t)return e;t=t.replace(/(^\s*)|(\s*$)/g,"");var o=/^([a-zA-Z_]+)\:\/\/([^\/]+)/,r=o.exec(t);if(r){t=t.substr(r.index+r[0].length),e.protocol=r[1];var o=/^([^\:\@]+)\:([^\@]+)\@([^\:]+)[\:]?(.*)?/,n=o.exec(r[2]);if(n)e.user=n[1],e.pass=n[2],e.domain=n[3],void 0!==n[4]?(e.port=n[4],e.host=n[3]+":"+n[4]):e.host=n[3];else{var o=/^([^\:]+)[\:]?(.*)?/,n=o.exec(r[2]);e.domain=n[1],void 0!==n[2]?(e.port=n[2],e.host=n[1]+":"+n[2]):e.host=n[1]}}var o=/^([^\?\#]+)/,r=o.exec(t);if(r&&(t=t.substr(r.index+r[0].length),r[1]=r[1].replace(/(^\s*)|(\s*$)/g,""),null===e.file&&(r[1].match(/\/$/g)?e.file=!1:e.file=!0),r[1].match(/^\//g)?e.current=!1:e.current=!0,r[1]=r[1].replace(/(^\/)|(\/$)/g,""),""!=r[1]))if(e.current&&e.path&&e.path.length)for(var a=r[1].split("/"),c=a.length-1,i=e.path.length-1;i>=0&&("string"!=typeof a[c]&&"number"!=typeof a[c]||(e.path[i]=a[c],c--),!(c<0));i--);else e=this.merge(e,{path:r[1].split("/")});var o=/^([^\#]+)/,r=o.exec(t);r&&(t=t.substr(r.index+r[0].length),e=this.merge(e,{query:this.parse_query(r[1])}));var o=/^\#(.*)/,r=o.exec(t);if(r){t=t.substr(r.index+r[0].length),null===e.fragment&&(e.fragment=!0),e.hash="#"+r[1];var o=/^[\/]?([^\?]+)[\?]?(.*)?/,n=o.exec(r[1]);if(n)n[1]=n[1].replace(/(^\/)|(\/$)/g,""),""!=n[1]&&(e=this.merge(e,{anchor:{path:n[1].split("/")}})),void 0!==n[2]&&(e=this.merge(e,{anchor:{query:this.parse_query(n[2])}}));else{var o=/^\?(.*)/,n=o.exec(r[1]);n&&(e=this.merge(e,{anchor:{query:this.parse_query(n[1])}}))}}return e},parse_query:function(e){function t(e,o,r){var n=o.shift(),a=n.replace(/\]$/g,""),c=/^\d$/g;a.match(c)&&(a=parseInt(a));for(var i=0;""==a&&0!==a;){if(void 0===e[i]){a=i;break}i++}return o.length?(e[a]=void 0!==e[a]?e[a]:new Object,e[a]=t(e[a],o,r),e):(e[a]=r,e)}if(0==arguments.length)return null;if("string"!=typeof e)return e;e=e.replace(/^(\?|\#){0,}/g,"");for(var o=e.split("&"),r=new Object,n=0;n<o.length;n++){var a=o[n].split("="),c=a.shift(),i=a.join("="),l=/\[([^\[\]]*){0,}\]$/g;if(c.match(l)){var p=c.split("["),s=p.shift();if(""==s)continue;r[s]=void 0!==r[s]?r[s]:new Object,r[s]=t(r[s],p,i)}else r[c]=i}return r=this.decode(r)},build_query:function(e){function t(e){var o=new Array;if("object"==(void 0===e?"undefined":_typeof(e)))for(var r in e){var n=t(e[r]);for(var a in n)r=http.prototype.encode(r),o.push("["+r+"]"+n[a])}else e="="+http.prototype.encode(e),o.push(e);return o}if(0==arguments.length)return null;if("object"!=(void 0===e?"undefined":_typeof(e)))return e;var o="";for(var r in e){var n=t(e[r]);for(var a in n)r=this.encode(r),o+=r+n[a]+"&"}return o=o.substr(0,o.length-1)},build_url:function(e){if(0==arguments.length)return null;e.scheme=e.protocol?e.protocol+"://":"";var t=e.user?e.user:"",o=e.pass?":"+e.pass:"";e.account=t||o?t+o+"@":"";var r=e.domain?e.domain:"",n=e.port?":"+e.port:"";if(e.host=r||n?r+n:"",e.hash="",e.anchor.link="",e.anchor.search="",e.link="",e.search="",e.path&&e.path.length>0&&"object"==_typeof(e.path)){for(var a in e.path)e.link+="/"+this.encode(e.path[a]);e.file||(e.link+="/"),""==e.host&&e.current&&(e.link=e.link.replace(/^\//g,""))}if(""!=e.link||""==e.host||e.current||(e.link="/"),e.query&&"object"==_typeof(e.query)){var c=this.build_query(e.query);e.search=c?"?"+c:""}if(e.anchor){if(e.anchor.path&&e.anchor.path.length>0&&"object"==_typeof(e.anchor.path)){for(var a in e.anchor.path)e.anchor.link+="/"+this.encode(e.anchor.path[a]);e.anchor.link+="/"}e.anchor.query&&"object"==_typeof(e.anchor.query)&&(c=this.build_query(e.anchor.query),e.anchor.search=c?"?"+c:""),""!=e.anchor.link||""!=e.anchor.search?(""==e.anchor.link&&(e.anchor.link="/"),e.hash="#"+e.anchor.link+e.anchor.search):e.fragment&&(e.anchor.link="/",e.hash="#/")}return e.href=e.scheme+e.account+e.host+e.link+e.search+e.hash,e},encode:function(e){if(0==arguments.length)return null;if(!e)return e;if("object"==(void 0===e?"undefined":_typeof(e))&&e.constructor==Array){for(var t=new Array,o=0;o<e.length;o++)"object"==_typeof(e[o])?t[encodeURIComponent(decodeURIComponent(encodeURI(o)))]=this.encode(e[o]):t[encodeURIComponent(decodeURIComponent(encodeURI(o)))]=encodeURIComponent(decodeURIComponent(encodeURI(e[o])));return t}if("object"==(void 0===e?"undefined":_typeof(e))){var r=new Object;for(var o in e)"object"==_typeof(e[o])?r[encodeURIComponent(decodeURIComponent(encodeURI(o)))]=this.encode(e[o]):r[encodeURIComponent(decodeURIComponent(encodeURI(o)))]=encodeURIComponent(decodeURIComponent(encodeURI(e[o])));return r}return"string"==typeof e?encodeURIComponent(decodeURIComponent(encodeURI(e))):e},decode:function(e){if(0==arguments.length)return null;if(!e)return e;if("object"==(void 0===e?"undefined":_typeof(e))&&e.constructor==Array){for(var t=new Array,o=0;o<e.length;o++)"object"==_typeof(e[o])?t[decodeURIComponent(o)]=this.decode(e[o]):t[decodeURIComponent(o)]=decodeURIComponent(e[o]);return t}if("object"==(void 0===e?"undefined":_typeof(e))){var r=new Object;for(var o in e)"object"==_typeof(e[o])?r[decodeURIComponent(o)]=this.decode(e[o]):r[decodeURIComponent(o)]=decodeURIComponent(e[o]);return r}return"string"==typeof e?decodeURIComponent(e):e}},exports.default=http;