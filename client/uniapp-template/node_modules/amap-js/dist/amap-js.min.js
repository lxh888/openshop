/*!
 * AMapJS v1.2.1
 * 
 * Copyright (c) 2018-present Derek Li
 * Released under the MIT License - https://choosealicense.com/licenses/mit/
 * 
 * https://github.com/iDerekLi/amap-js
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).AMapJS=n()}(this,function(){"use strict";function t(t,n){return t(n={exports:{}},n.exports),n.exports}var n=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),e=t(function(t){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)}),r=(e.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),o=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},i=function(t){try{return!!t()}catch(we){return!0}},c=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),a=n.document,u=r(a)&&r(a.createElement),s=function(t){return u?a.createElement(t):{}},f=!c&&!i(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}),l=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")},p=Object.defineProperty,h={f:c?Object.defineProperty:function(t,n,e){if(o(t),n=l(n,!0),o(e),f)try{return p(t,n,e)}catch(we){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},d=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},v=c?function(t,n,e){return h.f(t,n,d(1,e))}:function(t,n,e){return t[n]=e,t},y={}.hasOwnProperty,m=function(t,n){return y.call(t,n)},g=0,_=Math.random(),b=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++g+_).toString(36))},w=t(function(t){var r="__core-js_shared__",o=n[r]||(n[r]={});(t.exports=function(t,n){return o[t]||(o[t]=n!==undefined?n:{})})("versions",[]).push({version:e.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),O=w("native-function-to-string",Function.toString),P=t(function(t){var r=b("src"),o="toString",i=(""+O).split(o);e.inspectSource=function(t){return O.call(t)},(t.exports=function(t,e,o,c){var a="function"==typeof o;a&&(m(o,"name")||v(o,"name",e)),t[e]!==o&&(a&&(m(o,r)||v(o,r,t[e]?""+t[e]:i.join(String(e)))),t===n?t[e]=o:c?t[e]?t[e]=o:v(t,e,o):(delete t[e],v(t,e,o)))})(Function.prototype,o,function(){return"function"==typeof this&&this[r]||O.call(this)})}),A=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},S=function(t,n,e){if(A(t),n===undefined)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},j="prototype",k=function(t,r,o){var i,c,a,u,s=t&k.F,f=t&k.G,l=t&k.S,p=t&k.P,h=t&k.B,d=f?n:l?n[r]||(n[r]={}):(n[r]||{})[j],y=f?e:e[r]||(e[r]={}),m=y[j]||(y[j]={});for(i in f&&(o=r),o)a=((c=!s&&d&&d[i]!==undefined)?d:o)[i],u=h&&c?S(a,n):p&&"function"==typeof a?S(Function.call,a):a,d&&P(d,i,a,t&k.U),y[i]!=a&&v(y,i,u),p&&m[i]!=a&&(m[i]=a)};n.core=e,k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var M=k,T={}.toString,I=function(t){return T.call(t).slice(8,-1)},E=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==I(t)?t.split(""):Object(t)},L=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t},C=function(t){return E(L(t))},U=Math.ceil,x=Math.floor,N=function(t){return isNaN(t=+t)?0:(t>0?x:U)(t)},F=Math.min,R=function(t){return t>0?F(N(t),9007199254740991):0},V=Math.max,B=Math.min,D=function(t,n){return(t=N(t))<0?V(t+n,0):B(t,n)},G=function(t){return function(n,e,r){var o,i=C(n),c=R(i.length),a=D(r,c);if(t&&e!=e){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((t||a in i)&&i[a]===e)return t||a||0;return!t&&-1}},z=w("keys"),H=function(t){return z[t]||(z[t]=b(t))},W=G(!1),q=H("IE_PROTO"),J=function(t,n){var e,r=C(t),o=0,i=[];for(e in r)e!=q&&m(r,e)&&i.push(e);for(;n.length>o;)m(r,e=n[o++])&&(~W(i,e)||i.push(e));return i},K="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return J(t,K)},X=c?Object.defineProperties:function(t,n){o(t);for(var e,r=Q(n),i=r.length,c=0;i>c;)h.f(t,e=r[c++],n[e]);return t};M(M.S+M.F*!c,"Object",{defineProperties:X}),M(M.S+M.F*!c,"Object",{defineProperty:h.f});var Y=n.document,Z=Y&&Y.documentElement,$=H("IE_PROTO"),tt=function(){},nt="prototype",et=function(){var t,n=s("iframe"),e=K.length,r="<",o=">";for(n.style.display="none",Z.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write(r+"script"+o+"document.F=Object"+r+"/script"+o),t.close(),et=t.F;e--;)delete et[nt][K[e]];return et()},rt=Object.create||function(t,n){var e;return null!==t?(tt[nt]=o(t),e=new tt,tt[nt]=null,e[$]=t):e=et(),n===undefined?e:X(e,n)};M(M.S,"Object",{create:rt});var ot={f:Object.getOwnPropertySymbols},it={f:{}.propertyIsEnumerable},ct=function(t){return Object(L(t))},at=Object.assign,ut=!at||i(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=at({},t)[e]||Object.keys(at({},n)).join("")!=r})?function(t,n){for(var e=ct(t),r=arguments.length,o=1,i=ot.f,a=it.f;r>o;)for(var u,s=E(arguments[o++]),f=i?Q(s).concat(i(s)):Q(s),l=f.length,p=0;l>p;)u=f[p++],c&&!a.call(s,u)||(e[u]=s[u]);return e}:at;M(M.S+M.F,"Object",{assign:ut});var st=Array.isArray||function(t){return"Array"==I(t)},ft=t(function(t){var e=w("wks"),r=n.Symbol,o="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=o&&r[t]||(o?r:b)("Symbol."+t))}).store=e}),lt=ft("species"),pt=function(t){var n;return st(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!st(n.prototype)||(n=undefined),r(n)&&null===(n=n[lt])&&(n=undefined)),n===undefined?Array:n},ht=function(t,n){return new(pt(t))(n)},dt=function(t,n){return!!t&&i(function(){n?t.call(null,function(){},1):t.call(null)})},vt=function(t,n){var e=1==t,r=2==t,o=3==t,i=4==t,c=6==t,a=5==t||c,u=n||ht;return function(n,s,f){for(var l,p,h=ct(n),d=E(h),v=S(s,f,3),y=R(d.length),m=0,g=e?u(n,y):r?u(n,0):undefined;y>m;m++)if((a||m in d)&&(p=v(l=d[m],m,h),t))if(e)g[m]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return m;case 2:g.push(l)}else if(i)return!1;return c?-1:o||i?i:g}}(0),yt=dt([].forEach,!0);M(M.P+M.F*!yt,"Array",{forEach:function(t){return vt(this,t,arguments[1])}}),M(M.S,"Array",{isArray:st});var mt=ft("toStringTag"),gt="Arguments"==I(function(){return arguments}()),_t=function(t,n){try{return t[n]}catch(we){}},bt=function(t){var n,e,r;return t===undefined?"Undefined":null===t?"Null":"string"==typeof(e=_t(n=Object(t),mt))?e:gt?I(n):"Object"==(r=I(n))&&"function"==typeof n.callee?"Arguments":r},wt={};wt[ft("toStringTag")]="z",wt+""!="[object z]"&&P(Object.prototype,"toString",function(){return"[object "+bt(this)+"]"},!0);var Ot=function(t){return function(n,e){var r,o,i=String(L(n)),c=N(e),a=i.length;return c<0||c>=a?t?"":undefined:(r=i.charCodeAt(c))<55296||r>56319||c+1===a||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}},Pt={},At=h.f,St=ft("toStringTag"),jt=function(t,n,e){t&&!m(t=e?t:t.prototype,St)&&At(t,St,{configurable:!0,value:n})},kt={};v(kt,ft("iterator"),function(){return this});var Mt=function(t,n,e){t.prototype=rt(kt,{next:d(1,e)}),jt(t,n+" Iterator")},Tt=H("IE_PROTO"),It=Object.prototype,Et=Object.getPrototypeOf||function(t){return t=ct(t),m(t,Tt)?t[Tt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?It:null},Lt=ft("iterator"),Ct=!([].keys&&"next"in[].keys()),Ut="@@iterator",xt="keys",Nt="values",Ft=function(){return this},Rt=function(t,n,e,r,o,i,c){Mt(e,n,r);var a,u,s,f=function(t){if(!Ct&&t in d)return d[t];switch(t){case xt:case Nt:return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",p=o==Nt,h=!1,d=t.prototype,y=d[Lt]||d[Ut]||o&&d[o],m=y||f(o),g=o?p?f("entries"):m:undefined,_="Array"==n&&d.entries||y;if(_&&(s=Et(_.call(new t)))!==Object.prototype&&s.next&&(jt(s,l,!0),"function"!=typeof s[Lt]&&v(s,Lt,Ft)),p&&y&&y.name!==Nt&&(h=!0,m=function(){return y.call(this)}),(Ct||h||!d[Lt])&&v(d,Lt,m),Pt[n]=m,Pt[l]=Ft,o)if(a={values:p?m:f(Nt),keys:i?m:f(xt),entries:g},c)for(u in a)u in d||P(d,u,a[u]);else M(M.P+M.F*(Ct||h),n,a);return a},Vt=Ot(!0);Rt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:undefined,done:!0}:(t=Vt(n,e),this._i+=t.length,{value:t,done:!1})});var Bt=ft("unscopables"),Dt=Array.prototype;Dt[Bt]==undefined&&v(Dt,Bt,{});var Gt=function(t){Dt[Bt][t]=!0},zt=function(t,n){return{value:n,done:!!t}},Ht=Rt(Array,"Array",function(t,n){this._t=C(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=undefined,zt(1)):zt(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Pt.Arguments=Pt.Array,Gt("keys"),Gt("values"),Gt("entries");for(var Wt=ft("iterator"),qt=ft("toStringTag"),Jt=Pt.Array,Kt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Qt=Q(Kt),Xt=0;Xt<Qt.length;Xt++){var Yt,Zt=Qt[Xt],$t=Kt[Zt],tn=n[Zt],nn=tn&&tn.prototype;if(nn&&(nn[Wt]||v(nn,Wt,Jt),nn[qt]||v(nn,qt,Zt),Pt[Zt]=Jt,$t))for(Yt in Ht)nn[Yt]||P(nn,Yt,Ht[Yt],!0)}var en,rn,on,cn=function(t,n,e,r){if(!(t instanceof n)||r!==undefined&&r in t)throw TypeError(e+": incorrect invocation!");return t},an=function(t,n,e,r){try{return r?n(o(e)[0],e[1]):n(e)}catch(we){var i=t["return"];throw i!==undefined&&o(i.call(t)),we}},un=ft("iterator"),sn=Array.prototype,fn=function(t){return t!==undefined&&(Pt.Array===t||sn[un]===t)},ln=ft("iterator"),pn=e.getIteratorMethod=function(t){if(t!=undefined)return t[ln]||t["@@iterator"]||Pt[bt(t)]},hn=t(function(t){var n={},e={},r=t.exports=function(t,r,i,c,a){var u,s,f,l,p=a?function(){return t}:pn(t),h=S(i,c,r?2:1),d=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(fn(p)){for(u=R(t.length);u>d;d++)if((l=r?h(o(s=t[d])[0],s[1]):h(t[d]))===n||l===e)return l}else for(f=p.call(t);!(s=f.next()).done;)if((l=an(f,h,s.value,r))===n||l===e)return l};r.BREAK=n,r.RETURN=e}),dn=ft("species"),vn=function(t,n){var e,r=o(t).constructor;return r===undefined||(e=o(r)[dn])==undefined?n:A(e)},yn=function(t,n,e){var r=e===undefined;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},mn=n.process,gn=n.setImmediate,_n=n.clearImmediate,bn=n.MessageChannel,wn=n.Dispatch,On=0,Pn={},An="onreadystatechange",Sn=function(){var t=+this;if(Pn.hasOwnProperty(t)){var n=Pn[t];delete Pn[t],n()}},jn=function(t){Sn.call(t.data)};gn&&_n||(gn=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return Pn[++On]=function(){yn("function"==typeof t?t:Function(t),n)},en(On),On},_n=function(t){delete Pn[t]},"process"==I(mn)?en=function(t){mn.nextTick(S(Sn,t,1))}:wn&&wn.now?en=function(t){wn.now(S(Sn,t,1))}:bn?(on=(rn=new bn).port2,rn.port1.onmessage=jn,en=S(on.postMessage,on,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(en=function(t){n.postMessage(t+"","*")},n.addEventListener("message",jn,!1)):en=An in s("script")?function(t){Z.appendChild(s("script"))[An]=function(){Z.removeChild(this),Sn.call(t)}}:function(t){setTimeout(S(Sn,t,1),0)});var kn={set:gn,clear:_n},Mn=kn.set,Tn=n.MutationObserver||n.WebKitMutationObserver,In=n.process,En=n.Promise,Ln="process"==I(In),Cn=function(){var t,e,r,o=function(){var n,o;for(Ln&&(n=In.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(we){throw t?r():e=undefined,we}}e=undefined,n&&n.enter()};if(Ln)r=function(){In.nextTick(o)};else if(!Tn||n.navigator&&n.navigator.standalone)if(En&&En.resolve){var i=En.resolve(undefined);r=function(){i.then(o)}}else r=function(){Mn.call(n,o)};else{var c=!0,a=document.createTextNode("");new Tn(o).observe(a,{characterData:!0}),r=function(){a.data=c=!c}}return function(n){var o={fn:n,next:undefined};e&&(e.next=o),t||(t=o,r()),e=o}};function Un(t){var n,e;this.promise=new t(function(t,r){if(n!==undefined||e!==undefined)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=A(n),this.reject=A(e)}var xn={f:function(t){return new Un(t)}},Nn=function(t){try{return{e:!1,v:t()}}catch(we){return{e:!0,v:we}}},Fn=n.navigator,Rn=Fn&&Fn.userAgent||"",Vn=function(t,n){if(o(t),r(n)&&n.constructor===t)return n;var e=xn.f(t);return(0,e.resolve)(n),e.promise},Bn=function(t,n,e){for(var r in n)P(t,r,n[r],e);return t},Dn=ft("species"),Gn=function(t){var e=n[t];c&&e&&!e[Dn]&&h.f(e,Dn,{configurable:!0,get:function(){return this}})},zn=ft("iterator"),Hn=!1;try{var Wn=[7][zn]();Wn["return"]=function(){Hn=!0},Array.from(Wn,function(){throw 2})}catch(we){}var qn,Jn,Kn,Qn,Xn=function(t,n){if(!n&&!Hn)return!1;var e=!1;try{var r=[7],o=r[zn]();o.next=function(){return{done:e=!0}},r[zn]=function(){return o},t(r)}catch(we){}return e},Yn=kn.set,Zn=Cn(),$n="Promise",te=n.TypeError,ne=n.process,ee=ne&&ne.versions,re=ee&&ee.v8||"",oe=n[$n],ie="process"==bt(ne),ce=function(){},ae=Jn=xn.f,ue=!!function(){try{var t=oe.resolve(1),n=(t.constructor={})[ft("species")]=function(t){t(ce,ce)};return(ie||"function"==typeof PromiseRejectionEvent)&&t.then(ce)instanceof n&&0!==re.indexOf("6.6")&&-1===Rn.indexOf("Chrome/66")}catch(we){}}(),se=function(t){var n;return!(!r(t)||"function"!=typeof(n=t.then))&&n},fe=function(t,n){if(!t._n){t._n=!0;var e=t._c;Zn(function(){for(var r=t._v,o=1==t._s,i=0,c=function(n){var e,i,c,a=o?n.ok:n.fail,u=n.resolve,s=n.reject,f=n.domain;try{a?(o||(2==t._h&&he(t),t._h=1),!0===a?e=r:(f&&f.enter(),e=a(r),f&&(f.exit(),c=!0)),e===n.promise?s(te("Promise-chain cycle")):(i=se(e))?i.call(e,u,s):u(e)):s(r)}catch(we){f&&!c&&f.exit(),s(we)}};e.length>i;)c(e[i++]);t._c=[],t._n=!1,n&&!t._h&&le(t)})}},le=function(t){Yn.call(n,function(){var e,r,o,i=t._v,c=pe(t);if(c&&(e=Nn(function(){ie?ne.emit("unhandledRejection",i,t):(r=n.onunhandledrejection)?r({promise:t,reason:i}):(o=n.console)&&o.error&&o.error("Unhandled promise rejection",i)}),t._h=ie||pe(t)?2:1),t._a=undefined,c&&e.e)throw e.v})},pe=function(t){return 1!==t._h&&0===(t._a||t._c).length},he=function(t){Yn.call(n,function(){var e;ie?ne.emit("rejectionHandled",t):(e=n.onrejectionhandled)&&e({promise:t,reason:t._v})})},de=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),fe(n,!0))},ve=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw te("Promise can't be resolved itself");(n=se(t))?Zn(function(){var r={_w:e,_d:!1};try{n.call(t,S(ve,r,1),S(de,r,1))}catch(we){de.call(r,we)}}):(e._v=t,e._s=1,fe(e,!1))}catch(we){de.call({_w:e,_d:!1},we)}}};ue||(oe=function(t){cn(this,oe,$n,"_h"),A(t),qn.call(this);try{t(S(ve,this,1),S(de,this,1))}catch(n){de.call(this,n)}},(qn=function(t){this._c=[],this._a=undefined,this._s=0,this._d=!1,this._v=undefined,this._h=0,this._n=!1}).prototype=Bn(oe.prototype,{then:function(t,n){var e=ae(vn(this,oe));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=ie?ne.domain:undefined,this._c.push(e),this._a&&this._a.push(e),this._s&&fe(this,!1),e.promise},"catch":function(t){return this.then(undefined,t)}}),Kn=function(){var t=new qn;this.promise=t,this.resolve=S(ve,t,1),this.reject=S(de,t,1)},xn.f=ae=function(t){return t===oe||t===Qn?new Kn(t):Jn(t)}),M(M.G+M.W+M.F*!ue,{Promise:oe}),jt(oe,$n),Gn($n),Qn=e[$n],M(M.S+M.F*!ue,$n,{reject:function(t){var n=ae(this);return(0,n.reject)(t),n.promise}}),M(M.S+M.F*!ue,$n,{resolve:function(t){return Vn(this,t)}}),M(M.S+M.F*!(ue&&Xn(function(t){oe.all(t)["catch"](ce)})),$n,{all:function(t){var n=this,e=ae(n),r=e.resolve,o=e.reject,i=Nn(function(){var e=[],i=0,c=1;hn(t,!1,function(t){var a=i++,u=!1;e.push(undefined),c++,n.resolve(t).then(function(t){u||(u=!0,e[a]=t,--c||r(e))},o)}),--c||r(e)});return i.e&&o(i.v),e.promise},race:function(t){var n=this,e=ae(n),r=e.reject,o=Nn(function(){hn(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return o.e&&r(o.v),e.promise}});e.Promise;var ye="1.2.1",me=function(){};function ge(){return(ge=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function _e(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function be(){return(be=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}Object.assign(me.prototype,{load:function(){}});var we="1.1.1";function Oe(t){function n(n,e){if("object"==typeof t[e]&&"object"==typeof n)t[e]=Oe(t[e],n);else if("object"==typeof n&&null!==n){var r="[object Array]"===Object.prototype.toString.call(n)?[]:{};t[e]=Oe(r,n)}else t[e]=n}for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0,c=r.length;i<c;i++)for(var a in r[i])n(r[i][a],a);return t}function Pe(t,n,e){if("object"!=typeof t||null===t)throw Error("obj is not an Object type");if(!n)return t;var r="string"==typeof n?n.split("."):n,o=r.length,i=r.shift();if("string"!=typeof i||""===i)throw Error("error attribute path");return o>1?Pe(t[i],r,e):e!==undefined?t[i]=e:t[i]}function Ae(t,n){for(var e in n)if(t===n[e])return!0;return!1}function Se(t,n){void 0===n&&(n=""),n="boolean"==typeof n?"?":n;var e=[],r=function(n){var r=t[n];if(Ae(r,["",undefined,null]))return"continue";r.constructor===Array?r.forEach(function(t){e.push(encodeURIComponent(n)+"[]="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))};for(var o in t)r(o);return e.length?n+e.join("&"):""}var je={baseURL:"",url:"",params:{},callbackProp:!1,callbackNamespase:"__httpJsonpCallback",callbackName:"",timeout:6e4,scriptAttr:{type:"",charset:"",crossOrigin:null,async:!0,defer:!1},keepScriptTag:!1,callback:null,load:null,error:null,complete:null,then:null,"catch":null,"finally":null},ke=Date.now();function Me(){}var Te=function(t,n,e){var r=Pe(window,t);if(r=t&&!r?Pe(window,t,{}):r||window,!e)return r[n];r[n]=e},Ie=function(t,n){t.onload!==undefined?t.onload=function(){n()}:t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,n())}},Ee=function(t,n){t.onerror=n};function Le(t,n){"string"==typeof t&&(t={url:t}),n||(n={});var e,r,o=Oe({},je,t||{}),i=be({callback:o.callback,load:o.load,error:o.error,complete:o.complete},n),c=o.params,a="",u="",s=o.callbackNamespase,f=o.callbackProp;function l(){o.keepScriptTag||e.parentNode&&e.parentNode.removeChild(e),u&&Te(s,u,Me),Ie(e,Me),Ee(e,Me),r&&clearTimeout(r)}function p(){a="cancel",Te(s,u)&&l()}f&&""!==c[f]&&(u=c[f]?c[f]:o.callbackName||"jp"+ke++,c[f]=s?s+"."+u:u);var h=o.timeout;h&&(r=setTimeout(function(){a="error",l(),i.error&&i.error(new Error("Request Timeout")),i.complete&&i.complete()},h));var d=o.baseURL+o.url;d=(d+=Se(c,~d.indexOf("?")?"&":"?")).replace("?&","?"),e=document.createElement("script");var v=o.scriptAttr;for(var y in delete v.text,delete v.src,v)e[y]=v[y];u?Te(s,u,function(t){l(),"error"!==a&&(a="callback",i.callback&&i.callback(t),i.complete&&i.complete())}):Ie(e,function(){l(),"error"!==a&&(a="load",i.load&&i.load(),i.complete&&i.complete())}),Ee(e,function(){a="error",l(),i.error&&i.error(new Error("script error")),i.complete&&i.complete()}),e.src=d;var m=document.getElementsByTagName("script")[0]||document.head||document.getElementsByTagName("head")[0];return m.parentNode.insertBefore(e,m),{cancel:p}}Le.version=we;var Ce={protocol:"https:",path:"webapi.amap.com/maps",key:"",v:"1.4.14",params:null,callbackProp:"callback",callbackName:"",crossOrigin:"anonymous",keepScriptTag:!1},Ue=function(t){function n(n){var e;e=t.call(this,n)||this;var r=Object.assign({},Ce,n);return e.protocol=r.protocol,e.path=r.path,e.params=ge({key:r.key,v:r.v},r.params),e.callbackProp=r.callbackProp,e.callbackName=r.callbackName,e.crossOrigin=r.crossOrigin,e.keepScriptTag=r.keepScriptTag,e}_e(n,t);var e=n.prototype;return e.load=function(){var t=this;return this.__loadPromise?this.__loadPromise:(this.__loadPromise=new Promise(function(n,e){var r=function(){t.__loadPromise=null,n(window.AMap)};if(t.checkCorrectness())return r();Le({url:t.protocol+("//"===t.path.slice(0,2)?t.path:"//"+t.path),params:t.params,callbackProp:t.callbackProp,callbackName:t.callbackName,scriptAttr:{async:!0,crossOrigin:t.crossOrigin},keepScriptTag:t.keepScriptTag,callback:r,error:function(n){t.__loadPromise=null,e(n)}})}),this.__loadPromise)},e.checkCorrectness=function(){if(!window.AMap&&"object"!=typeof window.AMap)return!1;for(var t=0,n=["v","Pixel","LngLat","Size","Bounds","Map"];t<n.length;t++){if(!(n[t]in window.AMap))return!1}return this.versionCompare(window.AMap.v,this.params.v)},e.versionCompare=function(t,n){return t===n},e.setProtocol=function(t){return this.protocol=t,this},e.setPath=function(t){return this.path=t,this},e.setKey=function(t){return this.params&&(this.params.key=t),this},e.setV=function(t){return this.params&&(this.params.v=t),this},e.setParams=function(t){return this.params=t,this},e.setCrossOrigin=function(t){return this.crossOrigin=t,this},n}(me),xe={protocol:"https:",path:"webapi.amap.com/ui/{v}/main-async.js",v:"1.0",initAMapUI:"initAMapUI",isAutoInitAMapUI:!1,AMapUIProtocol:undefined,crossOrigin:"anonymous",keepScriptTag:!1},Ne=function(t){function n(n){var e;e=t.call(this,n)||this;var r=Object.assign({},xe,n);return e.v=r.v,e.protocol=r.protocol,e.path=r.path,e.AMapUIProtocol=r.AMapUIProtocol,e.initAMapUI=r.initAMapUI,e.isAutoInitAMapUI=r.isAutoInitAMapUI,e.crossOrigin=r.crossOrigin,e.keepScriptTag=r.keepScriptTag,"string"==typeof e.AMapUIProtocol&&e.setAMapUIProtocol(e.AMapUIProtocol),e}_e(n,t);var e=n.prototype;return e.load=function(){var t=this;return this.__loadPromise?this.__loadPromise:(this.__loadPromise=new Promise(function(n,e){var r=function(){t.__loadPromise=null;var e=function(){return t.checkCorrectness()?window.AMapUI:(window[t.initAMapUI](),window.AMapUI)};n(t.isAutoInitAMapUI?e():e)};if(t.checkCorrectness())return r();var o=t.protocol,i=t.v,c=t.path.replace("{v}",i);Le({url:o+(c="//"===c.replace("{v}",i).slice(0,2)?c:"//"+c),params:t.params,callbackProp:!1,scriptAttr:{async:!0,crossOrigin:t.crossOrigin},keepScriptTag:t.keepScriptTag,load:r,error:function(n){t.__loadPromise=null,e(n)}})}),this.__loadPromise)},e.checkCorrectness=function(){if(!window.AMapUI)return!1;for(var t=0,n=["libConf","uiMods","docProtocol","version"];t<n.length;t++){if(!(n[t]in window.AMapUI))return!1}return this.versionCompare(window.AMapUI.libConf.mainVersion,this.v)},e.versionCompare=function(t,n){return t===n},e.setProtocol=function(t){return this.protocol=t,this},e.setPath=function(t){return this.path=t,this},e.setV=function(t){return this.v=t,this},e.setAMapUIProtocol=function(t){var n="https:"===t?"https:":"http:";return window.AMapUIProtocol=n,this},e.setCrossOrigin=function(t){return this.crossOrigin=t,this},n}(me);function Fe(t,n,e,r){var o=[];(Array.isArray(t)?t:[t]).forEach(function(t){if(!(t instanceof me))throw new TypeError(t+" is not an instance of Loader");if("function"!=typeof t.load)throw new TypeError(t.load+" is not a function");var n=t.load();o.push(n)});var i=Promise.all(o),c={then:n,"catch":e,"finally":r},a={then:function(t){c.then.apply(c,t)},"catch":function(t){c["catch"](t)},"finally":function(){c["finally"]()}},u=i;for(var s in c)"function"==typeof c[s]&&(u=u[s](a[s]));return i}var Re=new(function(){function t(){this.length=0,this.__state={}}var n=t.prototype;return n.set=function(t,n){t in this.__state?this.__state[t]=n:(this.__state[t]=n,this.length++)},n.remove=function(t){t in this.__state&&(delete this.__state[t],this.length--)},n.get=function(t){return this.__state[t]},n.getAll=function(){return this.__state},n.clear=function(){for(var t in this.__state)this.remove(t)},t}());function Ve(t,n){t.install(Be,n)}var Be={version:ye,Loader:me,AMapJSAPILoader:Ue,AMapUILoader:Ne,load:Fe,use:Ve,store:Re};return Be});
