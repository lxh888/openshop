!function(a){function c(){}function d(){}function e(){}function f(){}function g(){}function h(){}function i(){}function j(){}function k(a){if("object"==typeof a)c.frameworkProjectFound(a);else if("string"==typeof a){if("object"==typeof c.frameworkProjectPublic[a])return c.frameworkProjectPublic[a];console.error("“"+a+"”工程不存在")}else if("undefined"==typeof a&&c.frameworkProjectId&&"object"==typeof c.frameworkProjectPublic[c.frameworkProjectId])return c.frameworkProjectPublic[c.frameworkProjectId];return void 0}c.routerConstruct=function(){var d,e,a=new i,b=c.routerDefaultConfiguration();for(d in b)a[d]=b[d];if(0==arguments.length)c.routerParseURL(a,window.location.href);else for(e in arguments)arguments[e]&&("string"==typeof arguments[e]?c.routerParseURL(a,arguments[e]):"object"==typeof arguments[e]&&c.routerMergeConfiguration(a,arguments[e]));return c.routerBuildURL(a),a},c.routerDefaultConfiguration=function(){return{scheme:"",account:"",host:"",uri:"",url:"",hash:"",search:"",link:"",href:"",protocol:void 0,user:void 0,password:void 0,domain:void 0,port:void 0,anchor:{link:"",search:"",path:void 0,query:void 0},query:void 0,path:void 0,isFragment:void 0,isFile:void 0,isCurrent:void 0}},c.routerMergeConfiguration=function(a,b){var c,d,e;if("object"!=typeof b)return a;for(c in b)if("isFile"!=c&&"fragment"!=c&&"isCurrent"!=c)if("protocol"!=c&&"user"!=c&&"password"!=c&&"domain"!=c)if("port"!=c)if("path"!=c&&"query"!=c)if("anchor"!=c);else{if(!b[c]||"object"!=typeof b[c]||b[c].constructor!=Object)continue;if(a[c]&&"object"==typeof a[c]||(a[c]=new Object),b[c].query&&"object"==typeof b[c].query&&b[c].query.constructor==Object){a[c].query&&"object"==typeof a[c].query||(a[c].query=new Object);for(e in b[c].query)a[c].query[e]=b[c].query[e]}if(b[c].path&&"object"==typeof b[c].path&&b[c].path.constructor==Array&&b[c].path.length>0){a[c].path&&"object"==typeof a[c].path||(a[c].path=new Array);for(e in b[c].path)a[c].path[e]=b[c].path[e]}}else{if(!b[c]||"object"!=typeof b[c])continue;if("path"==c){if(b[c].constructor!=Array||b[c].length<1)continue;a[c]&&"object"==typeof a[c]||(a[c]=new Array)}else if("query"==c){if(b[c].constructor!=Object)continue;a[c]&&"object"==typeof a[c]||(a[c]=new Object)}for(e in b[c])a[c][e]=b[c][e]}else d=/^\d+$/,"string"!=typeof b[c]&&"number"!=typeof b[c]||!d.test(b[c])||(a[c]=b[c]);else"string"==typeof b[c]&&(a[c]=b[c]);else"boolean"==typeof b[c]&&(a[c]=b[c]);return a},c.routerParseURL=function(a,b){var d,e,f,g,h,i,j,k,l,m,n;if("string"!=typeof b)return a;if(b=b.replace(/(^\s*)|(\s*$)/g,""),d=/^([a-zA-Z_]+)\:\/\/([^\/]{0,})/,e=d.exec(b),e&&(b=b.substr(e[0].length),a.protocol=e[1],e[2]&&(f=/^([^\:\@]+)\:([^\@]+)\@([^\:]+)[\:]?(.*)?/,g=f.exec(e[2]),g?(a.user=g[1],a.password=g[2],a.domain=g[3],a.port=g[4]):(f=/^([^\:]+)[\:]?(.*)?/,g=f.exec(e[2]),g&&(a.domain=g[1],a.port=g[2])),a.host=a.port?a.domain+":"+a.port:a.domain)),d=/^([^\?\#]+)/,e=d.exec(b),e&&(b=b.substr(e[0].length),a.isFile=e[1].match(/\/$/g)?!1:!0,a.isCurrent=e[1].match(/^\//g)?!1:!0,e[1]=e[1].replace(/(^\/)|(\/$)/g,""),""!=e[1]))if(h=e[1].split("/"),a.isCurrent&&a.path&&a.path.length)for(i=h.length-1,j=a.path.length-1;j>=0&&(("string"==typeof h[i]||"number"==typeof h[i])&&(a.path[j]=h[i],i--),!(0>i));j--);else c.routerMergeConfiguration(a,{path:h});return d=/^([^\#]+)/,e=d.exec(b),e&&(b=b.substr(e[0].length),c.routerMergeConfiguration(a,{query:c.routerParseQuery(e[1])})),d=/^\#(.*)/,e=d.exec(b),e&&(b=b.substr(e[0].length),"undefined"==typeof a.isFragment&&(a.isFragment=!0),a.hash="#"+e[1],k=/^[\/]?([^\?]+)[\?]?(.*)?/,l=k.exec(e[1]),l?(l[1]=l[1].replace(/(^\/)|(\/$)/g,""),""!=l[1]&&c.routerMergeConfiguration(a,{anchor:{path:l[1].split("/")}}),"undefined"!=typeof l[2]&&c.routerMergeConfiguration(a,{anchor:{query:c.routerParseQuery(l[2])}})):(m=/^\?(.*)/,n=m.exec(e[1]),n&&c.routerMergeConfiguration(a,{anchor:{query:c.routerParseQuery(n[1])}}))),a},c.routerParseQuery=function(a){var b,d,e,f,g,h,i,j,l,m;if("number"==typeof a&&(a=a.toString()),"string"!=typeof a)return!1;for(b=a.replace(/^(\?|\#){0,}/g,""),d=b.split("&"),e=new Object,f=0;f<d.length;f++)if(g=d[f].split("="),h=g.shift(),i=g.join("="),j=/\[([^\[\]]*){0,}\]$/g,h.match(j)){if(l=h.split("["),m=l.shift(),""==m)continue;e[m]=void 0!==e[m]?e[m]:new Object,e[m]=c.routerParseQueryChild(e[m],l,i)}else e[h]=i;return e=k.decodeURL(e)},c.routerParseQueryChild=function(a,b,d){var h,e=b.shift(),f=e.replace(/\]$/g,""),g=/^\d$/g;for(f.match(g)&&(f=parseInt(f)),h=0;""==f&&0!==f;){if(void 0===a[h]){f=h;break}h++}return b.length?(a[f]=void 0!==a[f]?a[f]:new Object,a[f]=c.routerParseQueryChild(a[f],b,d),a):(a[f]=d,a)},c.routerBuildQuery=function(a){var b,d,e,f;if("object"!=typeof a)return a;b="";for(d in a){e=c.routerBuildQueryChild(a[d]);for(f in e)d=k.encodeURL(d),b+=d+e[f]+"&"}return b=b.substr(0,b.length-1)},c.routerBuildQueryChild=function(a){var d,e,f,b=new Array;if("object"==typeof a)for(d in a){e=c.routerBuildQueryChild(a[d]);for(f in e)d=k.encodeURL(d),b.push("["+d+"]"+e[f])}else a="="+k.encodeURL(a),b.push(a);return b},c.routerBuildURL=function(a){var b,d,e,f,g,h;if(a.scheme=a.protocol?a.protocol+"://":"",b=a.user?a.user:"",d=a.pass?":"+a.pass:"",a.account=b||d?b+d+"@":"",e=a.domain?a.domain:"",f=a.port?":"+a.port:"",a.host=e||f?e+f:"",a.hash="",a.anchor.link="",a.anchor.search="",a.link="",a.search="",a.path&&a.path.length>0&&"object"==typeof a.path){for(g in a.path)a.link+=""==a.link&&a.isFile?"/"+k.decodeURL(a.path[g]):"/"+k.encodeURL(k.decodeURL(a.path[g]));a.isFile||(a.link+="/"),""==a.host&&a.isCurrent&&(a.link=a.link.replace(/^\//g,""))}if(""!=a.link||""==a.host||a.current||(a.link="/"),a.query&&"object"==typeof a.query&&(h=c.routerBuildQuery(a.query),a.search=h?"?"+h:""),a.anchor){if(a.anchor.path&&a.anchor.path.length>0&&"object"==typeof a.anchor.path){for(g in a.anchor.path)a.anchor.link+="/"+k.encodeURL(k.decodeURL(a.anchor.path[g]));a.anchor.link+="/"}a.anchor.query&&"object"==typeof a.anchor.query&&(h=c.routerBuildQuery(a.anchor.query),a.anchor.search=h?"?"+h:""),""!=a.anchor.link||""!=a.anchor.search?(""==a.anchor.link&&(a.anchor.link="/"),a.hash="#"+a.anchor.link+a.anchor.search):a.isFragment&&(a.anchor.link="/",a.hash="#/")}return a.uri=a.scheme+a.account+a.host+a.link,a.url=a.uri+a.search,a.href=a.url+a.hash,a},c.compilerConstruct=function(a,b){var d=new j;return d.commandState="undefined"==typeof b||b?!0:!1,"undefined"!=typeof a&&("number"==typeof a&&(a=String(a)),"string"==typeof a&&(d.template=a,d.abstractSyntaxTree=c.compilerAlgorithm(d,a))),d},c.compilerDefaultAbstractSyntaxTree=function(){return{compiler:null,error:!1,beforeFirstIndex:-1,beforeLastIndex:-1,afterFirstIndex:-1,afterLastIndex:-1,name:"",before:"",after:"",content:"",isSingle:!1,single:"",isComment:!1,comment:"",isText:!1,text:"",textLength:0,command:{},commandTemplate:{},commandError:!1,attributeTemplate:{},childAbstractSyntaxTree:[],childCompiler:void 0,childTemplate:void 0,eventListener:{},nodeVoid:!1,printContent:void 0,printAbstractSyntaxTree:[],textareaContent:void 0,attributes:{},HTMLDOMElement:null,nodeType:null,templateWarning:!1,templateError:!1}},c.compilerReload=function(a){c.compilerRemoveNode(a),a.abstractSyntaxTree=c.compilerAlgorithm(a,a.template)},c.compilerRemoveNode=function(a){var b,c;for(b in a.abstractSyntaxTree){if(a.abstractSyntaxTree[b].HTMLDOMElement&&a.abstractSyntaxTree[b].HTMLDOMElement.parentNode&&a.abstractSyntaxTree[b].HTMLDOMElement.parentNode.removeChild(a.abstractSyntaxTree[b].HTMLDOMElement),a.abstractSyntaxTree[b].childCompiler&&a.abstractSyntaxTree[b].childCompiler.length)for(c in a.abstractSyntaxTree[b].childCompiler)a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree&&(a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree[0].HTMLDOMElement&&a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree[0].HTMLDOMElement.parentNode&&a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree[0].HTMLDOMElement.parentNode.removeChild(a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree[0].HTMLDOMElement),delete a.abstractSyntaxTree[b].childCompiler[c].abstractSyntaxTree[0].HTMLDOMElement,delete a.abstractSyntaxTree[b].childCompiler[c]);delete a.abstractSyntaxTree[b].HTMLDOMElement,delete a.abstractSyntaxTree[b]}},c.compilerRender=function(a){var b,d,e,f,g;if(!a.compiler)return!1;b={compiler:a.compiler,abstractSyntaxTree:null,data:"object"!=typeof a.data||null===a.data?{}:a.data,refresh:a.refresh?!0:!1,templateError:function(a,b,d){return c.compilerTemplateError(a,b,d)},templateWarning:function(a,b,d){return c.compilerTemplateWarning(a,b,d)},print:function(a){return"string"==typeof a||"number"==typeof a?a:""},encodeHTML:function(a){return k.encodeHTML(a)},decodeHTML:function(a){return k.decodeHTML(a)},compilerArguments:function(a,b,d){var e=b.toLowerCase();return":node"==e||":n"==e?a.HTMLDOMElement:":template"==e||":t"==e?c.compilerTemplateLocation(a).content:":event"==e||":e"==e?d||event||window.event:":value"!=e&&":v"!=e||!a.HTMLDOMElement||"undefined"==typeof a.HTMLDOMElement.value?void 0:a.HTMLDOMElement.value}},d=null,a.selector&&null!==a.selector&&("object"==typeof a.selector&&(a.selector.constructor==Array||a.selector instanceof HTMLElement)?d=a.selector:("string"==typeof a.selector||"number"==typeof a.selector)&&(e=document.querySelectorAll(a.selector),e.length&&e[0]&&(d=e[0]))),d||(d=[]),f=c.compilerRenderDefaultSetting(),f.abstractSyntaxTrees=a.compiler.abstractSyntaxTree;for(g in a.compiler.abstractSyntaxTree)f.abstractSyntaxTreeIndex=g,c.compilerRenderNode(d,a.compiler.abstractSyntaxTree[g],b,f);return d},c.compilerRenderDefaultSetting=function(){return{statistics:{},parentAbstractSyntaxTrees:void 0,parentAbstractSyntaxTreeIndex:0,abstractSyntaxTrees:void 0,abstractSyntaxTreeIndex:0,compilers:void 0,compilerIndex:void 0}},c.compilerRenderNode=function(a,b,d,e){if(!b||b.commandError)return!1;if(b.templateError=!1,d.abstractSyntaxTree=b,!c.compilerRenderCommandIf(b,d,e))return!1;if(b.command&&b.command["template"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandTemplate(b,d)}if(b.command&&b.command["for"])return c.compilerRenderIsError(b)?null:c.compilerRenderCommandFor(a,b,d,e);if(b.command&&b.command["is"]){if(c.compilerRenderIsError(b))return null;if(!c.compilerRenderCommandIs(b,d))return!1}if(b.command["print"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandPrint(b,d)}if(c.compilerRenderIsVoid(b))return c.compilerRenderIsError(b)?null:c.compilerRenderCommandVoid(a,b,d,e);if(!b.HTMLDOMElement&&!b.nodeVoid){if(c.compilerRenderIsError(b))return null;c.compilerRenderCreateHTMLDOMElement(b)}if(b.HTMLDOMElement&&b.command){if(b.command["attribute"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandAttribute(b,d)}if(b.command["class"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandClass(b,d)}if(b.command["style"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandStyle(b,d)}if(b.command["event"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandEvent(b,d)}}if(c.compilerRenderIsError(b))return null;if(c.compilerRenderChildAbstractSyntaxTree(b,d,e),b.HTMLDOMElement&&b.command&&b.command["helper"]){if(c.compilerRenderIsError(b))return null;c.compilerRenderCommandHelper(b,d)}return c.compilerRenderIsError(b)?null:(c.compilerRenderChildNode(a,b,e),null)},c.compilerRenderIsError=function(a){return a.templateError?(c.compilerRenderRemoveNode(a),!0):!1},c.compilerRenderIsVoid=function(a){return a.command&&a.command["void"]||"av-void"==a.name.toLowerCase()||a.nodeVoid?!0:!1},c.compilerRenderCommandIf=function(a,b,d){var e,f,g,h;if(a.templateError)return!1;if(e=d.abstractSyntaxTreeIndex,d.statistics[e]={nodeType:a.nodeType},a.command&&a.command["if"]){if(d.statistics[e]["if"]=a.command["if"].call(b),!d.statistics[e]["if"])return c.compilerRenderRemoveNode(a),!1}else if(a.command&&a.command["elseif"]){if(0==e)return c.compilerRenderRemoveNode(a),c.compilerTemplateError(a,"av-else-if/av-elseif","“else if”命令错误,必须是if接else if",!0),!1;for(f=parseInt(e)-1,g=!1,h=f;h>=0;h--)if("element"==d.statistics[h].nodeType){if(d.statistics[h]&&"undefined"!=typeof d.statistics[h]["if"]){d.statistics[h]["if"]&&(g=!0);break}if(!d.statistics[h]||"undefined"==typeof d.statistics[h]["elseif"])return c.compilerRenderRemoveNode(a),c.compilerTemplateError(a,"av-else-if/av-elseif","“else if”命令错误,必须是if接else if",!0),!1;d.statistics[h]["elseif"]&&(g=!0)}if(d.statistics[e]["elseif"]=g?!1:a.command["elseif"].call(b),!d.statistics[e]["elseif"])return c.compilerRenderRemoveNode(a),!1}else if(a.command&&a.command["else"]){if(0==e)return c.compilerRenderRemoveNode(a),c.compilerTemplateError(a,"av-else","“else”命令错误,必须是else、if命令接else",!0),!1;for(f=parseInt(e)-1,g=!1,h=f;h>=0;h--)if("element"==d.statistics[h].nodeType){if(d.statistics[h]&&"undefined"!=typeof d.statistics[h]["if"]){d.statistics[h]["if"]&&(g=!0);break}if(!d.statistics[h]||"undefined"==typeof d.statistics[h]["elseif"])return c.compilerRenderRemoveNode(a),c.compilerTemplateError(a,"av-else","“else”命令错误,必须是else、if命令接else",!0),!1;d.statistics[h]["elseif"]&&(g=!0)}if(d.statistics[e]["else"]=g?!1:!0,!d.statistics[e]["else"])return c.compilerRenderRemoveNode(a),!1}return!0},c.compilerRenderCommandTemplate=function(a,b){var e,f,g,h,d=a.command["template"].call(b);if(a.content!=d){if(a.content=d,c.compilerRenderRemoveNode(a),a.HTMLDOMElement&&a.HTMLDOMElement.childNodes)for(;a.HTMLDOMElement.childNodes.length;)a.HTMLDOMElement.removeChild(a.HTMLDOMElement.firstChild);if(a.command["for"]){a.childCompiler=new Array,e=a.before,f=a.attributeTemplate["av-template"],f=f.concat(a.attributeTemplate["av-for"]);for(g in f)e=e.replace(" "+f[g],"");a.childTemplate=e+a.content+a.after}else a.childAbstractSyntaxTree=new Array,h=c.compilerConstruct(a.content),a.childAbstractSyntaxTree=a.childAbstractSyntaxTree.concat(h.abstractSyntaxTree)}},c.compilerRenderCommandFor=function(a,b,d,e){var f,g,h,i,j,k,l,m;if("undefined"==typeof b.childCompiler)b.childCompiler=new Array;else for(f in b.childCompiler)b.childCompiler[f].renderState=!1;if("undefined"==typeof b.childTemplate){g=b.before,h=b.attributeTemplate["av-for"];for(i in h)g=g.replace(" "+h[i],"");b.childTemplate=g+b.content+b.after}j=c.compilerRenderDefaultSetting(),j.parentAbstractSyntaxTrees=e.parentAbstractSyntaxTrees,j.parentAbstractSyntaxTreeIndex=e.parentAbstractSyntaxTreeIndex,j.abstractSyntaxTrees=e.abstractSyntaxTrees,j.abstractSyntaxTreeIndex=e.abstractSyntaxTreeIndex,j.compilers=b.childCompiler,b.command["for"].call(d,function(d,e){"undefined"==typeof b.childCompiler[e]&&(b.childCompiler[e]=c.compilerConstruct(b.childTemplate)),b.childCompiler[e].renderState=!0,j.compilerIndex=e,c.compilerRenderNode(a,b.childCompiler[e].abstractSyntaxTree[0],d,j)});for(f in b.childCompiler)if(!b.childCompiler[f].renderState)if(k=b.childCompiler[f].abstractSyntaxTree[0],k.HTMLDOMElement&&k.HTMLDOMElement.parentNode)k.HTMLDOMElement.parentNode.removeChild(k.HTMLDOMElement);else if(k.childAbstractSyntaxTree.length>0){l=k.childAbstractSyntaxTree;for(m in l)l[m].HTMLDOMElement&&l[m].HTMLDOMElement.parentNode&&l[m].HTMLDOMElement.parentNode.removeChild(l[m].HTMLDOMElement)}return null},c.compilerRenderCommandIs=function(a,b){var d=a.command["is"].call(b);return d?!0:(c.compilerRenderRemoveNode(a),!1)},c.compilerRenderCommandVoid=function(a,b,d,e){var g,f=c.compilerRenderDefaultSetting();for(f.parentAbstractSyntaxTrees=e.abstractSyntaxTrees,f.parentAbstractSyntaxTreeIndex=e.abstractSyntaxTreeIndex,f.compilers=e.compilers,f.compilerIndex=e.compilerIndex,f.abstractSyntaxTrees=b.childAbstractSyntaxTree,g=0;g<b.childAbstractSyntaxTree.length;g++)f.abstractSyntaxTreeIndex=g,c.compilerRenderNode(a,b.childAbstractSyntaxTree[g],d,f);return null},c.compilerRenderCommandPrint=function(a,b){var e,f,g,d=a.command["print"].call(b);if("undefined"==typeof a.printContent||a.printContent!=d||b.refresh){if("object"==typeof a.printAbstractSyntaxTree){for(e in a.printAbstractSyntaxTree){c.compilerRenderRemoveNode(a.printAbstractSyntaxTree[e]);for(f in a.childAbstractSyntaxTree)if(a.childAbstractSyntaxTree[f]==a.printAbstractSyntaxTree[e]){a.childAbstractSyntaxTree.splice(f,1);break}}a.printAbstractSyntaxTree=new Array}g=c.compilerConstruct(d,!1),a.printAbstractSyntaxTree=g.abstractSyntaxTree,a.childAbstractSyntaxTree=a.childAbstractSyntaxTree.concat(g.abstractSyntaxTree),a.printContent=d}},c.compilerRenderCommandAttribute=function(a,b){var c,d,e;for(c in a.command["attribute"])d=a.command["attribute"][c].call(b),("undefined"==typeof a.attributes[c]||a.attributes[c]!=d||b.refresh)&&("input"==a.HTMLDOMElement.nodeName.toLowerCase()&&("checked"!=c.toLowerCase()||"checkbox"!=a.HTMLDOMElement.type&&"radio"!=a.HTMLDOMElement.type?"value"==c.toLowerCase()&&a.HTMLDOMElement.value!=d&&(a.HTMLDOMElement.value="string"!=typeof d&&"number"!=typeof d?"":d):a.HTMLDOMElement.checked=d?!0:!1),"value"==c.toLowerCase()&&"textarea"==a.HTMLDOMElement.nodeName.toLowerCase()&&(a.HTMLDOMElement.value="string"!=typeof d&&"number"!=typeof d?"":d),"selected"==c.toLowerCase()&&"option"==a.HTMLDOMElement.nodeName.toLowerCase()&&(a.HTMLDOMElement.selected=d?!0:!1),e=a.HTMLDOMElement.getAttribute(c),d===!1||""===d?null!==e&&a.HTMLDOMElement.removeAttribute(c):e!=d&&a.HTMLDOMElement.setAttribute(c,d),a.attributes[c]=d)},c.compilerRenderCommandClass=function(a,b){var d,e,f,c=a.command["class"].call(b);if(c&&"object"==typeof c)for(d in c)c[d]?(e=d.replace(/(^\s*)|(\s*$)/g,""),f=new RegExp("(\\s|^)"+e+"(\\s|$)"),a.HTMLDOMElement.className&&a.HTMLDOMElement.className.match(f)||(a.HTMLDOMElement.className?a.HTMLDOMElement.className+=" "+e:a.HTMLDOMElement.className=e)):(e=d.replace(/(^\s*)|(\s*$)/g,""),f=new RegExp("(\\s|^)"+e+"(\\s|$)","g"),a.HTMLDOMElement.className.match(f)&&(a.HTMLDOMElement.className=a.HTMLDOMElement.className.replace(f," ").replace(/(^\s*)|(\s*$)/g,"")));""==a.HTMLDOMElement.className&&a.HTMLDOMElement.removeAttribute("class")},c.compilerRenderCommandStyle=function(a,b){var d,e,f,c=a.command["style"].call(b);if(c&&"object"==typeof c)for(d in c)if(e=d.replace(/(^\s*)|(\s*$)/g,""),"object"==typeof c[d]){for(f in c[d])if(a.HTMLDOMElement.style[e]=c[d][f],a.HTMLDOMElement.style[e]==c[d][f])break}else a.HTMLDOMElement.style[e]=c[d];""==a.HTMLDOMElement.getAttribute("style")&&a.HTMLDOMElement.removeAttribute("style")},c.compilerRenderCommandHelper=function(a,b){var c,d,e,f,g,h,i;if(!a.command["helper"].length)return!1;c=new Array;for(d in a.command["helper"])if(e=a.command["helper"][d].body.call(b),"function"==typeof e){f=new Array;for(g in a.command["helper"][d].arguments)h="function"==typeof a.command["helper"][d].arguments[g]?a.command["helper"][d].arguments[g].call(b):b.compilerArguments(a,a.command["helper"][d].arguments[g]),f.push(h);c.push({body:e,arguments:f})}if(!c.length)return!1;for(i in c)c[i].body.apply(b.data,c[i].arguments)},c.compilerRenderCommandEvent=function(a,b){for(var c in a.command["event"])!function(c){var d,e,f,g,h,i;"undefined"!=typeof a.eventListener[c]&&(a.HTMLDOMElement.removeEventListener?a.HTMLDOMElement.removeEventListener(c,a.eventListener[c],!1):a.HTMLDOMElement.detachEvent?a.HTMLDOMElement.detachEvent("on"+c,a.eventListener[c]):a.HTMLDOMElement["on"+c]=null,delete a.eventListener[c]),d=new Array;for(e in a.command["event"][c])if(f=a.command["event"][c][e].body.call(b),"function"==typeof f){g=new Array;for(h in a.command["event"][c][e].arguments)i={isCompilerArguments:!1,value:void 0},"function"==typeof a.command["event"][c][e].arguments[h]?i.value=a.command["event"][c][e].arguments[h].call(b):(i.isCompilerArguments=!0,i.value=a.command["event"][c][e].arguments[h]),g.push(i);d.push({body:f,arguments:g})}return d.length?(a.eventListener[c]=function(c){var e,f,g,h;c=c||event||window.event;for(e in d){if(f=new Array,d[e].arguments.length)for(g=0;g<d[e].arguments.length;g++)d[e].arguments[g].isCompilerArguments?f.push(b.compilerArguments(a,d[e].arguments[g].value,c)):f.push(d[e].arguments[g].value);h=d[e].body.apply(b.data,f),h===!1&&(c.preventDefault?c.preventDefault():c.returnValue=!1),c.stopPropagation?c.stopPropagation():c.cancelBubble=!0}},a.HTMLDOMElement.addEventListener?(a.HTMLDOMElement.addEventListener(c,a.eventListener[c],!1),a.HTMLDOMElement.removeEventListener(c,a.eventListener[c],!0)):a.HTMLDOMElement.attachEvent?a.HTMLDOMElement.attachEvent("on"+c,a.eventListener[c]):a.HTMLDOMElement["on"+c]=a.eventListener[c],void 0):!1}(c)},c.compilerRenderChildAbstractSyntaxTree=function(a,b,d){var e,f,g,h;if(a.HTMLDOMElement&&"textarea"==a.HTMLDOMElement.nodeName.toLowerCase()&&a.childAbstractSyntaxTree&&a.childAbstractSyntaxTree.length){for(e=c.compilerRenderDefaultSetting(),e.abstractSyntaxTrees=a.childAbstractSyntaxTree,f=document.createElement("div"),g=0;g<a.childAbstractSyntaxTree.length;g++)a.childAbstractSyntaxTree[g].printContent=void 0,e.abstractSyntaxTreeIndex=g,c.compilerRenderNode(f,a.childAbstractSyntaxTree[g],b,e);h=f.textContent?f.textContent:f.innerText?f.innerText:"",(a.textareaContent!=h||b.refresh)&&(a.HTMLDOMElement.value=h,a.textareaContent=h)}else if(a.HTMLDOMElement&&a.childAbstractSyntaxTree&&a.childAbstractSyntaxTree.length)for(e=c.compilerRenderDefaultSetting(),e.parentAbstractSyntaxTrees=d.abstractSyntaxTrees,e.parentAbstractSyntaxTreeIndex=d.abstractSyntaxTreeIndex,e.abstractSyntaxTrees=a.childAbstractSyntaxTree,g=0;g<a.childAbstractSyntaxTree.length;g++)e.abstractSyntaxTreeIndex=g,c.compilerRenderNode(a.HTMLDOMElement,a.childAbstractSyntaxTree[g],b,e)},c.compilerRenderChildNode=function(a,b,d){var e,f,g;if(!a||!b||!b.HTMLDOMElement)return!1;if(a.constructor==Array){if(!a.length)return a.push(b.HTMLDOMElement),!0;for(e=0;e<a.length;e++)if(a[e]===b.HTMLDOMElement)return!0;return f=c.compilerRenderBrotherIndex(a,d),"undefined"==typeof f?a.push(b.HTMLDOMElement):a.splice(f,0,b.HTMLDOMElement),!0}if(a instanceof HTMLElement&&b.HTMLDOMElement.parentNode!=a){g=c.compilerRenderBrotherAbstractSyntaxTree(a,d);try{g?a.insertBefore(b.HTMLDOMElement,g.HTMLDOMElement):a.appendChild(b.HTMLDOMElement)}catch(h){console.error(h)}return!0}},c.compilerRenderBrotherIndex=function(a,b){var e,f,g,h,d=void 0;if("undefined"!=typeof b.compilers)for(e=parseInt(b.compilerIndex)+1;e<b.compilers.length;e++)if(b.compilers[e].abstractSyntaxTree[0].HTMLDOMElement){for(f=0;f<a.length;f++)if(a[f]===b.compilers[e].abstractSyntaxTree[0].HTMLDOMElement)return d=f}else if(c.compilerRenderIsVoid(b.compilers[e].abstractSyntaxTree[0])&&b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree&&b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree.length)for(g=b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree,h=0;h<g.length;h++)if(g[h].HTMLDOMElement)for(f=0;f<a.length;f++)if(a[f]===g[h].HTMLDOMElement)return d=f;if("undefined"!=typeof b.abstractSyntaxTrees)for(e=parseInt(b.abstractSyntaxTreeIndex)+1;e<b.abstractSyntaxTrees.length;e++)if(b.abstractSyntaxTrees[e].HTMLDOMElement){for(f=0;f<a.length;f++)if(a[f]===b.abstractSyntaxTrees[e].HTMLDOMElement)return d=f}else if(c.compilerRenderIsVoid(b.abstractSyntaxTrees[e])&&b.abstractSyntaxTrees[e].childAbstractSyntaxTree&&b.abstractSyntaxTrees[e].childAbstractSyntaxTree.length)for(g=b.abstractSyntaxTrees[e].childAbstractSyntaxTree,h=0;h<g.length;h++)if(g[h].HTMLDOMElement)for(f=0;f<a.length;f++)if(a[f]===g[h].HTMLDOMElement)return d=f;if("undefined"!=typeof b.parentAbstractSyntaxTrees)for(e=parseInt(b.parentAbstractSyntaxTreeIndex)+1;e<b.parentAbstractSyntaxTrees.length;e++)if(b.parentAbstractSyntaxTrees[e].HTMLDOMElement){for(f=0;f<a.length;f++)if(a[f]===b.parentAbstractSyntaxTrees[e].HTMLDOMElement)return d=f}else if(c.compilerRenderIsVoid(b.parentAbstractSyntaxTrees[e])&&b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree&&b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree.length)for(g=b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree,h=0;h<g.length;h++)if(g[h].HTMLDOMElement)for(f=0;f<a.length;f++)if(a[f]===g[h].HTMLDOMElement)return d=f;return d},c.compilerRenderBrotherAbstractSyntaxTree=function(a,b){var e,f,g,d=null;if("undefined"!=typeof b.compilers)for(e=parseInt(b.compilerIndex)+1;e<b.compilers.length;e++){if(b.compilers[e].abstractSyntaxTree[0].HTMLDOMElement&&b.compilers[e].abstractSyntaxTree[0].HTMLDOMElement.parentNode==a)return d=b.compilers[e].abstractSyntaxTree[0];if(c.compilerRenderIsVoid(b.compilers[e].abstractSyntaxTree[0])&&b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree&&b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree.length)for(f=b.compilers[e].abstractSyntaxTree[0].childAbstractSyntaxTree,g=0;g<f.length;g++)if(f[g].HTMLDOMElement&&f[g].HTMLDOMElement.parentNode==a)return d=f[g]}if("undefined"!=typeof b.abstractSyntaxTrees)for(e=parseInt(b.abstractSyntaxTreeIndex)+1;e<b.abstractSyntaxTrees.length;e++){if(b.abstractSyntaxTrees[e].HTMLDOMElement&&b.abstractSyntaxTrees[e].HTMLDOMElement.parentNode==a)return d=b.abstractSyntaxTrees[e];if(c.compilerRenderIsVoid(b.abstractSyntaxTrees[e])&&b.abstractSyntaxTrees[e].childAbstractSyntaxTree&&b.abstractSyntaxTrees[e].childAbstractSyntaxTree.length)for(f=b.abstractSyntaxTrees[e].childAbstractSyntaxTree,g=0;g<f.length;g++)if(f[g].HTMLDOMElement&&f[g].HTMLDOMElement.parentNode==a)return d=f[g]}if("undefined"!=typeof b.parentAbstractSyntaxTrees)for(e=parseInt(b.parentAbstractSyntaxTreeIndex)+1;e<b.parentAbstractSyntaxTrees.length;e++){if(b.parentAbstractSyntaxTrees[e].HTMLDOMElement&&b.parentAbstractSyntaxTrees[e].HTMLDOMElement.parentNode==a)return d=b.parentAbstractSyntaxTrees[e];if(c.compilerRenderIsVoid(b.parentAbstractSyntaxTrees[e])&&b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree&&b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree.length)for(f=b.parentAbstractSyntaxTrees[e].childAbstractSyntaxTree,g=0;g<f.length;g++)if(f[g].HTMLDOMElement&&f[g].HTMLDOMElement.parentNode==a)return d=f[g]}return d},c.compilerRenderRemoveNode=function(a){var b,d;if(a.childCompiler&&a.childCompiler.length)for(b in a.childCompiler)a.childCompiler[b].abstractSyntaxTree[0].HTMLDOMElement&&a.childCompiler[b].abstractSyntaxTree[0].HTMLDOMElement.parentNode&&a.childCompiler[b].abstractSyntaxTree[0].HTMLDOMElement.parentNode.removeChild(a.childCompiler[b].abstractSyntaxTree[0].HTMLDOMElement);else a.HTMLDOMElement&&a.HTMLDOMElement.parentNode&&a.HTMLDOMElement.parentNode.removeChild(a.HTMLDOMElement);if(c.compilerRenderIsVoid(a)&&a.childAbstractSyntaxTree&&a.childAbstractSyntaxTree.length){d=a.childAbstractSyntaxTree;for(b in d)d[b].HTMLDOMElement&&d[b].HTMLDOMElement.parentNode&&d[b].HTMLDOMElement.parentNode.removeChild(d[b].HTMLDOMElement)}},c.compilerRenderCreateHTMLDOMElement=function(a){if("comment"==a.nodeType)a.HTMLDOMElement=document.createComment(a.content);else if("text"==a.nodeType)a.HTMLDOMElement=document.createTextNode(k.decodeHTML(a.text));else{if("element"!=a.nodeType)return!1;a.HTMLDOMElement=document.createElement(a.name);for(var b in a.attributes)a.HTMLDOMElement.setAttribute(b,a.attributes[b])}return!0},c.compilerMatch=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(a.beforeFirstIndex=b.indexOf("<",c),a.beforeFirstIndex<0)return a.error=!0,a;if("<!--"==b.substr(a.beforeFirstIndex,4))return a.beforeLastIndex=a.beforeFirstIndex+String("<!--").length,a.isComment=!0,a.afterFirstIndex=b.indexOf("-->",a.beforeFirstIndex),a.afterFirstIndex<0?(a.error=!0,a):(a.afterLastIndex=a.afterFirstIndex+String("-->").length,a.comment=b.substr(a.beforeFirstIndex,a.afterLastIndex-a.beforeFirstIndex),a.content=b.substr(a.beforeLastIndex,a.afterFirstIndex-a.beforeLastIndex),a);for(d=a.beforeFirstIndex;;){if(e=b.indexOf(">",d),0>e)break;if(f=b.substr(a.beforeFirstIndex,e-a.beforeFirstIndex),f=f.replace(/\\\'/g,"").replace(/\\\"/g,""),g=f.match(/\'/g),h=f.match(/\"/g),!(g&&0!=g.length%2||h&&0!=h.length%2)){if(i=b.indexOf("<",d+String("<").length),i>=0&&e>i&&(j=b.substr(a.beforeFirstIndex,i-a.beforeFirstIndex),k=j.match(/\'/g),l=j.match(/\"/g),!k&&!l)){a.beforeFirstIndex=i-String("<").length;break}a.beforeLastIndex=e+String(">").length;break}d=e+String(">").length}if(a.beforeLastIndex<0)return a.error=!0,a;if(a.before=b.substr(a.beforeFirstIndex,a.beforeLastIndex-a.beforeFirstIndex),a.before.match(/\/\s{0,}\>$/)&&(a.isSingle=!0,a.single=a.before),m=/^\<\s{0,}([^\<\>\s\/]+)/.exec(a.before),m&&(a.name=m[1]),""==a.name||!/^[\w\d\-\_]+$/.test(a.name))return a.name="",a.error=!0,a;if(a.isSingle)return a;for(n="</"+a.name,o=new RegExp("(\\<"+a.name+"\\s{1,}|\\<"+a.name+"\\s{0,}\\>)","g"),p=new RegExp("<\\/"+a.name+"\\s{0,}\\>","g"),d=a.beforeLastIndex;;){if(e=b.indexOf(n,d),0>e)break;if(d=e+n.length,q=b.indexOf(">",e),!(0>q)&&(r=b.substr(e,q-e+String(">").length),r=r.replace(/\s+/g,""),n+String(">")===r&&(f=b.substr(a.beforeLastIndex,e-a.beforeLastIndex),s=f.match(p),t=f.match(o),!s&&!t||s&&t&&s.length==t.length))){a.afterFirstIndex=e,a.afterLastIndex=q+String(">").length;break}}return a.afterFirstIndex<0?(a.error=!0,a):(a.after=b.substr(a.afterFirstIndex,a.afterLastIndex-a.afterFirstIndex),a.content=b.substr(a.beforeLastIndex,a.afterFirstIndex-a.beforeLastIndex),a)},c.compilerAlgorithm=function(a,b,d){var e,f;for(d=d?d:0,e=[];;){if("number"==typeof b&&(b=String(b)),"string"!=typeof b||""==b)break;if(f=c.compilerDefaultAbstractSyntaxTree(),c.compilerMatch(f,b,0),f.templateIndex=d,f.compiler=a,e=f.error?c.compilerAlgorithmMatchErrorTrue(e,b,f):c.compilerAlgorithmMatchErrorFalse(e,b,f),(f.isSingle||f.error&&f.beforeLastIndex>=0)&&f.beforeLastIndex>=0&&f.beforeLastIndex<b.length)b=b.substr(f.beforeLastIndex),d=f.beforeLastIndex+f.templateIndex;else if(f.afterLastIndex>=0&&f.afterLastIndex<b.length)b=b.substr(f.afterLastIndex),d=f.afterLastIndex+f.templateIndex;else{if(!(f.beforeFirstIndex>=0&&f.beforeLastIndex<0&&f.beforeFirstIndex+String("<").length<b.length))break;b=b.substr(f.beforeFirstIndex+String("<").length),d=f.beforeFirstIndex+String("<").length+f.templateIndex}}return e},c.compilerAlgorithmMatchErrorFalse=function(a,b,d){var f,g,h,e=b.substr(0,d.beforeFirstIndex);return""!=e.replace(/\s+/g,"")&&(f=c.compilerDefaultAbstractSyntaxTree(),f.templateIndex=d.templateIndex,f.compiler=d.compiler,a=a.concat(c.compilerAlgorithmCreateTextNode(f,e))),d.isComment?a.push(c.compilerAlgorithmCreateComment(d)):d.isSingle?a.push(c.compilerAlgorithmCreateElement(d)):(g=c.compilerAlgorithmCreateElement(d),g&&g.command&&(g.command["for"]||g.command["template"])||(h=c.compilerAlgorithm(d.compiler,d.content,d.beforeLastIndex+d.templateIndex),g.childAbstractSyntaxTree=g.childAbstractSyntaxTree.concat(h)),a.push(g)),a},c.compilerAlgorithmMatchErrorTrue=function(a,b,d){var e;return d.beforeFirstIndex<0?""!=b.replace(/\s+/g,"")&&(a=a.concat(c.compilerAlgorithmCreateTextNode(d,b))):d.beforeFirstIndex>=0&&d.beforeLastIndex<0?(e=b.substr(0,d.beforeFirstIndex+String("<").length),""!=e.replace(/\s+/g,"")&&(a=a.concat(c.compilerAlgorithmCreateTextNode(d,e)))):d.beforeLastIndex>=0&&""==d.name?(e=b.substr(0,d.beforeLastIndex),""!=e.replace(/\s+/g,"")&&(a=a.concat(c.compilerAlgorithmCreateTextNode(d,e)))):d.beforeLastIndex>=0&&""!=d.name&&(e=b.substr(0,d.beforeFirstIndex),""!=e.replace(/\s+/g,"")&&(a=a.concat(c.compilerAlgorithmCreateTextNode(d,e))),a.push(c.compilerAlgorithmCreateElement(d))),a},c.compilerAlgorithmCreateComment=function(a){return a.nodeType="comment",a},c.compilerAlgorithmCreateTextNode=function(a,b){for(var g,h,i,j,d=new Array,e=/(\{\s{0,}\{[^\}\{]+\}\s{0,}\}|\{\s{0,}html\s{0,}\{[^\}\{]+\}\s{0,}\})/i,f=b;!a.templateError&&(g=e.exec(f))&&(g.index>0&&(h=c.compilerDefaultAbstractSyntaxTree(),h.templateIndex=a.templateIndex,h.compiler=a.compiler,h.isText=!0,h.text=f.substr(0,g.index),h.textLength=b.length,h.nodeType="text",d.push(h)),h=c.compilerDefaultAbstractSyntaxTree(),h.templateIndex=a.templateIndex,h.compiler=a.compiler,h.isText=!0,h.text=g[1],h.textLength=b.length,h.nodeType="text",c.compilerAlgorithmCreateCommand(h,"{{}}",g[1],g[1]),d.push(h),i=g.index+g[0].length,j=g.input.length-i,f=f.substr(i,j),f&&!(f.length<=4)););return""!=f&&(h=c.compilerDefaultAbstractSyntaxTree(),h.templateIndex=a.templateIndex,h.compiler=a.compiler,h.isText=!0,h.text=f,h.textLength=b.length,h.nodeType="text",d.push(h)),d.length||(a.isText=!0,a.text=b,a.textLength=b.length,a.nodeType="text",d.push(a)),d
},c.compilerAlgorithmCreateElement=function(a){var b,d,e,f,g,h,i,j,k,l,m,n;if(a.nodeType="element",!a.before)return a;for(b="_CREATE_ELEMENT_DOUBLE_QUOTES_",d="_CREATE_ELEMENT_SINGLE_QUOTES_",e=/\s([^\s\=\'\"\<\>\\\/]+)\s?\=\s?(\"[^\"]{0,}\"|\'[^\']{0,}\')/,f=/\s([^\s\=\'\"\<\>\\\/]+)\s?/,g=a.before,g=g.replace(/\\\"/g,b),g=g.replace(/\\\'/g,d),h=new RegExp(b,"g"),i=new RegExp(d,"g");!a.templateError&&(j=e.exec(g),k=f.exec(g),l=void 0,j&&k?l=j.index<=k.index?j:k:j?l=j:k&&(l=k),l)&&(l[2]?(l[2]=0===l[2].search(/\"/)?l[2].replace(/(^\"|\"$)/g,""):l[2].replace(/(^\'|\'$)/g,""),l[2]=l[2].replace(h,'"'),l[2]=l[2].replace(i,"\\'")):l[2]="",c.compilerAlgorithmCreateCommand(a,l[1],l[2],l[0]),substrBeforeStart=g.substr(0,l.index),m=l.index+l[0].length,n=l.input.length-m,substrBeforeEnd=g.substr(m,n),g=substrBeforeStart+" "+substrBeforeEnd,substrBeforeEnd&&">"!=substrBeforeEnd&&" >"!=substrBeforeEnd&&"/>"!=substrBeforeEnd&&" />"!=substrBeforeEnd););return a},c.compilerAlgorithmCreateCommand=function(a,b,d,e){if(a.templateError)return!1;var f=b.toLowerCase();if(e=e.replace(/(^\s+)|(\s+$)/g,""),"undefined"==typeof a.attributeTemplate[f]&&(a.attributeTemplate[f]=new Array),a.attributeTemplate[f].push(e),a.compiler.commandState){if("av-if"==f||"av-elseif"==f||"av-else-if"==f||"av-else"==f)return c.compilerAlgorithmCommandIf(a,b,d,e,f);if("{{}}"==f)return c.compilerAlgorithmCommandPrint(a,b,d,e,f);if("av-text"==f)return c.compilerAlgorithmCommandPrintText(a,b,d,e,f);if("av-html"==f)return c.compilerAlgorithmCommandPrintHtml(a,b,d,e,f);if("av-for"==f)return c.compilerAlgorithmCommandFor(a,b,d,e,f);if("av-is"==f)return c.compilerAlgorithmCommandIs(a,b,d,e,f);if("av-helper"==f)return c.compilerAlgorithmCommandHelper(a,b,d,e,f);if("av-attr"==f||"av-attribute"==f)return c.compilerAlgorithmCommandAttribute(a,b,d,e,f);if("av-event"==f)return c.compilerAlgorithmCommandEvent(a,b,d,e,f);if("av-class"==f)return c.compilerAlgorithmCommandClass(a,b,d,e,f);if("av-style"==f)return c.compilerAlgorithmCommandStyle(a,b,d,e,f);if("av-template"==f)return c.compilerAlgorithmCommandTemplate(a,b,d,e,f);if("av-void"==f)return c.compilerAlgorithmCommandVoid(a,b,d,e,f)}return a.attributes[b]=d,!0},c.compilerAlgorithmCreateFunction=function(a,b,d,e){return function(){try{return new Function("callback",d)}catch(f){return"warning"==e?c.compilerTemplateWarning(a,b,f+"\n"):c.compilerTemplateError(a,b,f+"\n",!0),!1}}()},c.compilerAlgorithmCommandIf=function(a,b,d,e,f){var g,h,i;return e=k.encodeHTML(e),"undefined"!=typeof a.command["if"]||"undefined"!=typeof a.command["elseif"]||"undefined"!=typeof a.command["else"]?c.compilerTemplateWarning(a,e,"if、else if、else 命令不能在同一个标签中同时存在或存在多个"):"av-else"==f?(a.command["else"]=!0,!0):"av-if"==f&&""==d.replace(/\s/g,"")?c.compilerTemplateError(a,e,"if 命令不能为空",!0):"av-elseif"!=f&&"av-else-if"!=f||""!=d.replace(/\s/g,"")?(g="__THIS_DATE"+(new Date).valueOf()+"__",h="var "+g+"=this;\n",h+="with(this.data){\n",h+="	 return (Boolean(function(){try{return "+d+";}catch(e){"+g+".templateError("+g+'.abstractSyntaxTree,"'+e+'",e);return false;}}()));\n',h+="}",i=c.compilerAlgorithmCreateFunction(a,e,h),"function"!=typeof i?!1:("av-if"==f?(a.command["if"]=i,a.commandTemplate["if"]=k.decodeHTML(e)):(a.command["elseif"]=i,a.commandTemplate["elseif"]=k.decodeHTML(e)),void 0)):c.compilerTemplateError(a,e,"else if命令不能为空",!0)},c.compilerAlgorithmCommandPrint=function(a,b,d,e){var g,h,i,j,l;return e=k.encodeHTML(e),d=d.replace(/(^\s+|\s+$)/g,""),g=/\{\s{0,}([^\{\}]+)?\{([^\{\}]+)\}\s{0,}\}/,(h=g.exec(d))?(h[1]&&(h[1]=h[1].replace(/(^\s+|\s+$)/g,"").toLowerCase()),h[2]=h[2].replace(/(^\s+|\s+$)/g,""),i="__THIS_DATE"+(new Date).valueOf()+"__",j="var "+i+"=this;\n",j+="with(this.data){\n",j+="	 try{\n",j+="html"==h[1]?"		 return "+i+".print("+h[2]+");\n":"		 return "+i+".print("+i+".encodeHTML("+h[2]+"));\n",j+="	 }catch(e){\n",j+="		 "+i+".templateError("+i+'.abstractSyntaxTree,"'+e+'",e); \n',j+="	 }\n",j+="}",l=c.compilerAlgorithmCreateFunction(a,e,j),"function"!=typeof l?!1:(a.nodeVoid=!0,a.command["print"]=l,a.commandTemplate["print"]=k.decodeHTML(e),void 0)):c.compilerTemplateError(a,e,"{{ }}声明错误。示例：{{var}}、{html{var}}",!0)},c.compilerAlgorithmCommandPrintHtml=function(a,b,d,e){var g,h,i;return e=k.encodeHTML(e),"undefined"!=typeof a.command["print"]?c.compilerTemplateWarning(a,e,"av-html、av-text 命令不能在同一个标签中同时存在或存在多个"):(g="__THIS_DATE"+(new Date).valueOf()+"__",h="var "+g+"=this;\n",h+="with(this.data){\n",h+="	 return (function(){\n",h+="		 try{\n",h+="		 return "+g+".print("+d+");\n",h+="		 }catch(e){\n",h+="		 "+g+".templateError("+g+'.abstractSyntaxTree,"'+e+'",e);return ""; \n',h+="		 }\n",h+="	 }());\n",h+="}",i=c.compilerAlgorithmCreateFunction(a,e,h),"function"!=typeof i?!1:(a.command["print"]=i,a.commandTemplate["print"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandPrintText=function(a,b,d,e){var g,h,i;return e=k.encodeHTML(e),"undefined"!=typeof a.command["print"]?c.compilerTemplateWarning(a,e,"av-html、av-text 命令不能在同一个标签中同时存在或存在多个"):(g="__THIS_DATE"+(new Date).valueOf()+"__",h="var "+g+"=this;\n",h+="with(this.data){\n",h+="	 return (function(){\n",h+="		 try{\n",h+="		 return "+g+".print("+g+".encodeHTML("+d+"));\n",h+="		 }catch(e){\n",h+="		 "+g+".templateError("+g+'.abstractSyntaxTree,"'+e+'",e);return ""; \n',h+="		 }\n",h+="	 }());\n",h+="}",i=c.compilerAlgorithmCreateFunction(a,e,h),"function"!=typeof i?!1:(a.command["print"]=i,a.commandTemplate["print"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandFor=function(a,b,d,e){var g,h,i,j,l,m,n,o,p,q,r,s,t,u,v;return e=k.encodeHTML(e),"undefined"!=typeof a.command["for"]?c.compilerTemplateWarning(a,e,"for 命令不能在同一个标签中存在多个"):""==d.replace(/\s/g,"")?c.compilerTemplateError(a,e,"for 命令不能为空",!0):(g=void 0,h=void 0,i=void 0,j=!1,l="",m=/\s{0,}\(([^\(\)\,]+)\,([^\(\)\,]+)\)\s{0,}([^\(\)\s]+)\s{0,}(\([^\(\)]{0,}\))?\s{0,}/,n=m.exec(d),n?(h=n[1].replace(/(^\s+|\s+$)/g,""),g=n[2].replace(/(^\s+|\s+$)/g,""),i=n[3].replace(/(^\s+|\s+$)/g,""),n[4]&&(j=!0,l=n[4])):(m=/\s{0,}\(([^\(\)\,]+)\)\s{0,}([^\(\)\s]+)\s{0,}(\([^\(\)]{0,}\))?\s{0,}/,n=m.exec(d),n&&(h=n[1].replace(/(^\s+|\s+$)/g,""),i=n[2].replace(/(^\s+|\s+$)/g,""),n[3]&&(j=!0,l=n[3]))),i&&h?(j&&(i+=l),o=(new Date).valueOf(),p="__THIS_DATE"+o+"__",q="__CALLBACK_DATE"+o+"__",r="__FOR_OBJECT_DATE"+o+"__",s="__FOR_INDEX_DATE"+o+"__",t="__FOR_NUMBER_DATE"+o+"__",u="var "+p+"=this;\n",u+="var "+q+"=callback;\n",u+="with(this.data){\n",u+="	 return (function(){\n",u+="		 try{\n",u+="		 var "+r+"="+i+";",u+="		 if("+r+" && "+r+".constructor == Array){\n",u+="		 for(var "+s+" = 0; "+s+" < "+r+".length; "+s+"++){\n","undefined"!=typeof g&&(u+="			 if(typeof "+p+".data."+g+" != 'undefined' ) delete "+p+".data."+g+";\n",u+="			 "+p+".data."+g+"="+s+"; \n"),u+="			 if(typeof "+p+".data."+h+" != 'undefined' ) delete "+p+".data."+h+";\n",u+="			 "+p+".data."+h+"="+r+"["+s+"]; \n",u+="			 "+q+"("+p+","+s+","+r+"); \n",u+="			 }\n",u+="		 }else{\n",u+="		 var "+t+" = 0;\n",u+="		 for(var "+s+" in "+r+"){\n","undefined"!=typeof g&&(u+="			 if(typeof "+p+".data."+g+" != 'undefined' ) delete "+p+".data."+g+";\n",u+="			 "+p+".data."+g+"="+s+"; \n"),u+="			 if(typeof "+p+".data."+h+" != 'undefined' ) delete "+p+".data."+h+";\n",u+="			 "+p+".data."+h+"="+r+"["+s+"]; \n",u+="			 "+q+"("+p+","+t+","+r+"); \n",u+="			 "+t+"++;\n",u+="			 }\n",u+="		 }\n",u+="		 }catch(e){\n",u+="		 "+p+".templateError("+p+'.abstractSyntaxTree,"'+e+'",e);return ""; \n',u+="		 }\n",u+="	 }());\n",u+="}",v=c.compilerAlgorithmCreateFunction(a,e,u),"function"!=typeof v?!1:(a.command["for"]=v,a.commandTemplate["for"]=k.decodeHTML(e),void 0)):c.compilerTemplateError(a,e,'for 命令错误。示例：av-for="(value,index) Object"、av-for="(value) Object"、av-for="(value,index) Object()"、av-for="(value) Object()"',!0))},c.compilerAlgorithmCommandIs=function(a,b,d,e,f){var g,h,i;return e=k.encodeHTML(e),"undefined"!=typeof a.command["is"]?c.compilerTemplateWarning(a,e,"is 命令不能在同一个标签中同时存在或存在多个"):"av-is"==f&&""==d.replace(/\s/g,"")?c.compilerTemplateError(a,e,"is 命令不能为空",!0):(g="__THIS_DATE"+(new Date).valueOf()+"__",h="var "+g+"=this;\n",h+="with(this.data){\n",h+="	 return (Boolean(function(){try{return "+d+";}catch(e){"+g+".templateError("+g+'.abstractSyntaxTree,"'+e+'",e);return false;}}()));\n',h+="}",i=c.compilerAlgorithmCreateFunction(a,e,h),"function"!=typeof i?!1:(a.command["is"]=i,a.commandTemplate["is"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandHelper=function(a,b,d,e){var g,h,i,j,l,m,n,o;if(e=k.encodeHTML(e),g=d.replace(/(^\s+)|(\s+$)/g,""),""==g)return c.compilerTemplateWarning(a,e,"method 命令不能为空");if(h={name:"",arguments:void 0,body:null},i=/^([^\(\)\s]+)\s{0,}\(([^\(\)]+)?\)$|([^\(\)\s]+)/i,j=i.exec(g),"undefined"!=typeof j[1]?(h.name=j[1],"undefined"!=typeof j[2]&&(h.arguments=j[2].split(/\s{0,},\s{0,}/))):"undefined"!=typeof j[3]&&(h.name=j[3]),""==h.name)return c.compilerTemplateWarning(a,e,"method 命令缺少方法执行函数");if(l=(new Date).valueOf(),m="__THIS_DATE"+l+"__",n="var "+m+"=this;\n",n+="with(this.data){\n",n+="	 return (function(){\n",n+="		 try{\n",n+="		 if(typeof "+h.name+" == 'function'){\n",n+="			 return "+h.name+";\n",n+="		 }else{\n",n+="			 throw '"+h.name+" 不是函数';\n",n+="		 }\n",n+="		 }catch(e){\n",n+="		 "+m+".templateWarning("+m+'.abstractSyntaxTree,"'+e+'",e);return false; \n',n+="		 }\n",n+="	 }());\n",n+="}",h.body=c.compilerAlgorithmCreateFunction(a,e,n,"warning"),"function"!=typeof h.body)return!1;if("object"==typeof h.arguments&&h.arguments.constructor==Array)for(o=0;o<h.arguments.length;o++)if(("string"!=typeof h.arguments[o]||0!=h.arguments[o].indexOf(":",0))&&(n="var "+m+"=this;\n",n+="with(this.data){\n",n+="	 return (function(){\n",n+="		 try{\n",n+="		 return "+h.arguments[o]+";\n",n+="		 }catch(e){\n",n+="		 "+m+".templateError("+m+'.abstractSyntaxTree,"'+e+'",e);return undefined; \n',n+="		 }\n",n+="	 }());\n",n+="}",h.arguments[o]=c.compilerAlgorithmCreateFunction(a,e,n,"warning"),"function"!=typeof h.arguments[o]))return!1;"undefined"==typeof a.command["helper"]&&(a.command["helper"]=new Array),a.command["helper"].push(h),"undefined"==typeof a.commandTemplate["helper"]&&(a.commandTemplate["helper"]=new Array),a.commandTemplate["helper"].push(k.decodeHTML(e))},c.compilerAlgorithmCommandEvent=function(a,b,d,e){var g,h,i,j,l,m,n,o,p,q,r,s;if(e=k.encodeHTML(e),g=d.replace(/^\s+/g,""),""==g)return c.compilerTemplateWarning(a,e,"event 命令不能为空");if(h=/^\[([^\[\]]+)\]\s{0,}(.*)?/i,i=h.exec(g),!i)return c.compilerTemplateWarning(a,e,"event 命令不合法");if(i[1]=i[1].replace(/(^\s+)|(\s+$)/g,""),""==i[1])return c.compilerTemplateWarning(a,e,"event 命令缺少事件名称");if(j=i[1].split(/\s+/),"string"==typeof i[2]&&(i[2]=i[2].replace(/(^\s+)|(\s+$)/g,"")),l={name:"",arguments:void 0,body:null},"undefined"!=typeof i[2]&&""!=i[2]&&(m=/^([^\(\)\s]+)\s{0,}\(([^\(\)]+)?\)$|([^\(\)\s]+)/i,n=m.exec(i[2]),"undefined"!=typeof n[1]?(l.name=n[1],"undefined"!=typeof n[2]&&(l.arguments=n[2].split(/\s{0,},\s{0,}/))):"undefined"!=typeof n[3]&&(l.name=n[3])),""==l.name)return c.compilerTemplateWarning(a,e,"event 命令缺少事件执行函数");if(o=(new Date).valueOf(),p="__THIS_DATE"+o+"__",q="var "+p+"=this;\n",q+="with(this.data){\n",q+="	 return (function(){\n",q+="		 try{\n",q+="		 if(typeof "+l.name+" == 'function'){\n",q+="			 return "+l.name+";\n",q+="		 }else{\n",q+="			 throw '"+l.name+" 不是函数';\n",q+="		 }\n",q+="		 }catch(e){\n",q+="		 "+p+".templateWarning("+p+'.abstractSyntaxTree,"'+e+'",e);return false; \n',q+="		 }\n",q+="	 }());\n",q+="}",l.body=c.compilerAlgorithmCreateFunction(a,e,q,"warning"),"function"!=typeof l.body)return!1;if("object"==typeof l.arguments&&l.arguments.constructor==Array)for(r=0;r<l.arguments.length;r++)if(("string"!=typeof l.arguments[r]||0!=l.arguments[r].indexOf(":",0))&&(q="var "+p+"=this;\n",q+="with(this.data){\n",q+="	 return (function(){\n",q+="		 try{\n",q+="		 return "+l.arguments[r]+";\n",q+="		 }catch(e){\n",q+="		 "+p+".templateError("+p+'.abstractSyntaxTree,"'+e+'",e);return undefined; \n',q+="		 }\n",q+="	 }());\n",q+="}",l.arguments[r]=c.compilerAlgorithmCreateFunction(a,e,q,"warning"),"function"!=typeof l.arguments[r]))return!1;"undefined"==typeof a.command["event"]&&(a.command["event"]=new Object),"undefined"==typeof a.commandTemplate["event"]&&(a.commandTemplate["event"]=new Array),a.commandTemplate["event"].push(k.decodeHTML(e));for(s in j)"undefined"==typeof a.command["event"][j[s]]&&(a.command["event"][j[s]]=new Array),a.command["event"][j[s]].push(l)},c.compilerAlgorithmCommandAttribute=function(a,b,d,e){var g,h,i,j,l,m,n,o;if(e=k.encodeHTML(e),g=d.replace(/^\s+/g,""),""==g)return c.compilerTemplateWarning(a,e,"attribute 命令不能为空");if(h=/^\[([^\[\]]+)\]\s{0,}(.*)?/i,i=h.exec(g),!i)return c.compilerTemplateWarning(a,e,"attribute 命令缺少键名称");if("undefined"==typeof i[2]&&(i[2]="''"),j="__THIS_DATE"+(new Date).valueOf()+"__",l="var "+j+"=this;\n",l+="with(this.data){\n",l+="	 return (function(){\n",l+="		 try{\n",l+="		 return "+i[2]+";\n",l+="		 }catch(e){\n",l+="		 "+j+".templateWarning("+j+'.abstractSyntaxTree,"'+e+"\",e);return ''; \n",l+="		 }\n",l+="	 }());\n",l+="}",m=c.compilerAlgorithmCreateFunction(a,e,l,"warning"),"function"!=typeof m)return!1;"undefined"==typeof a.command["attribute"]&&(a.command["attribute"]=new Object),n=i[1].replace(/(^\s+)|(\s+$)/g,"").split(/\s+/);for(o in n)a.command["attribute"][n[o]]=m;"undefined"==typeof a.commandTemplate["attribute"]&&(a.commandTemplate["attribute"]=new Array),a.commandTemplate["attribute"].push(k.decodeHTML(e))},c.compilerAlgorithmCommandClass=function(a,b,d,e){var g,h,i,j,l;return e=k.encodeHTML(e),"undefined"!=typeof a.command["class"]?c.compilerTemplateWarning(a,e,"class 命令不能在同一个标签中存在多个"):(g=(new Date).valueOf(),h="__THIS_DATE"+g+"__",i="__OBJECT_DATE"+g+"__",j="var "+h+"=this;\n",j+="with(this.data){\n",j+="	 return (function(){\n",j+="		 try{\n",j+="		 var "+i+"="+d+";\n",j+="		 if(typeof "+i+" == 'object'){\n",j+="			 return "+i+";\n",j+="		 }else{\n",j+="			 throw '"+d.replace(/\'/g,"\\'").replace(/\"/g,'\\"')+" 不是对象';\n",j+="		 }\n",j+="		 }catch(e){\n",j+="		 "+h+".templateWarning("+h+'.abstractSyntaxTree,"'+e+'",e);return false; \n',j+="		 }\n",j+="	 }());\n",j+="}",l=c.compilerAlgorithmCreateFunction(a,e,j,"warning"),"function"!=typeof l?!1:(a.command["class"]=l,a.commandTemplate["class"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandStyle=function(a,b,d,e){var g,h,i,j,l;return e=k.encodeHTML(e),"undefined"!=typeof a.command["style"]?c.compilerTemplateWarning(a,e,"style 命令不能在同一个标签中存在多个"):(g=(new Date).valueOf(),h="__THIS_DATE"+g+"__",i="__OBJECT_DATE"+g+"__",j="var "+h+"=this;\n",j+="with(this.data){\n",j+="	 return (function(){\n",j+="		 try{\n",j+="		 var "+i+"="+d+";\n",j+="		 if(typeof "+i+" == 'object'){\n",j+="			 return "+i+";\n",j+="		 }else{\n",j+="			 throw '"+d.replace(/\'/g,"\\'").replace(/\"/g,'\\"')+" 不是对象';\n",j+="		 }\n",j+="		 }catch(e){\n",j+="		 "+h+".templateWarning("+h+'.abstractSyntaxTree,"'+e+'",e);return false; \n',j+="		 }\n",j+="	 }());\n",j+="}",l=c.compilerAlgorithmCreateFunction(a,e,j,"warning"),"function"!=typeof l?!1:(a.command["style"]=l,a.commandTemplate["style"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandTemplate=function(a,b,d,e){var g,h,i,j,l;return e=k.encodeHTML(e),"undefined"!=typeof a.command["template"]?c.compilerTemplateWarning(a,e,"template 命令不能在同一个标签中存在多个"):(g=(new Date).valueOf(),h="__THIS_DATE"+g+"__",i="__STRING_DATE"+g+"__",j="var "+h+"=this;\n",j+="with(this.data){\n",j+="	 return (function(){\n",j+="		 try{\n",j+="		 var "+i+"="+d+";\n",j+="		 if(typeof "+i+" == 'string'){\n",j+="			 return "+i+";\n",j+="		 }else{\n",j+="			 throw '"+d.replace(/\'/g,"\\'").replace(/\"/g,'\\"')+" 不是字符串';\n",j+="		 }\n",j+="		 }catch(e){\n",j+="		 "+h+".templateWarning("+h+'.abstractSyntaxTree,"'+e+'",e);return ""; \n',j+="		 }\n",j+="	 }());\n",j+="}",l=c.compilerAlgorithmCreateFunction(a,e,j),"function"!=typeof l?!1:(a.command["template"]=l,a.commandTemplate["template"]=k.decodeHTML(e),void 0))},c.compilerAlgorithmCommandVoid=function(a){a.command["void"]=!0},c.compilerTemplateLocation=function(a){var b={content:"",start:0,length:0};return b.start=a.beforeFirstIndex>0?a.templateIndex+a.beforeFirstIndex:a.templateIndex,b.length=a.isText?a.textLength:a.isSingle?a.single.length:a.error?a.beforeLastIndex-a.beforeFirstIndex:a.afterLastIndex-a.beforeFirstIndex,b.content=a.compiler.template.substr(b.start,b.length),b},c.compilerTemplateError=function(a,b,d,e){a.templateError="[templateError]:“"+k.decodeHTML(b)+"” "+d+"\n------------------------------------\n"+c.compilerTemplateLocation(a).content+"\n------------------------------------\n",e&&(a.commandError=!0),console.error(a.templateError)},c.compilerTemplateWarning=function(a,b,d){a.templateWarning="[templateWarning]:“"+k.decodeHTML(b)+"” "+d+"\n------------------------------------\n"+c.compilerTemplateLocation(a).content+"\n------------------------------------\n",console.warn(a.templateWarning)},c.ajaxConstruct=function(){var a=c.ajaxDefaultRequest();return arguments.length>0&&"object"==typeof arguments[0]?c.ajaxMergeRequest(a,arguments[0]):c.ajaxMergeRequest(a,null),c.ajaxXMLHttpRequest(a),c.ajaxSend(a),a.XMLHttpRequest},c.ajaxDefaultRequest=function(){return{XMLHttpRequest:void 0,url:"",method:"GET",async:!0,data:void 0,header:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},timeout:void 0,type:"text",ready:function(){},request:function(){},success:function(){},fail:function(){},response:function(){}}},c.ajaxMergeRequest=function(a,b){var d,e,f,g;return b.XMLHttpRequest&&b.XMLHttpRequest.open&&(a.XMLHttpRequest=b.XMLHttpRequest),a.url="string"==typeof b.url?b.url:c.routerConstruct().href,b?("string"==typeof b.method&&(d=b.method.toUpperCase().replace(/(^\s*)|(\s*$)/g,""),("POST"==d||"GET"==d)&&(a.method=d)),"undefined"!=typeof b.async&&(a.async=b.async?!0:!1),"undefined"!=typeof b.data&&(e=b.data,("string"==typeof b.data||"number"==typeof b.data)&&(e=c.routerParseQuery(b.data)),"object"==typeof e&&b.data&&(a.data=e)),"object"==typeof b.header&&b.header&&(a.header=b.header),"undefined"!=typeof b.timeout&&(f=parseInt(b.timeout),f&&!isNaN(f)&&(a.timeout=f)),"string"==typeof b.type&&(g=b.type.toLowerCase(),("text"==g||"xml"==g||"json"==g)&&(a.type=g)),"function"==typeof b.ready&&(a.ready=b.ready),"function"==typeof b.request&&(a.request=b.request),"function"==typeof b.success&&(a.success=b.success),"function"==typeof b.fail&&(a.fail=b.fail),"function"==typeof b.response&&(a.response=b.response),a):a},c.ajaxXMLHttpRequest=function(a){var b,c;if("undefined"!=typeof a.XMLHttpRequest&&a.XMLHttpRequest.open)return a;if(window.XMLHttpRequest)a.XMLHttpRequest=new XMLHttpRequest;else if(window.ActiveXObject)for(b=["Microsoft.XMLHTTP","MSXML2.XMLHTTP"],c=0;c<b.length;c++)try{a.XMLHttpRequest=new ActiveXObject(b[c]);break}catch(d){a.fail.call(a,"您的浏览器不支持Ajax")}return a},c.ajaxSend=function(a){var b,d;if("undefined"==typeof a.XMLHttpRequest||!a.XMLHttpRequest.open)return!1;if(b={isTimeout:!1,setTimeoutId:null,errorExecuted:!1,error:function(b,c,d){return this.errorExecuted?!1:(this.errorExecuted=!0,d||(d=b.XMLHttpRequest.status),a.fail.call(b,c,d))}},a.XMLHttpRequest.onreadystatechange=function(){var c,e;if(a.ready.call(a,a.XMLHttpRequest.readyState),4==a.XMLHttpRequest.readyState){if(!b.isTimeout&&(a.XMLHttpRequest.status>=200&&a.XMLHttpRequest.status<300||304==a.XMLHttpRequest.status)){if(clearTimeout(b.setTimeoutId),c=void 0,"text"==a.type)c=a.XMLHttpRequest.responseText;else if("xml"==a.type)c=a.XMLHttpRequest.responseXML;else if("json"==a.type)try{c=JSON.parse(a.XMLHttpRequest.responseText)}catch(d){c=a.XMLHttpRequest.response,console.warn(d)}a.success.call(a,c,a.XMLHttpRequest.status)}else clearTimeout(b.setTimeoutId),b.isTimeout?(a.XMLHttpRequest.fireEvent?a.XMLHttpRequest.fireEvent("ontimeout"):(e=document.createEvent("HTMLEvents"),e.initEvent("timeout",!1,!0),a.XMLHttpRequest.dispatchEvent(e)),b.error(a,"timeout")):b.error(a,"error");return a.response.call(a,a.XMLHttpRequest.status),!0}},a.XMLHttpRequest.onabort=function(){b.error(a,"abort")},a.XMLHttpRequest.onerror=function(){b.error(a,"error",500)},"object"==typeof a.data&&("POST"==a.method?a.data.constructor&&a.data.constructor==FormData?"undefined"!=typeof a.header["Content-Type"]&&delete a.header["Content-Type"]:a.data=c.routerBuildQuery(a.data):"GET"!=a.method||a.data.constructor&&a.data.constructor==FormData||(a.url=c.routerConstruct(a.url,{query:a.data}).href,a.data=null)),a.XMLHttpRequest.open(a.method,a.url,a.async),a.request.call(a,a.XMLHttpRequest),a.header)for(d in a.header)a.XMLHttpRequest.setRequestHeader(d,a.header[d]);"number"==typeof a.timeout&&(b.setTimeoutId=setTimeout(function(){4!=a.XMLHttpRequest.readyState&&(b.isTimeout=!0,a.XMLHttpRequest.onabort=null,a.XMLHttpRequest.abort(),clearTimeout(b.setTimeoutId))},a.timeout)),a.XMLHttpRequest.send(a.data)},c.includeConstruct=function(a){var e,b=new h,d=c.includeDefaultResource();for(e in d)b[e]=d[e];return c.includeMergeResource(b,a),c.includeCreateElement(b),b},c.includeDefaultResource=function(){return{element:void 0,file:"",query:"",charset:"UTF-8",type:"",selector:"head",unique:!0}},c.includeMergeResource=function(a,b){"object"!=typeof b.element||!b.element.constructor||b.element.constructor!=HTMLLinkElement&&b.element.constructor!=HTMLScriptElement||(a.element=b.element),("string"==typeof b.file||"number"==typeof b.file)&&(a.file=b.file,"number"==typeof a.file&&(a.file=a.file.toString()),""!=a.file&&(a.type=a.file.split(".").pop(),a.type=a.type.replace(/(^\s*)|(\s*$)/g,""),a.type=a.type.toLowerCase())),("string"==typeof b.query||"number"==typeof b.query)&&(a.query=b.query,"number"==typeof a.query&&(a.query=a.query.toString()),""!=a.query&&(a.query=a.query.replace(/(^\s*)|(\s*$)/g,""),a.query="?"+a.query.replace(/^\?{0,}/g,""))),("string"==typeof b.charset||"number"==typeof b.charset)&&(a.charset=b.charset)},c.includeCreateElement=function(a){return"object"!=typeof a.element||!a.element.constructor||a.element.constructor!=HTMLLinkElement&&a.element.constructor!=HTMLScriptElement?("css"===a.type?(a.element=document.createElement("link"),a.element.rel="stylesheet",a.element.href=a.file+a.query,a.charset&&(a.element.charset=a.charset)):"js"===a.type&&(a.element=document.createElement("script"),a.element.type="text/javascript",a.element.src=a.file+a.query,a.charset&&(a.element.charset=a.charset)),void 0):!1},c.frameworkConstruct=function(a){return a&&(c.frameworkConfigSetting(a),c.frameworkEventSetting(a),c.frameworkPageSetting(a),c.frameworkMonitorInstall()),this.frameworkInstanceof?console.log("this.frameworkInstanceof 已存在"):(this.frameworkInstanceof=new d,d.prototype.ready=c.frameworkReady,d.prototype.run=c.frameworkRun,d.prototype.history=new e,d.prototype.debug=function(){console.log("historyPageList",c.frameworkHistoryPageList),console.log("historyRouterList",c.frameworkHistoryRouterList)}),d.prototype.config=c.frameworkCloneRecursion(c.frameworkConfig),d.prototype.page=c.frameworkCloneRecursion(c.frameworkPage),d.prototype.event=c.frameworkCloneRecursion(c.frameworkEvent),d.prototype.project=c.frameworkCloneRecursion(c.frameworkProjectPublic),d.prototype["export"]=function(){return arguments.length<1?c.frameworkCloneRecursion(c.frameworkExport):"string"!=typeof arguments[0]&&"number"!=typeof arguments[0]?!1:1==arguments.length?"undefined"!=typeof c.frameworkExport[arguments[0]]?c.frameworkExport[arguments[0]]:void 0:arguments.length>1?"undefined"==typeof arguments[1]||null===arguments[1]||arguments[1]===!1?("undefined"!=typeof c.frameworkExport[arguments[0]]&&delete c.frameworkExport[arguments[0]],!0):("number"==typeof arguments[1]&&(arguments[1]=String(arguments[1])),"string"!=typeof arguments[1]?!1:(c.frameworkExport[arguments[0]]=arguments[1],!0)):!1},this.frameworkInstanceof},c.frameworkRun=function(){return c.frameworkPageShow(),c.frameworkConstruct()},c.frameworkConfig={},c.frameworkConfigDefault={includeSelector:"action",includeTime:!1,exportTime:!1,renderSelector:"view",historyPageMaximum:10,historyRouterMaximum:10,debug:!1,version:"0.0.1"},c.frameworkConfigSetting=function(a){var b,d;("string"==typeof a.includeSelector||"number"==typeof a.includeSelector)&&(c.frameworkConfigDefault.includeSelector=a.includeSelector),("string"==typeof a.renderSelector||"number"==typeof a.renderSelector)&&(c.frameworkConfigDefault.renderSelector=a.renderSelector),("string"==typeof a.version||"number"==typeof a.version)&&(c.frameworkConfigDefault.version=a.version),"undefined"!=typeof a.debug&&(c.frameworkConfigDefault.debug=a.debug?!0:!1),"undefined"!=typeof a.includeTime&&(c.frameworkConfigDefault.includeTime=a.includeTime?!0:!1),"undefined"!=typeof a.exportTime&&(c.frameworkConfigDefault.exportTime=a.exportTime?!0:!1),"undefined"!=typeof a.historyPageMaximum&&(b=Number(a.historyPageMaximum),isNaN(b)||(c.frameworkConfigDefault.historyPageMaximum=b)),"undefined"!=typeof a.historyRouterMaximum&&(b=Number(a.historyRouterMaximum),isNaN(b)||(c.frameworkConfigDefault.historyRouterMaximum=b));for(d in c.frameworkConfigDefault)c.frameworkConfig[d]=c.frameworkConfigDefault[d]},c.frameworkConfigIncludeQuery=function(){var a="";return""!=c.frameworkConfig.version&&(a+="?v="+c.frameworkConfig.version),c.frameworkConfig.includeTime&&(a+=""!=a?"&t="+k.date("yyyy.MM.dd.hh.mm.ss.S",(new Date).getTime()):"?t="+k.date("yyyy.MM.dd.hh.mm.ss.S",(new Date).getTime())),a},c.frameworkConfigExportQuery=function(){var a="";return""!=c.frameworkConfig.version&&(a+="?v="+c.frameworkConfig.version),c.frameworkConfig.exportTime&&(a+=""!=a?"&t="+k.date("yyyy.MM.dd.hh.mm.ss.S",(new Date).getTime()):"?t="+k.date("yyyy.MM.dd.hh.mm.ss.S",(new Date).getTime())),a},c.frameworkPage=new Object,c.frameworkPageSetting=function(a){var b,d,e,f;if(!a||!a.page)return c.frameworkPage;if(b=a.page,"object"==typeof b){d=c.routerConstruct();for(e in b)"object"==typeof b[e]&&b[e].constructor==Array&&b[e].length>1&&(f=""!==e?c.routerConstruct(d.url,"#"+e):c.routerConstruct(d.url),c.frameworkPage[f.href]={id:b[e][0],file:b[e][1]})}return c.frameworkPage},c.frameworkPageShow=function(){c.frameworkProjectId="",c.frameworkEvent.pageStart();var a=c.routerConstruct();a.anchor&&a.anchor.query&&(a.anchor.query=void 0,a=c.routerConstruct(a)),c.frameworkEvent.page(a.href,function(b){c.frameworkPageShowInclude(b,a)})},c.frameworkPageShowInclude=function(a,b){var d,e;if(!a||"object"!=typeof a||!a.id||!a.file){if("undefined"==typeof c.frameworkPage[b.href])return c.frameworkError("“"+b.href+"” 页面不存在"),c.frameworkEvent.pageNotFound(b.href),!1;a=c.frameworkPage[b.href]}if(c.frameworkProjectId=a.id,c.frameworkDebug(function(){console.log("【显示页面】开始","工程ID："+c.frameworkProjectId)}),!a.file||"string"!=typeof a.file)return c.frameworkDebug(function(){console.log("【显示页面】没有需要引入的文件",a)}),c.frameworkPageShowProject(c.frameworkProjectId,b.href);if(d=c.includeConstruct({file:a.file,query:c.frameworkConfigIncludeQuery()}),d.exists())return c.frameworkDebug(function(){console.log("【显示页面】已经引入的文件",d)}),c.frameworkPageShowProject(c.frameworkProjectId,b.href);if(c.frameworkEvent.includeStart(d),!d.element)return c.frameworkError("“"+a.file+"” 文件引入异常"),c.frameworkEvent.includeEnd(d,!1),!1;d.error(function(){c.frameworkError("“"+a.file+"” 文件引入出错"),c.frameworkEvent.includeEnd(d,!1)}),d.load(function(){return c.frameworkDebug(function(){console.log("【显示页面】文件引入成功",d)}),c.frameworkEvent.includeEnd(d,!0),c.frameworkPageShowProject(c.frameworkProjectId,b.href)});try{if(e=document.querySelectorAll(c.frameworkConfig.includeSelector),!e.length||!e[0])return c.frameworkError("在 document 中没有找到“"+c.frameworkConfig.includeSelector+"”筛选元素，无法引入js工程文件"),!0;e[0].appendChild(d.element)}catch(f){c.frameworkError("“"+c.frameworkConfig.includeSelector+"” 筛选器引入js工程文件出错"+f)}},c.frameworkPageShowProject=function(a,b){return"undefined"==typeof c.frameworkProjectPublic[a]?(c.frameworkError("工程标识为 “"+a+"” 的页面不存在"),c.frameworkEvent.pageNotFound(b),!1):(c.frameworkProjectInitializeRun(function(){return c.frameworkProjectRun(a)}),void 0)},c.frameworkProjectRun=function(a){return c.frameworkProjectReady=!1,c.frameworkProjectPrivate[a].runCount++,c.frameworkProjectPrivate[a].runState=1,c.frameworkProjectPublic[a].main.call(c.frameworkProjectPublic[a]),c.frameworkProjectId!=a?!1:(c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:(c.frameworkEvent.loadStart(c.frameworkProjectPublic[a]),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:("function"==typeof c.frameworkProjectPublic[a].event.loadStart&&c.frameworkProjectPublic[a].event.loadStart.call(c.frameworkProjectPublic[a]),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:(c.frameworkProjectRender(a),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:(c.frameworkEvent.loadEnd(c.frameworkProjectPublic[a]),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:("function"==typeof c.frameworkProjectPublic[a].event.loadEnd&&c.frameworkProjectPublic[a].event.loadEnd.call(c.frameworkProjectPublic[a]),c.frameworkDebug(function(){console.log("【显示页面】页面已加载，准备中...","当前工程ID："+a)}),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:(c.frameworkEvent.pageEnd(),c.frameworkProjectRunState(a,function(){return c.frameworkProjectId!=a?!1:(c.frameworkProjectReady=!0,c.frameworkDebug(function(){console.log("【显示页面】页面已经准备好了！","当前工程ID："+a)}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)}),void 0)},c.frameworkProjectRunState=function(a,b){return 1==c.frameworkProjectPrivate[a].runState?(c.frameworkDebug(function(){console.log("【工程运行状态】执行中","工程ID："+a)}),b()):2!=c.frameworkProjectPrivate[a].runState?(c.frameworkDebug(function(){console.log("【工程运行状态】已关闭！","工程ID："+a)}),!1):(c.frameworkDebug(function(){console.log("【工程运行状态】暂停中...","工程ID："+a)}),c.frameworkProjectPrivate[a].runInterval&&(clearInterval(c.frameworkProjectPrivate[a].runInterval),c.frameworkProjectPrivate[a].runInterval=null),c.frameworkProjectPrivate[a].runInterval=setInterval(function(){return 2==c.frameworkProjectPrivate[a].runState?!0:(c.frameworkProjectPrivate[a].runInterval&&(clearInterval(c.frameworkProjectPrivate[a].runInterval),c.frameworkProjectPrivate[a].runInterval=null),1==c.frameworkProjectPrivate[a].runState?(c.frameworkDebug(function(){console.log("【工程运行状态】已启动","工程ID："+a)}),b()):(c.frameworkDebug(function(){console.log("【工程运行状态】已关闭！","工程ID："+a)}),!1))},0),void 0)},c.frameworkProjectCompiler=function(a,b){"object"!=typeof c.frameworkProjectPrivate[a].compiler?(c.frameworkProjectPrivate[a].compiler=c.compilerConstruct(c.frameworkProjectPrivate[a].template),c.frameworkProjectPrivate[a].compilerCount++,c.frameworkDebug(function(){console.log("【工程编译】完毕！","工程ID："+a)})):b&&(c.compilerReload(c.frameworkProjectPrivate[a].compiler),c.frameworkProjectPrivate[a].compilerCount++,c.frameworkDebug(function(){console.log("【重新编译】完毕！","当前工程ID："+a)}))},c.frameworkProjectRenderQueue=new Object,c.frameworkProjectRender=function(a,b){return c.frameworkProjectPublic[a]&&c.frameworkProjectPrivate[a]&&!c.frameworkProjectRenderQueue[a]?(c.frameworkProjectRenderQueue[a]=!0,c.frameworkDebug(function(){console.log("【视图渲染】工程标识为 “"+a+"” 加入了渲染队列！")}),c.frameworkProjectPrivate[a].renderState=1,c.frameworkEvent.renderStart(c.frameworkProjectPublic[a]),c.frameworkProjectRenderState(a,function(){"function"==typeof c.frameworkProjectPublic[a].event.renderStart&&c.frameworkProjectPublic[a].event.renderStart.call(c.frameworkProjectPublic[a]),c.frameworkProjectRenderState(a,function(){c.frameworkProjectRenderRun(a,b),c.frameworkProjectRenderState(a,function(){c.frameworkEvent.renderEnd(c.frameworkProjectPublic[a]),c.frameworkProjectRenderState(a,function(){"function"==typeof c.frameworkProjectPublic[a].event.renderEnd&&c.frameworkProjectPublic[a].event.renderEnd.call(c.frameworkProjectPublic[a]),c.frameworkProjectRenderState(a,function(){c.frameworkProjectRenderClose(a)},function(){c.frameworkProjectRenderClose(a)})},function(){c.frameworkProjectRenderClose(a)
})},function(){c.frameworkProjectRenderClose(a)})},function(){c.frameworkProjectRenderClose(a)})},function(){c.frameworkProjectRenderClose(a)}),void 0):(c.frameworkDebug(function(){console.log("【视图渲染】工程标识为 “"+a+"” 已经在渲染队列中了！")}),!1)},c.frameworkProjectRenderState=function(a,b,d){return 1==c.frameworkProjectPrivate[a].renderState?(c.frameworkDebug(function(){console.log("【视图渲染】执行中","工程ID："+a)}),b()):2!=c.frameworkProjectPrivate[a].renderState?(c.frameworkDebug(function(){console.log("【视图渲染】已关闭！","工程ID："+a)}),d?d():!1):(c.frameworkDebug(function(){console.log("【视图渲染】暂停中...","工程ID："+a)}),c.frameworkProjectPrivate[a].renderInterval&&(clearInterval(c.frameworkProjectPrivate[a].renderInterval),c.frameworkProjectPrivate[a].renderInterval=null),c.frameworkProjectPrivate[a].renderInterval=setInterval(function(){return 2==c.frameworkProjectPrivate[a].renderState?!0:(c.frameworkProjectPrivate[a].renderInterval&&(clearInterval(c.frameworkProjectPrivate[a].renderInterval),c.frameworkProjectPrivate[a].renderInterval=null),1==c.frameworkProjectPrivate[a].renderState?(c.frameworkDebug(function(){console.log("【视图渲染】已启动","工程ID："+a)}),b()):(c.frameworkDebug(function(){console.log("【视图渲染】已关闭！","工程ID："+a)}),d?d():!1))},0),void 0)},c.frameworkProjectRenderRun=function(a,b){c.frameworkProjectPrivate[a].dataObserver||(c.frameworkProjectPrivate[a].dataObserver=!0,c.frameworkProjectDataObserver(a)),"object"!=typeof c.frameworkProjectPrivate[a].compiler&&(c.frameworkProjectPrivate[a].compiler=c.compilerConstruct(c.frameworkProjectPrivate[a].template)),b||(b={}),b.refresh=b.refresh?!0:!1,b.reload=b.reload?!0:!1;try{if((!c.frameworkProjectPrivate[a].renderParentNode||b.reload)&&c.frameworkProjectRenderParentNode(a),!c.frameworkProjectPrivate[a].renderParentNode)throw!1;if(c.frameworkProjectRenderSelectorClear(c.frameworkProjectPrivate[a].renderParentNode,c.frameworkProjectPrivate[a].compiler,b.reload),c.frameworkProjectPrivate[a].compiler.render({data:c.frameworkProjectPublic[a].data,selector:c.frameworkProjectPrivate[a].renderParentNode,refresh:b.refresh}),c.frameworkProjectPrivate[a].renderChildNodes=[],c.frameworkProjectPrivate[a].renderParentNode.childNodes&&c.frameworkProjectPrivate[a].renderParentNode.childNodes.length)for(var d=0;d<c.frameworkProjectPrivate[a].renderParentNode.childNodes.length;d++)c.frameworkProjectPrivate[a].renderChildNodes.push(c.frameworkProjectPrivate[a].renderParentNode.childNodes[d])}catch(e){c.frameworkDebug(function(){console.log("【视图渲染】工程标识为 “"+a+"” 没有筛选器，放入渲染节点集中！")}),c.frameworkProjectPrivate[a].renderParentNode=null,c.frameworkProjectPrivate[a].renderChildNodes&&"object"==typeof c.frameworkProjectPrivate[a].renderChildNodes&&c.frameworkProjectPrivate[a].renderChildNodes.constructor==Array||(c.frameworkProjectPrivate[a].renderChildNodes=[]),c.frameworkProjectPrivate[a].compiler.render({data:c.frameworkProjectPublic[a].data,selector:c.frameworkProjectPrivate[a].renderChildNodes,refresh:b.refresh})}c.frameworkProjectPrivate[a].renderCount++},c.frameworkProjectRenderClose=function(a){setTimeout(function(){delete c.frameworkProjectRenderQueue[a],c.frameworkDebug(function(){console.log("【视图渲染】工程标识为 “"+a+"” 已离开渲染队列！")})},0)},c.frameworkProjectRenderParentNode=function(a,b){var d,e;if(d=b&&"undefined"!=typeof b?b:"undefined"!=typeof c.frameworkProjectPrivate[a].selector?c.frameworkProjectPrivate[a].selector:c.frameworkConfig.renderSelector,c.frameworkProjectPrivate[a].renderParentNode=null,"object"==typeof d&&d instanceof HTMLElement)c.frameworkProjectPrivate[a].renderParentNode=d;else if("string"==typeof d||"number"==typeof d)try{e=document.querySelectorAll(d),e.length&&e[0]&&(c.frameworkProjectPrivate[a].renderParentNode=e[0])}catch(f){c.frameworkWarning(f),c.frameworkDebug(function(){console.log("【筛选器错误】"+f)})}},c.frameworkProjectRenderSelectorClear=function(a,b,d){var e,f;if(d)c.frameworkDebug(function(){console.log("【视图渲染】强制清理")});else{if(e=!1,"object"==typeof b.abstractSyntaxTree)for(f in b.abstractSyntaxTree)if(b.abstractSyntaxTree[f].HTMLDOMElement&&b.abstractSyntaxTree[f].HTMLDOMElement.parentElement==a){e=!0;break}if(e)return!0}for(;a.childNodes.length;)a.removeChild(a.firstChild);if("object"==typeof b.abstractSyntaxTree)for(f in b.abstractSyntaxTree)c.compilerRenderRemoveNode(b.abstractSyntaxTree[f])},c.frameworkProjectRenderNodeCheck=function(a,b){var c,d,e;if(!(a&&a.childNodes&&a.childNodes.length&&b&&b.length))return!1;for(c=0;c<b.length;c++){for(d=!1,e=0;e<a.childNodes.length;e++)if(b[c]==a.childNodes[e]){d=!0;break}if(!d)return!1}return!0},c.frameworkProjectRenderTempHTMLDOMElement=function(a){var d,e,b=c.frameworkProjectRenderNodeCheck(c.frameworkProjectPrivate[a].renderParentNode,c.frameworkProjectPrivate[a].renderChildNodes);if(b)d=c.frameworkProjectPrivate[a].renderParentNode;else{d=document.createElement("div");for(e in c.frameworkProjectPrivate[a].renderChildNodes)d.appendChild(c.frameworkProjectPrivate[a].renderChildNodes[e])}return d},c.frameworkProjectDataObserver=function(a){c.frameworkProjectDataDefineProperty(a,c.frameworkProjectPublic[a],"data",c.frameworkProjectPublic[a].data)},c.frameworkProjectDataChange=function(a){return c.frameworkProjectRenderQueue[a]?(c.frameworkDebug(function(){console.log("【数据绑定视图渲染】渲染已经加入队列中")}),!1):(c.frameworkProjectRender(a),void 0)},c.frameworkProjectDataClone=function(a,b){for(var d in b)c.frameworkProjectPublic[a].data[d]=null===b[d]||"object"!=typeof b[d]||b[d].constructor!=Object&&b[d].constructor!=Array?b[d]:c.frameworkCloneRecursion(b[d])},c.frameworkProjectDataRegister=function(a,b){var c;b&&"object"==typeof b&&(b.constructor==Object?c=Object.keys(b).length:b.constructor==Array&&(c=b.length),b.hasOwnProperty("__actionViewForJavaScript__")||Object.defineProperty(b,"__actionViewForJavaScript__",{value:{},enumerable:!1}),b.__actionViewForJavaScript__.hasOwnProperty("id")||Object.defineProperty(b.__actionViewForJavaScript__,"id",{value:a,writable:!1,enumerable:!1}),Object.defineProperty(b.__actionViewForJavaScript__,"length",{value:c,writable:!0,enumerable:!1}))},c.frameworkProjectDataProxy=function(){},c.frameworkProjectDataDefineProperty=function(a,b,d,e){return c.frameworkProjectDataDefinePropertyRecursion(a,e),c.frameworkProjectDataRegister(a,e),Object.getOwnPropertyDescriptor(b,d)&&Object.getOwnPropertyDescriptor(b,d).get&&Object.getOwnPropertyDescriptor(b,d).set?!0:(Object.defineProperty(b,d,{configurable:!0,get:function(){return e&&"object"==typeof e&&setTimeout(function(){var f,g;return e&&"object"==typeof e&&e.__actionViewForJavaScript__&&(e.constructor==Object?(f=Object.keys(e).length,g="【数据监听】[get]检测到有变化 对象，键名称："+d):e.constructor==Array&&(f=e.length,g="【数据监听】[get]检测到有变化 数组，键名称："+d),e.__actionViewForJavaScript__.length!=f)?(c.frameworkDebug(function(){console.log(g,e);for(var a in e)console.log("【数据监听】打印键值：",a,e[a]);console.log("【数据监听】----------------")}),c.frameworkProjectDataDefineProperty(a,b,d,e),c.frameworkProjectDataChange(a)):void 0},0),e},set:function(f){var g=!1;typeof e!=typeof f?g=!0:"function"==typeof e&&"function"==typeof f?e.toString()!=f.toString()&&(g=!0):e!=f&&(g=!0),g?(c.frameworkDebug(function(){console.log("【数据监听】[set]检测到有变化!键名称："+d,"旧值：",e,"新值：",f)}),e=f,setTimeout(function(){return c.frameworkProjectDataDefineProperty(a,b,d,e),c.frameworkProjectDataChange(a)},0)):c.frameworkDebug(function(){console.log("【数据监听】[set]检测到没有发生变化！键名称："+d,f)})}}),void 0)},c.frameworkProjectDataDefinePropertyRecursion=function(a,b){var d;if(!b||"object"!=typeof b)return!1;if(b.constructor==Object)for(d in b)c.frameworkProjectDataDefineProperty(a,b,d,b[d]);else if(b.constructor==Array)for(d=0;d<b.length;d++)"undefined"==typeof b[d]&&(b[d]=void 0),c.frameworkProjectDataDefineProperty(a,b,d,b[d])},c.frameworkProjectInitializeRun=function(a){for(var b in c.frameworkProjectNotInitialize)return c.frameworkProjectInitialize(b,function(){return c.frameworkProjectInitializeRun(a)});return a?a():void 0},c.frameworkProjectInitialize=function(a,b){var d,e,f,g;if(!a)return!1;if("undefined"==typeof c.frameworkProjectNotInitialize[a])return b?b():void 0;if(!c.frameworkProjectPrivate[a].includeState)return c.frameworkProjectInitializeInclude(a,function(){return c.frameworkProjectInitialize(a,b)});if(!c.frameworkProjectPrivate[a].exportState)return c.frameworkProjectInitializeExport(a,function(){return c.frameworkProjectInitialize(a,b)});if(c.frameworkProjectPrivate[a].extend.length){for(d=0;d<c.frameworkProjectPrivate[a].extend.length;d++){if(e=c.frameworkProjectPrivate[a].extend[d],"undefined"!=typeof c.frameworkProjectNotInitialize[e])return c.frameworkProjectInitialize(e,function(){return c.frameworkProjectInitialize(a,b)});c.frameworkDebug(function(){console.log("【工程继承】完毕：","当前工程ID："+a,"继承工程ID："+e)})}for(d=0;d<c.frameworkProjectPrivate[a].extend.length;d++)if(e=c.frameworkProjectPrivate[a].extend[d],"undefined"!=typeof c.frameworkProjectPrivate[e]){"undefined"==typeof c.frameworkProjectPrivate[a].selector&&"undefined"!=typeof c.frameworkProjectPrivate[e].selector&&(c.frameworkProjectPrivate[a].selector=c.frameworkProjectPrivate[e].selector);for(f in c.frameworkProjectPrivate[e].export)"undefined"==typeof c.frameworkProjectPrivate[a].export[f]&&(c.frameworkProjectPrivate[a].export[f]=c.frameworkProjectPrivate[e].export[f]);"undefined"==typeof c.frameworkProjectPrivate[a].import&&"function"==typeof c.frameworkProjectPrivate[e].import&&(c.frameworkProjectPrivate[a].import=c.frameworkProjectPrivate[e].import),"undefined"==typeof c.frameworkProjectPrivate[a].template&&"string"==typeof c.frameworkProjectPrivate[e].template&&(c.frameworkProjectPrivate[a].template=c.frameworkProjectPrivate[e].template);for(f in c.frameworkProjectPublic[e].event)"undefined"==typeof c.frameworkProjectPublic[a].event[f]&&(c.frameworkProjectPublic[a].event[f]=c.frameworkProjectPublic[e].event[f]);for(f in c.frameworkProjectPublic[e].data)"undefined"==typeof c.frameworkProjectPublic[a].data[f]&&(c.frameworkProjectPublic[a].data[f]=c.frameworkProjectPublic[e].data[f])}else c.frameworkWarning("当前工程标识为 “"+a+"” 继承 父级工程标识为“"+e+"” 失败！av('"+e+"') 工程不存在！")}for(d in c.frameworkProjectPrivate[a].export)g=c.frameworkProjectPrivate[a].export[d].url,c.frameworkProjectPrivate[a].importArguments[d]="undefined"!=typeof c.frameworkExport[g]?c.frameworkExport[g]:void 0;return"function"==typeof c.frameworkProjectPrivate[a].import&&c.frameworkProjectPrivate[a].import.call(c.frameworkProjectPublic[a],c.frameworkProjectPrivate[a].importArguments),"undefined"==typeof c.frameworkProjectPrivate[a].template&&(c.frameworkProjectPrivate[a].template=""),delete c.frameworkProjectNotInitialize[a],c.frameworkEventReady(a),b?b():void 0},c.frameworkProjectInitializeInclude=function(a,b){var d,e,f,g,h;if(!c.frameworkProjectPrivate[a].include.length)return c.frameworkProjectPrivate[a].includeState=!0,b?b():void 0;for(d=null,e=0;e<c.frameworkProjectPrivate[a].include.length;e++)if(!c.frameworkProjectPrivate[a].include[e].load){c.frameworkProjectPrivate[a].include[e].load=!0,d=c.frameworkProjectPrivate[a].include[e];break}return d?(f=c.includeConstruct({file:d.file,query:c.frameworkConfigIncludeQuery()}),f.exists()?c.frameworkProjectInitializeInclude(a,b):(c.frameworkEvent.includeStart(d),f.error(function(){return c.frameworkError("“"+d.file+"” 文件引入出错"),c.frameworkEvent.includeEnd(d,!1),c.frameworkProjectInitializeInclude(a,b)}),f.load(function(){return c.frameworkDebug(function(){console.log("【显示页面】文件引入成功",d)}),c.frameworkEvent.includeEnd(d,!0),c.frameworkProjectInitializeInclude(a,b)}),g=d.selector?d.selector:c.frameworkConfig.includeSelector,h=document.querySelectorAll(g),h.length&&h[0]?("function"==typeof d.callback?d.callback.call(f,h[0]):h[0].appendChild(f.element),void 0):(c.frameworkError("在 document 中没有找到“"+g+"”筛选元素，无法引入js工程文件"),c.frameworkProjectInitializeInclude(a,b)))):(c.frameworkProjectPrivate[a].includeState=!0,b?b():void 0)},c.frameworkProjectInitializeExport=function(a,b){var e,d=null;for(e in c.frameworkProjectPrivate[a].export)if(!c.frameworkProjectPrivate[a].export[e].load){c.frameworkProjectPrivate[a].export[e].load=!0,d=c.frameworkProjectPrivate[a].export[e];break}return d?(c.frameworkEvent.exportStart(d.url),"undefined"!=typeof c.frameworkExport[d.url]?c.frameworkProjectInitializeExport(a,b):(c.ajaxConstruct({url:d.url,method:"GET",async:!0,type:"text",data:c.frameworkConfigExportQuery(),success:function(a){c.frameworkExport[d.url]=a,c.frameworkEvent.exportEnd(d.url,!0)},fail:function(a,b){c.frameworkError("导入“"+d.url+"”内容出错("+a+":"+b+")"),c.frameworkEvent.exportEnd(d.url,!1)},response:function(){return c.frameworkProjectInitializeExport(a,b)}}),void 0)):(c.frameworkProjectPrivate[a].exportState=!0,b?b():void 0)},c.frameworkEvent={error:function(){},includeStart:function(){},includeEnd:function(){},exportStart:function(){},exportEnd:function(){},loadStart:function(){},loadEnd:function(){},resize:function(){},ready:function(){},show:function(){},hide:function(){},page:function(a,b){return b()},pageStart:function(){},pageEnd:function(){},pageNotFound:function(){},pageChange:null,routerChange:function(){},renderStart:function(){},renderEnd:function(){}},c.frameworkEventSetting=function(a){var b,d;if(!a||!a.event)return c.frameworkEvent;if(b=a.event,"object"==typeof b)for(d in b)"undefined"!=typeof c.frameworkEvent[d]&&"function"==typeof b[d]&&(c.frameworkEvent[d]=b[d]);return c.frameworkEvent},c.frameworkEventReady=function(a){c.frameworkEvent.ready(c.frameworkProjectPublic[a]),"function"==typeof c.frameworkProjectPublic[a].event.ready&&c.frameworkProjectPublic[a].event.ready.call(c.frameworkProjectPublic[a])},c.frameworkEventPageChangeCheck=function(){return"function"==typeof c.frameworkEvent.pageChange?!0:c.frameworkProjectPublic[c.frameworkProjectId]&&"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.pageChange?!0:!1},c.frameworkEventPageChange=function(a,b){if("function"==typeof c.frameworkEvent.pageChange&&c.frameworkProjectPublic[c.frameworkProjectId]&&"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.pageChange){var d=c.frameworkProjectPublic[c.frameworkProjectId];c.frameworkEvent.pageChange(a,function(){d.event.pageChange.call(d,a,function(){b()})})}else c.frameworkProjectPublic[c.frameworkProjectId]&&"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.pageChange?c.frameworkProjectPublic[c.frameworkProjectId].event.pageChange.call(d,a,function(){b()}):"function"==typeof c.frameworkEvent.pageChange&&c.frameworkEvent.pageChange(a,function(){b()})},c.frameworkEventRouterChange=function(a){c.frameworkProjectPublic[c.frameworkProjectId]?(c.frameworkEvent.routerChange(a),"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.routerChange&&c.frameworkProjectPublic[c.frameworkProjectId].event.routerChange.call(c.frameworkProjectPublic[c.frameworkProjectId],a)):c.frameworkEvent.routerChange(a)},c.frameworkEventResize=function(a,b){c.frameworkProjectPublic[c.frameworkProjectId]?(c.frameworkEvent.resize(a,b),"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.resize&&c.frameworkProjectPublic[c.frameworkProjectId].event.resize.call(c.frameworkProjectPublic[c.frameworkProjectId],a,b)):c.frameworkEvent.resize(a,b)},c.frameworkEventVisibility=function(a){"hidden"===a?c.frameworkProjectPublic[c.frameworkProjectId]?(c.frameworkEvent.hide(c.frameworkProjectPublic[c.frameworkProjectId]),"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.hide&&c.frameworkProjectPublic[c.frameworkProjectId].event.hide.call(c.frameworkProjectPublic[c.frameworkProjectId])):c.frameworkEvent.hide():"visible"===a&&(c.frameworkProjectPublic[c.frameworkProjectId]?(c.frameworkEvent.show(c.frameworkProjectPublic[c.frameworkProjectId]),"function"==typeof c.frameworkProjectPublic[c.frameworkProjectId].event.show&&c.frameworkProjectPublic[c.frameworkProjectId].event.show.call(c.frameworkProjectPublic[c.frameworkProjectId])):c.frameworkEvent.show.call())},c.frameworkMonitorSetIntervalId=null,c.frameworkMonitorVisibility=function(){var a={hidden:null,visibilityChange:null,eventListener:function(){c.frameworkEventVisibility(document.visibilityState)}};return"undefined"!=typeof document.hidden?(a.hidden="hidden",a.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(a.hidden="msHidden",a.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.hidden&&a.visibilityChange?(document.addEventListener?(document.addEventListener(a.visibilityChange,a.eventListener,!1),document.removeEventListener(a.visibilityChange,a.eventListener,!0)):document.attachEvent?document.attachEvent("on"+a.visibilityChange,a.eventListener):document["on"+a.visibilityChange]=a.eventListener,!0):!1},c.frameworkMonitorInstall=function(){var d,e,f,g,h,i;return c.frameworkMonitorSetIntervalId?!1:(c.frameworkMonitorVisibility(),d=c.routerConstruct(),e=d.anchor&&d.anchor.link?d.anchor.link:"",c.frameworkHistoryPageGather(d),c.frameworkHistoryRouterGather(d),f=null,g=a.innerHeight,h=a.innerWidth,i=null,c.frameworkMonitorSetIntervalId=setInterval(function(){f||(f=setTimeout(function(){var a,b;f=null,a=c.routerConstruct(),b=a.anchor&&a.anchor.link?a.anchor.link:"",JSON.stringify(e)!=JSON.stringify(b)?c.frameworkEventPageChangeCheck()?(c.frameworkDebug(function(){console.log("【页面跳转】存在pageChange事件，回调执行",a)}),d.request(),c.frameworkEventPageChange(a,function(){c.frameworkDebug(function(){console.log("【页面跳转】pageChange事件回调，成功跳转",a)}),c.frameworkHistoryPageGather(a),c.frameworkHistoryRouterGather(a),e=b,d=a,a.request(),c.frameworkPageShow()})):(c.frameworkDebug(function(){console.log("【页面跳转】没有pageChange事件，直接执行",a)}),c.frameworkHistoryPageGather(a),c.frameworkHistoryRouterGather(a),e=b,d=a,c.frameworkPageShow()):d.hash!=a.hash&&(c.frameworkHistoryRouterGather(a),d=a,c.frameworkEventRouterChange(a))},0)),i||(i=setTimeout(function(){var b,d;i=null,b=a.innerHeight,d=a.innerWidth,(b!=g||d!=h)&&(g=b,h=d,c.frameworkEventResize(d,b))},0))},0),void 0)},c.frameworkHistoryPageList={back:[],forward:[],callback:function(){}},c.frameworkHistoryRouterList={back:[],forward:[],callback:function(){}},c.frameworkHistoryPageGather=function(a){var b,d,e,f;return c.frameworkHistoryPageList.callback(),c.frameworkHistoryPageList.callback=function(){},c.frameworkConfig.historyPageMaximum<1?!1:(b={title:document.title,router:a},d=c.frameworkHistoryPageList.back.length,1>d?c.frameworkHistoryPageList.back.push(b):(e=c.frameworkHistoryPageList.back[d-1],e.router.href!=a.href&&(d>c.frameworkConfig.historyPageMaximum&&c.frameworkHistoryPageList.back.shift(),c.frameworkHistoryPageList.back.push(b))),d=c.frameworkHistoryPageList.forward.length,1>d?!1:(f=c.frameworkHistoryPageList.forward[d-1],f.router.href==a.href&&c.frameworkHistoryPageList.forward.splice(d-1,1),void 0))},c.frameworkHistoryRouterGather=function(a){var b,d,e,f;return c.frameworkHistoryRouterList.callback(),c.frameworkHistoryRouterList.callback=function(){},c.frameworkConfig.historyRouterMaximum<1?!1:(b={title:document.title,router:a},d=c.frameworkHistoryRouterList.back.length,1>d?c.frameworkHistoryRouterList.back.push(b):(e=c.frameworkHistoryRouterList.back[d-1],e.router.href!=a.href&&(d>c.frameworkConfig.historyRouterMaximum&&c.frameworkHistoryRouterList.back.shift(),c.frameworkHistoryRouterList.back.push(b))),d=c.frameworkHistoryRouterList.forward.length,1>d?!1:(f=c.frameworkHistoryRouterList.forward[d-1],f.router.href==a.href&&c.frameworkHistoryRouterList.forward.splice(d-1,1),void 0))},c.frameworkReady=function(a){var b,d;return"function"!=typeof a&&(a=function(){}),b=c.frameworkProjectId,d=setInterval(function(){return c.frameworkProjectId!=b?(clearInterval(d),!1):c.frameworkProjectReady?(clearInterval(d),a(),!0):void 0},0),c.frameworkConstruct()},c.frameworkExport=new Object,c.frameworkProjectId="",c.frameworkProjectReady=!1,c.frameworkProjectPublic=new Object,c.frameworkProjectPrivate=new Object,c.frameworkProjectNotInitialize=new Object,c.frameworkProjectFoundPrivate=function(a,b){var d;if(c.frameworkProjectPrivate[a]={projectArguments:b,projectParent:void 0,projectChildren:[],compiler:void 0,compilerCount:0,selector:"undefined"!=typeof b.selector?b.selector:void 0,include:new Array,includeState:!1,extend:new Array,"export":new Object,exportState:!1,"import":"function"==typeof b["import"]?b["import"]:void 0,importArguments:new Object,template:"string"==typeof b.template||"number"==typeof b.template?b.template.toString():void 0,dataObserver:!1,renderParentNode:null,renderChildNodes:[],renderState:1,renderInterval:null,renderCount:0,runState:1,runInterval:null,runCount:0},"object"==typeof b.include&&b.include.constructor==Array)for(d in b.include)"string"==typeof b.include[d]?c.frameworkProjectPrivate[a].include.push({load:!1,file:b.include[d]}):"object"==typeof b.include[d]&&b.include[d].file&&c.frameworkProjectPrivate[a].include.push({load:!1,file:b.include[d].file,selector:b.include[d].selector,callback:b.include[d].callback});if("object"==typeof b.extend&&b.extend.constructor==Array)for(d in b.extend)c.frameworkProjectPrivate[a].extend.push(b.extend[d]);if("object"==typeof b.export)for(d in b.export)c.frameworkProjectPrivate[a].export[d]={load:!1,url:b.export[d]}},c.frameworkProjectFoundPublic=function(a,b){if(c.frameworkProjectPublic[a]=new g,Object.defineProperty(c.frameworkProjectPublic[a],"id",{value:a,writable:!1,configurable:!1}),Object.defineProperty(c.frameworkProjectPublic[a],"main",{value:"function"==typeof b.main?b.main:function(){},writable:!1,configurable:!1}),c.frameworkProjectPublic[a].data=new Object,"object"==typeof b.data&&c.frameworkProjectDataClone(a,b.data),c.frameworkProjectPublic[a].event=new Object,"object"==typeof b.event)for(var d in b.event)"undefined"!=typeof c.frameworkEvent[d]&&"function"==typeof b.event[d]&&(c.frameworkProjectPublic[a].event[d]=b.event[d])},c.frameworkProjectFound=function(a){return"object"!=typeof a||!a.id||"string"!=typeof a.id&&"number"!=typeof a.id?!1:"undefined"!=typeof c.frameworkProjectPrivate[a.id]||"undefined"!=typeof c.frameworkProjectPublic[a.id]?c.frameworkError("工程标识 “"+a.id+"” 重复！"):(c.frameworkProjectNotInitialize[a.id]=!0,c.frameworkProjectFoundPrivate(a.id,a),c.frameworkProjectFoundPublic(a.id,a),void 0)},c.frameworkProjectNew=function(a,b){var d,e,f;if(("string"==typeof b||"number"==typeof b)&&"undefined"!=typeof c.frameworkProjectPrivate[b])return!1;if("string"!=typeof b&&"number"!=typeof b)for(d=1;;){if(e=c.frameworkProjectPrivate[a].projectChildren.length+d,b=a+"("+e+")","undefined"==typeof c.frameworkProjectPrivate[b])break;d++}return f=c.frameworkProjectPrivate[a].projectArguments,c.frameworkProjectNotInitialize[b]=!0,c.frameworkProjectFoundPrivate(b,f),c.frameworkProjectFoundPublic(b,f),c.frameworkProjectInitialize(b),c.frameworkProjectPrivate[b].projectParent=c.frameworkProjectPublic[a],c.frameworkProjectPrivate[a].projectChildren.push(c.frameworkProjectPublic[b]),c.frameworkProjectPublic[b]},c.frameworkCloneRecursion=function(a){var b,d;if(a.constructor==Array)for(b=new Array,d=0;d<a.length;d++)null===a[d]||"object"!=typeof a[d]||a[d].constructor!=Object&&a[d].constructor!=Array?b.push(a[d]):b.push(c.frameworkCloneRecursion(a[d]));else{b=new Object;for(d in a)b[d]=null===a[d]||"object"!=typeof a[d]||a[d].constructor!=Object&&a[d].constructor!=Array?a[d]:c.frameworkCloneRecursion(a[d])}return b},c.frameworkCommandFormat=function(a,b){var d,e,f,c={};if(a.length)for(d=0;d<a.length;d++)if("string"==typeof a[d]&&(e=a[d].replace(/(^\s+|\s+$)/g,""),e=e.replace(/\s+/g," ").toLowerCase(),"object"==typeof b&&b.constructor==Array&&b.length))for(f=0;f<b.length;f++)if(b[f]==e){c[e]=!0;break}return c},c.frameworkError=function(a){var b=void 0;c.frameworkProjectPublic[c.frameworkProjectId]&&(b=c.frameworkProjectPublic[c.frameworkProjectId]),c.frameworkEvent.error(a,b),console.error(a,b)},c.frameworkWarning=function(a){var b=void 0;c.frameworkProjectPublic[c.frameworkProjectId]&&(b=c.frameworkProjectPublic[c.frameworkProjectId]),console.warn(a,b)},c.frameworkDebug=function(a){return c.frameworkConfig.debug?"function"==typeof a?a():void 0:!1},d.prototype={constructor:d,config:void 0,page:void 0,event:void 0,project:void 0,history:void 0,"export":void 0,ready:void 0,run:void 0},e.prototype={constructor:e,pageBackList:function(){return c.frameworkCloneRecursion(c.frameworkHistoryPageList.back)},pageForwardList:function(){return c.frameworkCloneRecursion(c.frameworkHistoryPageList.forward)},pageBackExist:function(){var a=c.frameworkHistoryPageList.back.length;return 2>a?!1:!0},pageForwardExist:function(){var a=c.frameworkHistoryPageList.forward.length;return 1>a?!1:!0},pageRemove:function(){var b,a=c.frameworkHistoryPageList.back.length;return a>0&&(b=c.routerConstruct(),backObject=c.frameworkHistoryPageList.back[a-1],backObject.router.href==b.href)?(c.frameworkHistoryPageList.back.splice(a-1,1),!0):!1},pageBack:function(){var b,d,e,f,g,h,i,j,k,a=c.routerConstruct();if(a.anchor&&a.anchor.query&&(a.anchor.query=void 0,a=c.routerConstruct(a)),b=c.frameworkHistoryPageList.back.length,1>b)return!1;for(d=null,e=0,f=0,g=0,h=[],i=b-1;i>=0;i--){if(j=c.frameworkHistoryPageList.back[i],k=c.routerConstruct(j.router),k.anchor&&k.anchor.query&&(k.anchor.query=void 0,k=c.routerConstruct(k)),f++,k.href!=a.href){d=j,e=i;break}g++,h.push(j)}return d?(c.frameworkHistoryPageList.callback=function(){var a,b,d;if(g>0){a=c.frameworkHistoryPageList.forward.length,g>=c.frameworkConfig.historyPageMaximum?c.frameworkHistoryPageList.forward=[]:a+g>c.frameworkConfig.historyPageMaximum&&(b=c.frameworkConfig.historyPageMaximum-g,c.frameworkHistoryPageList.forward.splice(b-1,a-b));for(d in h){if(c.frameworkHistoryPageList.forward.length>=c.frameworkConfig.historyPageMaximum)break;c.frameworkHistoryPageList.forward.push(h[d])}}c.frameworkHistoryPageList.back.splice(e,f)},d.router.request(),!0):!1},pageForward:function(){var b,a=c.frameworkHistoryPageList.forward.length;return 1>a?!1:(b=c.frameworkHistoryPageList.forward[a-1],c.frameworkHistoryPageList.callback=function(){1==a?c.frameworkHistoryPageList.forward=[]:c.frameworkHistoryPageList.forward.splice(a-1,1)},b.router.request(),!0)},routerBackList:function(){return c.frameworkCloneRecursion(c.frameworkHistoryRouterList.back)},routerForwardList:function(){return c.frameworkCloneRecursion(c.frameworkHistoryRouterList.forward)},routerBackExist:function(){var a=c.frameworkHistoryRouterList.back.length;return 2>a?!1:!0},routerForwardExist:function(){var a=c.frameworkHistoryRouterList.forward.length;return 1>a?!1:!0},routerRemove:function(){var b,a=c.frameworkHistoryRouterList.back.length;return a>0&&(b=c.routerConstruct(),backObject=c.frameworkHistoryRouterList.back[a-1],backObject.router.href==b.href)?(c.frameworkHistoryRouterList.back.splice(a-1,1),!0):!1},routerBack:function(){var d,e,f,g,h,i,j,a=c.routerConstruct(),b=c.frameworkHistoryRouterList.back.length;if(1>b)return!1;for(d=null,e=0,f=0,g=0,h=[],i=b-1;i>=0;i--){if(j=c.frameworkHistoryRouterList.back[i],f++,j.router.href!=a.href){d=j,e=i;break}g++,h.push(j)}return d?(c.frameworkHistoryRouterList.callback=function(){var a,b,d;if(g>0){a=c.frameworkHistoryRouterList.forward.length,g>=c.frameworkConfig.historyPageMaximum?c.frameworkHistoryRouterList.forward=[]:a+g>c.frameworkConfig.historyPageMaximum&&(b=c.frameworkConfig.historyPageMaximum-g,c.frameworkHistoryRouterList.forward.splice(b-1,a-b));for(d in h){if(c.frameworkHistoryRouterList.forward.length>=c.frameworkConfig.historyPageMaximum)break;c.frameworkHistoryRouterList.forward.push(h[d])}}c.frameworkHistoryRouterList.back.splice(e,f)},d.router.request(),!0):!1},routerForward:function(){var b,a=c.frameworkHistoryRouterList.forward.length;return 1>a?!1:(b=c.frameworkHistoryRouterList.forward[a-1],c.frameworkHistoryRouterList.callback=function(){1==a?c.frameworkHistoryRouterList.forward=[]:c.frameworkHistoryRouterList.forward.splice(a-1,1)},b.router.request(),!0)}},f.prototype={constructor:f},g.prototype={constructor:g,debug:function(){return console.log(c.frameworkProjectPrivate[this.id]),this},error:function(a){return c.frameworkEvent.error(a,c.frameworkProjectPublic[this.id]),"function"==typeof c.frameworkProjectPublic[this.id].event.error&&c.frameworkProjectPublic[this.id].event.error.call(c.frameworkProjectPublic[this.id],a),this},ready:function(a){var b,d;return"function"!=typeof a&&(a=function(){}),b=this,d=setInterval(function(){return"undefined"==typeof c.frameworkProjectNotInitialize[b.id]?(clearInterval(d),a(),!0):void 0},0),this},template:function(a){return"string"!=typeof a?this:(c.frameworkProjectPrivate[this.id].template=a,"object"==typeof c.frameworkProjectPrivate[this.id].compiler&&c.frameworkProjectPrivate[this.id].compiler.template!=a&&(c.frameworkProjectPrivate[this.id].renderChildNodes=[],c.frameworkProjectPrivate[this.id].compiler.template=a,c.frameworkProjectCompiler(this.id,!0)),this)},selector:function(a,b){return"undefined"!=typeof a?(b&&(c.frameworkProjectPrivate[this.id].selector=a),c.frameworkProjectRenderParentNode(this.id,a),this):c.frameworkProjectPrivate[this.id].renderParentNode},render:function(){var b,d,e,a={refresh:!1,reload:!1};return arguments.length>0&&(b=["refresh","reload"],d=c.frameworkCommandFormat(arguments,b),"undefined"!=typeof d[b[0]]&&(a.refresh=!0),"undefined"!=typeof d[b[1]]&&(a.reload=!0)),e=this,c.frameworkDebug(function(){console.log("【render】参数：",a,"当前工程ID："+e.id)}),c.frameworkProjectRender(e.id,a),this},compiler:function(){var b,d,e,a={reload:!1};return arguments.length>0&&(b=["reload"],d=c.frameworkCommandFormat(arguments,b),"undefined"!=typeof d[b[0]]&&(a.reload=!0)),e=this,c.frameworkDebug(function(){console.log("【compiler】参数：",a,"当前工程ID："+e.id)}),c.frameworkProjectCompiler(this.id,a.reload),this},run:function(){var b,d,e,a={init:!1,refresh:!1,reload:!1};return arguments.length>0&&(b=["init","refresh","reload"],d=c.frameworkCommandFormat(arguments,b),"undefined"!=typeof d[b[0]]&&(a.init=!0),"undefined"!=typeof d[b[1]]&&(a.refresh=!0),"undefined"!=typeof d[b[2]]&&(a.reload=!0)),e=this,c.frameworkDebug(function(){console.log("【run】参数：",a,"当前工程ID："+e.id)}),c.frameworkEvent.pageStart(),a&&a.init?c.frameworkProjectInitializeRun(function(){return c.frameworkProjectRun(e.id,a)}):c.frameworkProjectRun(e.id,a),this},html:function(){c.frameworkDebug(function(){console.log("【获取节点的HTML内容】","判断是否存在父级节点中："+bool)});var a=c.frameworkProjectRenderTempHTMLDOMElement(this.id);return a.innerHTML},text:function(){c.frameworkDebug(function(){console.log("【获取节点的TEXT内容】","判断是否存在父级节点中："+bool)});var a=c.frameworkProjectRenderTempHTMLDOMElement(this.id);return a.innerText?a.innerText:a.textContent?a.textContent:void 0},node:function(){return c.frameworkProjectPrivate[this.id].renderChildNodes},clone:function(a){return c.frameworkProjectDataClone(this.id,a),this},state:function(){var d,e,a=["run off","run on","run stop"],b=["render off","render on","render stop"];return arguments.length>0&&(d=a.concat(b),e=c.frameworkCommandFormat(arguments,d),"undefined"!=typeof e[a[0]]&&(c.frameworkProjectPrivate[this.id].runState=0),"undefined"!=typeof e[a[2]]&&(c.frameworkProjectPrivate[this.id].runState=2),"undefined"!=typeof e[a[1]]&&(c.frameworkProjectPrivate[this.id].runState=1),"undefined"!=typeof e[b[0]]&&(c.frameworkProjectPrivate[this.id].renderState=0),"undefined"!=typeof e[b[2]]&&(c.frameworkProjectPrivate[this.id].renderState=2),"undefined"!=typeof e[b[1]]&&(c.frameworkProjectPrivate[this.id].renderState=1)),{runState:a[c.frameworkProjectPrivate[this.id].runState],renderState:b[c.frameworkProjectPrivate[this.id].renderState],compilerState:c.frameworkProjectPrivate[this.id].compiler?!0:!1,compilerCount:c.frameworkProjectPrivate[this.id].compilerCount,renderCount:c.frameworkProjectPrivate[this.id].renderCount,runCount:c.frameworkProjectPrivate[this.id].runCount,renderStateOn:1==c.frameworkProjectPrivate[this.id].renderState?!0:!1,renderStateOff:0==c.frameworkProjectPrivate[this.id].renderState?!0:!1,renderStateStop:2==c.frameworkProjectPrivate[this.id].renderState?!0:!1,runStateOn:1==c.frameworkProjectPrivate[this.id].runState?!0:!1,runStateOff:0==c.frameworkProjectPrivate[this.id].runState?!0:!1,runStateStop:2==c.frameworkProjectPrivate[this.id].runState?!0:!1}
},"new":function(a){return c.frameworkProjectNew(this.id,a)},parent:function(){return c.frameworkProjectPrivate[this.id].projectParent},children:function(){var d,a=new Array,b=c.frameworkProjectPrivate[this.id].projectChildren;for(d=0;d<b.length;d++)a.push(b[d]);return a}},h.prototype={constructor:h,exists:function(){var a,b,c,d,e;if(""==this.file||""==this.type)return!1;if(a=!1,b={js:"script",css:"link"},c=b[this.type],void 0!=c){d=document.getElementsByTagName(c);for(e in d)if(d[e].href&&"-1"!=d[e].href.toString().indexOf(this.file)||d[e].src&&"-1"!=d[e].src.toString().indexOf(this.file)){a=!0;break}}return a},remove:function(){var a,b,c,d,e;if(""==this.file||""==this.type)return!1;if(a=!1,b={js:"script",css:"link"},c=b[this.type],void 0!=c){d=document.getElementsByTagName(c);for(e in d)if(d[e].href&&"-1"!=d[e].href.toString().indexOf(this.file)||d[e].src&&"-1"!=d[e].src.toString().indexOf(this.file)){d[e].parentNode.removeChild(d[e]),a=!0;break}}return a},run:function(a){var b,c;return"object"!=typeof this.element||!this.element.constructor||this.element.constructor!=HTMLLinkElement&&this.element.constructor!=HTMLScriptElement?!1:this.exists()&&this.unique?!0:("object"==typeof this.selector&&this.selector instanceof HTMLElement?b=this.selector:("string"==typeof this.selector||"number"==typeof this.selector)&&(c=document.querySelectorAll(this.selector),b=c.length&&c[0]?c[0]:null),"function"!=typeof a?b&&b.appendChild?(b.appendChild(this.element),!0):!1:(a.call(this,b),void 0))},error:function(a){if("object"!=typeof this.element||!this.element.constructor||this.element.constructor!=HTMLLinkElement&&this.element.constructor!=HTMLScriptElement)return this;var b=this;return this.element.onerror=function(){a&&a.call(b.element,b)},this},load:function(a){if("object"!=typeof this.element||!this.element.constructor||this.element.constructor!=HTMLLinkElement&&this.element.constructor!=HTMLScriptElement)return this;var b=this;return this.element.onload=function(){a&&a.call(b.element,b)},this}},i.prototype={constructor:i,reload:function(a){return a?window.location.reload(!0):window.location.reload(),this},request:function(a){return a?window.location.replace(this.href):window.location.assign(this.href),this},open:function(a,b,c){var d={};return d.width=a&&"number"==typeof a?a:100,d.height=b&&"number"==typeof b?b:100,d.left=c&&"number"==typeof c.left?c.left:(window.screen.width-d.width)/2,d.top=c&&"number"==typeof c.top?c.top:(window.screen.height-d.height)/2,d.target=!c||"string"!=typeof c.target&&"number"!=typeof c.target?"_blank":c.target,d.toolbar=c&&"string"==typeof c.toolbar?c.toolbar:"no",d.scrollbars=c&&"string"==typeof c.scrollbars?c.scrollbars:"no",d.menubar=c&&"string"==typeof c.menubar?c.menubar:"no",d.location=c&&"string"==typeof c.location?c.location:"no",d.resizable=c&&"string"==typeof c.resizable?c.resizable:"no",d.status=c&&"string"==typeof c.status?c.status:"no",window.open(this.href,d.target,"height="+d.height+", width="+d.width+", top="+d.top+", left="+d.left+", toolbar="+d.toolbar+", menubar="+d.menubar+", scrollbars="+d.scrollbars+", resizable="+d.resizable+",location="+d.location+", status="+d.status),this}},j.prototype={constructor:j,render:function(a){return("object"!=typeof a||null===a)&&(a={}),a.compiler=this,c.compilerRender(a)},reload:function(){return c.compilerReload(this),this}},k.prototype={constructor:k},k.constructor=k,k.version="1.0.0",k.js="av.js 全称 Action View for JavaScript，是JavaScript操作视图的小引擎！v"+k.version,k.run=function(){return c.frameworkConstruct.apply(c.frameworkConstruct,arguments)},k.framework=function(){return c.frameworkConstruct.apply(c.frameworkConstruct,arguments)},k.include=function(){return c.includeConstruct.apply(h,arguments)},k.ajax=function(){return c.ajaxConstruct.apply(c.ajaxConstruct,arguments)},k.router=function(){return c.routerConstruct.apply(i,arguments)},k.compiler=function(){return c.compilerConstruct.apply(j,arguments)},k.triggerClick=function(a){var c,b="Microsoft Internet Explorer"==navigator.appName?!0:!1;b?a.click():(c=document.createEvent("MouseEvents"),c.initEvent("click",!0,!0),a.dispatchEvent(c))},k.getfileURL=function(a){var b="";try{void 0!=window.createObjectURL?b=window.createObjectURL(a):void 0!=window.URL?b=window.URL.createObjectURL(a):void 0!=window.webkitURL&&(b=window.webkitURL.createObjectURL(a))}catch(c){b=""}return b},k.setTitle=function(a,b){if("string"!=typeof a&&"number"!=typeof a&&(a=""),document.title==a)return!1;if(document.title=a,"string"==typeof b){var c=document.createElement("iframe");c.style["left"]="-99999px",c.style["position"]="absolute",c.src=b,c.onload=function(){document.body.removeChild(c)},document.body.appendChild(c)}},k.byte=function(a,b){var c,d,e;return isNaN(a)?"":(c=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(2)),1>d&&(d=0),e=Math.floor(d/10),a/=Math.pow(2,10*e),a.toString().length>a.toFixed(2).toString().length&&(a=a.toFixed(2)),"string"!=typeof b&&(b=""),a+b+c[e])},k.date=function(a,b){var c,d,e,f;c=b?new Date(b):new Date,d={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==c.getHours()%12?12:c.getHours()%12,"H+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()},e={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(a)&&(a=a.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+e[c.getDay()+""]));for(f in d)new RegExp("("+f+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?d[f]:("00"+d[f]).substr((""+d[f]).length)));return decodeURI(a)},k.encodeURL=function(a){var b,c,d;if(0==arguments.length)return null;if(!a)return a;if("object"==typeof a&&a.constructor==Array){for(b=new Array,c=0;c<a.length;c++)b[c]="object"==typeof a[c]?k.encodeURL(a[c]):k.encodeURL(a[c]);return b}if("object"==typeof a){d=new Object;for(c in a)d[k.encodeURL(c)]="object"==typeof a[c]?k.encodeURL(a[c]):k.encodeURL(a[c]);return d}return"string"==typeof a?encodeURIComponent(a):a},k.decodeURL=function(a){var b,c,d;if(0==arguments.length)return null;if(!a)return a;if("object"==typeof a&&a.constructor==Array){for(b=new Array,c=0;c<a.length;c++)b[c]="object"==typeof a[c]?k.decodeURL(a[c]):k.decodeURL(a[c]);return b}if("object"==typeof a){d=new Object;for(c in a)d[k.decodeURL(c)]="object"==typeof a[c]?k.decodeURL(a[c]):k.decodeURL(a[c]);return d}return"string"==typeof a?decodeURIComponent(a):a},k.encodeHTML=function(a){var b,c;return 0==arguments.length?null:"string"!=typeof a?a:(b=document.createElement("DIV"),b.innerText?b.innerText=a:b.textContent=a,c=b.innerHTML,b=null,c=c.replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"))},k.decodeHTML=function(a){var b,c;return 0==arguments.length?null:"string"!=typeof a?a:(b=document.createElement("DIV"),b.innerHTML=a,c=b.innerText||b.textContent,b=null,c)},a.av=k}(window,document);