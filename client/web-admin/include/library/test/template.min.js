(function(w,d){function template(){if(arguments.length==0){return false}if(!arguments[0]||(typeof arguments[0]!='string')){return false}var f=new Object();f.config={helper:new Object(),template:arguments[0],compile:template.prototype.compile(arguments[0]),};f.helper=template.prototype.helper;var g=(function(){try{return new Function(f.config.compile)}catch(e){console.log("Template Error:",f.config);throw e;}}());f.render=function(c){if(typeof c!='object'){c={}}return g.call({'data':c,'s':'','helper':f.config.helper,'echo':function(d){return typeof d=='string'||typeof d=='number'?d:''},'encode':function(s){if(arguments.length==0){return null}if((typeof s!='string')){return s}var a=document.createElement("DIV");if(a.innerText){a.innerText=s}else{a.textContent=s}var b=a.innerHTML;a=null;b=b.replace(/\'/g,'&apos;').replace(/\"/g,'&quot;');return b},'decode':function(s){if(arguments.length==0){return null}if((typeof s!='string')){return s}var a=document.createElement("DIV");a.innerHTML=s;var b=a.innerText||a.textContent;a=null;return b},})};if(arguments.length>1){if(typeof arguments[1]=='function'){return arguments[1].call(f,f.render)}else{if(typeof arguments[1]!='object'){arguments[1]=Object(arguments[1])}return f.render(arguments[1])}}else{return f.render}}template.prototype={constructor:template,helper:function(n,a){if(n===null){this.config.helper=new Object()}if((typeof n!='string')||!n){return false}n=n.replace(/(^\s*)|(\s*$)/g,'');if(n==''){return false}if(a===null){this.config.helper[n]=new Object()}if(!a||(typeof a!='function')){return false}this.config.helper[n]=a;return true},compile:function(c){if(!c||c==''){return}function algorithm(a,b){if(b==''||typeof b=='undefined'){return''}var s='';for(var i in a){var m=a[i]['pattern'].exec(b);if(m){s+=algorithm(a,b.substr(0,m.index));s+=a[i]['fn'].call(m);s+=algorithm(a,b.substr((m.index+m[0].length)));return s}}b=b.replace(/\'/g,"\\'");return'this.s+=\''+b+'\';'}c=c.replace(/\n/g,'\\\n');var s='this.s=\'\';';s+='with(this.data){';s+=algorithm(this['regexp'],c);s+='}';s+='return this.s;';return s},'regexp':{'<!-- text | html {} -->':{'pattern':/\<\!\-\-\s{0,}(text|html)?\s{0,}\{([^\{\}]+)\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){var s='';s+='if((function(){try{return '+this[2]+',true;}catch(e){return false;}}())){';if(this[1]=='html'){s+='this.s+=this.echo('+this[2]+');'}else{s+='this.s+=this.echo(this.encode('+this[2]+'));'}s+='}';return s}},'<!-- js {} -->':{'pattern':/\<\!\-\-\s{0,}js\s{0,}\{([^\{\}]+)\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){var s='';s+=this[1]+";";return s}},'<!-- helper {} -->':{'pattern':/\<\!\-\-\s{0,}helper\s{0,}\{[\'|\"]([^\{\}\'\"]+)[\'|\"]\s{0,}([^\(\)\{\}\'\"\s]+)?\s{0,}(\([^\(\)\{\}]{0,}\))?\s{0,}\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){this[1]=this[1].replace(/(^\s*)|(\s*$)/g,'');var a='this.helper[\''+this[1]+'\']';var b='typeof '+a+' !== \'undefined\'';if(typeof this[2]!=='undefined'){a=a+'.'+this[2];b+=' && typeof '+a+' !== \'undefined\''}var c='';if(typeof this[3]!=='undefined'){var d=this[3].replace(/(^\()|(\)$)/g,'').split(',');for(var i=0;i<d.length;i++){d[i]=d[i].replace(/(^\s*)|(\s*$)/g,'');if(d[i]==''){continue}if(c==''){c='(function(){try{return '+d[i]+';}catch(e){return undefined;}}())'}else{c+=',(function(){try{return '+d[i]+';}catch(e){return undefined;}}())'}}c='('+c+')'}else{c='()'}var s='';s+='if('+b+'){';s+='this.s+=this.echo('+a+c+');';s+='}';return s}},'<!-- if helper | elseif helper {""()} -->':{'pattern':/\<\!\-\-\s{0,}(if|elseif)\s{1,}helper\s{0,}\{[\'|\"]([^\{\}\'\"]+)[\'|\"]\s{0,}([^\(\)\{\}\'\"\s]+)?\s{0,}(\([^\(\)\{\}]{0,}\))?\s{0,}\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){this[2]=this[2].replace(/(^\s*)|(\s*$)/g,'');var a='this.helper[\''+this[2]+'\']';var b='typeof '+a+' !== \'undefined\'';if(typeof this[3]!=='undefined'){a=a+'.'+this[3];b+=' && typeof '+a+' !== \'undefined\''}var c='';if(typeof this[4]!=='undefined'){var d=this[4].replace(/(^\()|(\)$)/g,'').split(',');for(var i=0;i<d.length;i++){d[i]=d[i].replace(/(^\s*)|(\s*$)/g,'');if(d[i]==''){continue}if(c==''){c='(function(){try{return '+d[i]+';}catch(e){return undefined;}}())'}else{c+=',(function(){try{return '+d[i]+';}catch(e){return undefined;}}())'}}c='('+c+')'}else{c='()'}if(this[1]=='if'){return'if('+b+' && '+a+c+'){'}else if(this[1]=='elseif'){return'}else if('+b+' && '+a+c+'){'}}},'<!-- if | elseif {} -->':{'pattern':/\<\!\-\-\s{0,}(if|elseif)\s{0,}\{([^\{\}]+)\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){if(this[1]=='if'){return'if((function(){try{return '+this[2]+';}catch(e){return false;}}())){'}else if(this[1]=='elseif'){return'}else if((function(){try{return '+this[2]+';}catch(e){return false;}}())){'}}},'<!-- else -->':{'pattern':/\<\!\-\-\s{0,}else\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){return'}else{'}},'<!-- for {in} -->':{'pattern':/\<\!\-\-\s{0,}for\s{0,}\{(var[\s]+){0,1}([^\s]+)\s{1,}in\s{1,}([^\<\>\{\}]+)\s{0,}\}\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){var s='';if(typeof this[1]!=='undefined'){this[1]=this[1].replace(/(^\s*)|(\s*$)/g,'');s+='for('+this[1]+' '+this[2]+' in '+this[3]+'){'}else{s+='for('+this[2]+' in '+this[3]+'){'}return s}},'<!-- /if | /for -->':{'pattern':/\<\!\-\-\s{0,}\/\s{0,}(if|for)\s{0,}(\#[^\>]+)?\s{0,}\-\-\>/,'fn':function(){return'}'}},},};w.template=template;w.template.v='v1'})(window,document);